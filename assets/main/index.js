window.__require=function e(t,o,i){function a(r,s){if(!o[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var p=o[r]={exports:{}};t[r][0].call(p.exports,function(e){return a(t[r][1][e]||e)},p,p.exports,e,t,o,i)}return o[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<i.length;r++)a(i[r]);return a}({AddGridWindow:[function(e,t,o){"use strict";cc._RF.push(t,"f2f233V9BJLs4qWx+nWScTl","AddGridWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/global/I18N"),n=e("../../core/UI/Toast"),r=e("../../core/UI/WWindow"),s=e("../../core/util/StrUtil"),l=e("../../Game"),c=e("../../global/Const"),p=e("../../global/GameConfig"),u=e("../UICenter"),d=cc._decorator,h=d.ccclass,f=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTitle=null,t.labelCost=null,t.labelDesc=null,t.labelTip=null,t.mIsBuy=!1,t.greenValue="#359002",t.redValue="#ff0000",t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),i.Emitter.register(c.default.eGoldDataChanged,this.refreshDescInfo,this)},t.prototype.show=function(t){e.prototype.show.call(this),this.onFinished=t,this.mIsBuy=!1,this.refreshDescInfo()},t.prototype.initLanguage=function(){this.labelTitle.string=a.default.get("L30002"),this.labelCost.string=a.default.get("L40124"),this.labelTip.string=a.default.get("L50004"),this.refreshDescInfo()},t.prototype.hide=function(){e.prototype.hide.call(this),this.onFinished&&this.onFinished(this.mIsBuy)},t.prototype.onBuyClick=function(){var e=l.Game.userData.goldData;if(e.gold<p.default.AddGridCost)return n.default.showWith(a.default.get("L858")),void u.UICenter.openShopWindow();e.gold-=p.default.AddGridCost,l.Game.userData.goldData=e,this.mIsBuy=!0,this.hide()},t.prototype.refreshDescInfo=function(){var e=l.Game.userData.goldData,t=e.gold>=p.default.AddGridCost?this.greenValue:this.redValue;this.labelDesc.string=s.default.stringFormat(a.default.get("L50005"),t,e.gold)},__decorate([f(cc.Label)],t.prototype,"labelTitle",void 0),__decorate([f(cc.Label)],t.prototype,"labelCost",void 0),__decorate([f(cc.RichText)],t.prototype,"labelDesc",void 0),__decorate([f(cc.Label)],t.prototype,"labelTip",void 0),__decorate([h],t)}(r.default);o.default=g,cc._RF.pop()},{"../../Game":"Game","../../core/UI/Toast":"Toast","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../UICenter":"UICenter"}],AndroidPaySDK:[function(e,t,o){"use strict";cc._RF.push(t,"7e9a5VpLB5PpYW9heEzxf/N","AndroidPaySDK"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){window.androidPayCallBack=this.SDKPayCallBack,window.androidPayCallSelf=this}return e.prototype.PayisLoaded=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","payStatus","()Z")},e.prototype.purchase=function(e,t,o){this.onPayCallback=o,jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","callPayment","(Ljava/lang/String;I)V",e,t)},e.prototype.suppleMent=function(e){this.onSupplementBack=e,jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","suppleMent","()V")},e.prototype.SDKPayCallBack=function(e){var t=e.type,o=e.revalue,i=e.productId,a=e.orderId;console.log("*****king SDKPayCallBack status:"+o+"  type:"+t+"  productId:"+i+"  orderId:"+a);var n=window.androidPayCallSelf;"androidpayMentBack"==t?n.onPayCallback(a,o):"androidSupplementBack"==t&&n.onSupplementBack(i,a,o)},e}();o.default=i,cc._RF.pop()},{}],AndroidSDK:[function(e,t,o){"use strict";cc._RF.push(t,"a1b32cn4hRLSIw/C4wM/gsB","AndroidSDK"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./SDKConst"),a=e("../core/global/Emitter"),n=cc._decorator,r=n.ccclass,s=(n.property,function(){function e(){window.androidCallBack=this.SDKCallBack,window.androidCallSelf=this}var t;return t=e,e.prototype.addPushMessage=function(e,t,o,i,a){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","addPushMessage","(Ljava/lang/String;Ljava/lang/String;III)V",e,t,o,i,a)},e.prototype.setOrientation=function(e){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setOrientation","(I)V",e)},e.prototype.logEvent=function(e,t,o){t||(t="empty"),o||(o="empty"),console.log("*****king \u8c03\u7528android logEvent"+e),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","logEvent","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,t,o)},e.prototype.getAFStatus=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getAFStatus","()I")},e.prototype.setAdUid=function(e){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setUid","(Ljava/lang/String;)V",e)},e.prototype.ADisLoaded=function(e){return void 0===e&&(e=i.default.AD_TYPE_INTERST),e==i.default.AD_TYPE_INTERST?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isInterstitialReady","()Z"):e==i.default.AD_TYPE_REWARD?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isRewardVedioLoaded","()Z"):e==i.default.AD_TYPE_BANNER&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isBannerLoaded","()Z")},e.prototype.initAD=function(){},e.prototype.loadAD=function(e,t){void 0===t&&(t=i.default.AD_TYPE_INTERST),t==i.default.AD_TYPE_INTERST&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","loadInterstitial","()V")},e.prototype.showInterstitial=function(e,t,o,i){this.InterstitialCall={showStateCall:e,closeCall:t,thisObj:o},jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showInterstitial","(I)V",i)},e.prototype.showReward=function(e,t,o,i){this.ADCall={showStateCall:e,closeCall:t,thisObj:o},jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showRewardAD","(I)V",i)},e.prototype.displayBannerAD=function(e){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","displayBannerAD","(Z)V",e)},e.prototype.hasBannerAD=function(){return!0},e.prototype.rewardAvailability=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","rewardAvailability","()Z")},e.prototype.SDKCallBack=function(e){var t=e.type,o=e.value,i=window.androidCallSelf;if("rewardComplete"==t){var n=i.ADCall,r=n.closeCall,s=n.thisObj;r&&r.call(s,o)}if("rewardShow"==t){var l=i.ADCall,c=l.showStateCall;s=l.thisObj,c&&c.call(s,o)}if("interstitialClosed"==t){var p=i.InterstitialCall;r=p.closeCall,s=p.thisObj,r&&r.call(s,o)}if("interstitialShow"==t){var u=i.InterstitialCall;c=u.showStateCall,s=u.thisObj,c&&c.call(s,o)}"bannerLoaded"==t&&a.Emitter.fire("bannerLoaded"),"interstitialLoad"==t&&a.Emitter.fire("interstitialLoad"),"rewardLoad"==t&&a.Emitter.fire("rewardLoad"),"rewardedAdLoadState"==t&&a.Emitter.fire("rewardedAdLoadState",o)},e.prototype.getLocal=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getLocalLanague","()Ljava/lang/String;")},e.prototype.getData=function(e,o,i){var a=cc.sys.localStorage.getItem(t.localStorageKey),n=a?JSON.parse(a):{};if(e){for(var r={},s=0,l=e;s<l.length;s++){var c=l[s];r[c]=n[c]}o.call(i,r)}else o.call(i,n)},e.prototype.setData=function(e){var o=cc.sys.localStorage.getItem(t.localStorageKey),i=o?JSON.parse(o):{};for(var a in e)i[a]=e[a];cc.sys.localStorage.setItem(t.localStorageKey,JSON.stringify(i))},e.prototype.showRateDialog=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","rateOnMarket","()V")},e.prototype.getIsRated=function(){return!1},e.prototype.getVersion=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getVersion","()Ljava/lang/String;")},e.prototype.smbCommand=function(e,t){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","command","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},e.localStorageKey="game_MD_2",t=__decorate([r],e)}());o.default=s,cc._RF.pop()},{"../core/global/Emitter":"Emitter","./SDKConst":"SDKConst"}],AniBase:[function(e,t,o){"use strict";cc._RF.push(t,"13599MQa31GgJ6MjsYqdGGU","AniBase"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/component/Orientation"),a=function(){function e(){this.node=null,this.bgWidget=null}return Object.defineProperty(e.prototype,"showTime",{get:function(){return i.default.current.isPortrait?.2:.3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideTime",{get:function(){return i.default.current.isPortrait?.15:.2},enumerable:!1,configurable:!0}),e.prototype.reset=function(){},e.prototype.init=function(e){this.node=e,this.bgWidget=this.node.getChildByName("bg").getComponent(cc.Widget)},e.prototype.show=function(e){e()},e.prototype.hide=function(e){e()},e}();o.default=a,cc._RF.pop()},{"../../core/component/Orientation":"Orientation"}],AniBottomToShow:[function(e,t,o){"use strict";cc._RF.push(t,"61dbdiE7D5BBa8foGlUFlPs","AniBottomToShow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./AniBase"),a=e("../../core/component/Orientation"),n=e("../../Game"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mUiRootWidget=null,t.mask=null,t}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),this.mUiRootWidget=n.Game.uiMgr.uiRoot.getComponent(cc.Widget),this.mask=this.node.getChildByName("mask")},t.prototype.show=function(t){var o=this;cc.Tween.stopAllByTarget(this.bgWidget),cc.Tween.stopAllByTarget(this.mask),cc.Tween.stopAllByTarget(this.node),this.bgWidget.bottom=-300,this.mask.opacity=0,this.node.opacity=0,cc.tween(this.mask).to(this.hideTime,{opacity:100}).start(),cc.tween(this.node).to(this.hideTime,{opacity:255}).start(),cc.tween(this.bgWidget).to(this.showTime,{bottom:a.default.current.isPortrait?104-this.mUiRootWidget.bottom:0}).call(function(){e.prototype.show.call(o,t)}).start()},t.prototype.hide=function(t){var o=this;cc.Tween.stopAllByTarget(this.bgWidget),cc.Tween.stopAllByTarget(this.mask),cc.Tween.stopAllByTarget(this.node),cc.tween(this.mask).to(this.hideTime,{opacity:0}).start(),cc.tween(this.node).to(this.hideTime,{opacity:0}).start(),cc.tween(this.bgWidget).to(this.hideTime,{bottom:-300}).call(function(){e.prototype.hide.call(o,t)}).start()},t}(i.default);o.default=r,cc._RF.pop()},{"../../Game":"Game","../../core/component/Orientation":"Orientation","./AniBase":"AniBase"}],AniLeftToRightShow:[function(e,t,o){"use strict";cc._RF.push(t,"49cfag3l5dLgIJDroFnPrOO","AniLeftToRightShow"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.bgWidget.left=0,this.bgWidget.right=0},t.prototype.show=function(t){var o=this;cc.Tween.stopAllByTarget(this.bgWidget),this.bgWidget.left=-cc.winSize.width,this.bgWidget.right=cc.winSize.width,cc.tween(this.bgWidget).to(this.hideTime,{left:0,right:0}).call(function(){e.prototype.show.call(o,t)}).start()},t.prototype.hide=function(t){var o=this;cc.Tween.stopAllByTarget(this.bgWidget),this.bgWidget.left=0,this.bgWidget.right=0,cc.tween(this.bgWidget).to(this.showTime,{left:-cc.winSize.width,right:cc.winSize.width}).call(function(){e.prototype.hide.call(o,t)}).start()},t}(e("./AniBase").default);o.default=i,cc._RF.pop()},{"./AniBase":"AniBase"}],AniRightToLeftShow:[function(e,t,o){"use strict";cc._RF.push(t,"3c9c59+dz9P+Z7faaTtcs+/","AniRightToLeftShow"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.bgWidget.left=0,this.bgWidget.right=0},t.prototype.show=function(t){var o=this;cc.Tween.stopAllByTarget(this.bgWidget),this.bgWidget.left=cc.winSize.width,this.bgWidget.right=-cc.winSize.width,cc.tween(this.bgWidget).to(this.showTime,{left:0,right:0}).call(function(){e.prototype.show.call(o,t)}).start()},t.prototype.hide=function(t){var o=this;cc.Tween.stopAllByTarget(this.bgWidget),this.bgWidget.left=0,this.bgWidget.right=0,cc.tween(this.bgWidget).to(this.hideTime,{left:cc.winSize.width,right:-cc.winSize.width}).call(function(){e.prototype.hide.call(o,t)}).start()},t}(e("./AniBase").default);o.default=i,cc._RF.pop()},{"./AniBase":"AniBase"}],AnimationUtil:[function(e,t,o){"use strict";cc._RF.push(t,"d72054Cq6VA47QP9SqWBftU","AnimationUtil"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../core/util/MathUtil"),a=e("../global/AudioMgr"),n=function(){function e(){}return e.randomBezier=function(e,t){var o=(e.x+t.x)/2,a=(e.y+t.y)/2,n=i.default.randomRange(o-this.RamdomDis,o+this.RamdomDis),r=i.default.randomRange(a-this.RamdomDis,a+this.RamdomDis);return[i.default.vec2(e),new cc.Vec2(n,r),i.default.vec2(t)]},e.bezierFly=function(e,t,o,i,a,n,r,s){var l=this,c=t.convertToWorldSpaceAR(cc.Vec3.ZERO);c=e.convertToNodeSpaceAR(c);var p=o.convertToWorldSpaceAR(cc.Vec3.ZERO);p=e.convertToNodeSpaceAR(p);var u=Math.ceil(i/a),d=10*this.DelayGap/u;d>this.DelayGap&&(d=this.DelayGap);for(var h=function(t){var h=cc.instantiate(o);h.stopAllActions(),h.parent=e,h.position=c,h.scale=0;var g=cc.scaleTo(f.ScaleDur,1),y=cc.delayTime(f.MoveDur-2*f.ScaleDur),m=cc.scaleTo(f.ScaleDur,0),v=cc.sequence(g,y,m),_=cc.bezierTo(f.MoveDur,f.randomBezier(c,p)),b=cc.spawn(v,_),T=cc.delayTime(d*t);h.runAction(cc.sequence(T,b,cc.callFunc(function(){h.destroy();var e=t==u-1,c=cc.sequence(cc.callFunc(function(){r(e)}),cc.scaleTo(l.IconScaleDur,1.3),cc.scaleTo(l.IconScaleDur,1));e?(n(i%a==0?a:i%a),o.stopAllActions(),o.runAction(c),setTimeout(s,500)):(n(a),0==t&&o.runAction(cc.repeatForever(c)))})))},f=this,g=0;g<u;g++)h(g)},e.getRandomOrder=function(e){for(var t=[],o=0;o<e;o++)t.push(o);var a=[];for(o=0;o<e;o++){var n=i.default.randomRange(0,t.length);a.push(t[n]),t.splice(n,1)}return a},e.getRandomPosition=function(e,t){for(var o=[],a=this.getRandomOrder(t),n=0;n<t;n++){var r=a[n],s=(this.rangeAngle-this.sepAngle*(t-1))/t,l=(180-this.rangeAngle)/2+s*r+this.sepAngle*r,c=l+s,p=i.default.randomRange(l,c),u=i.default.randomRange(53,101)*this.rangeRadius/100,d=cc.v2(u*Math.cos(p*Math.PI/180),u*Math.sin(p*Math.PI/180));d.x+=e.x,d.y+=e.y,o.push(d)}return o},e.starsFly=function(e,t,o,n,r,s,l,c){var p=this,u=t.convertToWorldSpaceAR(cc.Vec3.ZERO);u=e.convertToNodeSpaceAR(u);var d=o.convertToWorldSpaceAR(cc.Vec3.ZERO);d=e.convertToNodeSpaceAR(d);for(var h=Math.ceil(n/r),f=this.getRandomPosition(u,h),g=function(t){var g=cc.instantiate(o);g.stopAllActions(),g.parent=e,g.position=u,g.scale=0;var y=cc.moveTo(.25,f[t]).easing(cc.easeBackInOut()),m=15*t-10,v=cc.rotateTo(.25,m),_=cc.scaleTo(.25,2.6),b=cc.spawn(y,v,_),T=cc.moveTo(.4,i.default.vec2(d)).easing(cc.easeExponentialIn()),C=cc.rotateTo(.4,0),S=cc.spawn(T,C),I=cc.delayTime(.3*t),D=cc.delayTime(.2);g.runAction(cc.sequence(I,cc.callFunc(function(){a.AudioMgr.playEffect("box_getstar")}),b,D,S,cc.callFunc(function(){g.destroy();var e=t==h-1,i=cc.sequence(cc.callFunc(function(){l(e)}),cc.scaleTo(p.IconScaleDur,1.3),cc.scaleTo(p.IconScaleDur,1));e?(s(n%r==0?r:n%r),o.stopAllActions(),o.runAction(i),setTimeout(c,500)):(s(r),0==t&&o.runAction(cc.repeatForever(i)))})))},y=0;y<h;y++)g(y)},e.diamondFly=function(e,t,o,i,n,r,s,l,c){var p=this,u=t.convertToWorldSpaceAR(cc.Vec3.ZERO);u=e.convertToNodeSpaceAR(u);var d=o.convertToWorldSpaceAR(cc.Vec3.ZERO);d=e.convertToNodeSpaceAR(d);var h=Math.ceil(n/r),f=10*this.DelayGap/h;f>this.DelayGap&&(f=this.DelayGap);for(var g=function(t){var o=cc.instantiate(i);o.stopAllActions(),o.parent=e,o.position=u,o.scale=0;var g=cc.scaleTo(y.ScaleDur,1),m=cc.delayTime(y.MoveDur-2*y.ScaleDur),v=cc.scaleTo(y.ScaleDur,0),_=cc.sequence(g,m,v),b=cc.bezierTo(y.MoveDur,y.randomBezier(u,d)),T=cc.spawn(_,b),C=cc.delayTime(f*t);o.runAction(cc.sequence(C,cc.callFunc(function(){a.AudioMgr.playEffect("box_getdiamond")}),T,cc.callFunc(function(){o.destroy();var e=t==h-1,a=cc.sequence(cc.callFunc(function(){l(e)}),cc.scaleTo(p.IconScaleDur,1.3),cc.scaleTo(p.IconScaleDur,1));e?(s(n%r==0?r:n%r),i.stopAllActions(),i.runAction(a),setTimeout(c,500)):(s(r),0==t&&i.runAction(cc.repeatForever(a)))})))},y=this,m=0;m<h;m++)g(m)},e.DelayGap=.1,e.MoveDur=.5,e.RamdomDis=150,e.IconScaleDur=.1,e.ScaleDur=1*e.MoveDur/5,e.rangeRadius=540,e.rangeAngle=140,e.sepAngle=10,e.diamondWidth=150,e.dismondHeight=210,e}();o.default=n,cc._RF.pop()},{"../core/util/MathUtil":"MathUtil","../global/AudioMgr":"AudioMgr"}],App:[function(e,t,o){"use strict";cc._RF.push(t,"2600euno/JEyb+FJ8038cTT","App"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./sdk/LogEvent"),a=e("./global/DataManager"),n=e("./Game"),r=e("./sdk/SDKConst"),s=e("./global/GameConfig"),l=e("./view/UICenter"),c=e("./core/global/I18N"),p=e("./global/AudioMgr"),u=e("./core/global/Emitter"),d=e("./global/Const"),h=e("./core/util/DateUtils"),f=e("./sdk/MibData"),g=cc._decorator,y=g.ccclass,m=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showBanner=!1,t.gameLoaded=!1,t.cacheAdOpend=!1,t}var o;return __extends(t,e),o=t,Object.defineProperty(t,"isPause",{get:function(){return this.mIsPause},set:function(e){this.mIsPause=e||n.Game.uiMgr.activeCount>0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"delta",{get:function(){return this.mDelta},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.instance=this,cc.game.addPersistRootNode(this.node),cc.macro.ENABLE_MULTI_TOUCH=!1,cc.debug.setDisplayStats(!1)},t.prototype.onGameLoaded=function(){var e=this;cc.game.on(cc.game.EVENT_HIDE,this.onApplicationPause,this),cc.game.on(cc.game.EVENT_SHOW,this.onApplicationResume,this),u.Emitter.register(d.default.eOnShowUI,this.onShowUI,this),u.Emitter.register(d.default.eOnHideUI,this.onHideUI,this),cc.sys.isNative||cc.sys.isBrowser&&(window.onerror=function(e,t,o,a,n){i.default.error(e,t,o,a,n)}),this.gameLoaded=!0,setTimeout(function(){p.AudioMgr.playBgSound("bgm1"),cc.find("Canvas/LoadingWindow").destroy(),e.todayIsSign()&&l.UICenter.openDayGiftWindow(),n.Game.sdkPipeline.suppleMent(),e.checkResetBonusData(),a.default.loadDataResLazy(),e.startShowBanner()},500),s.default.SDK.initAD(),n.Game.sdkPipeline.onGameStart()},t.prototype.update=function(e){o.mDelta=e,this.gameLoaded&&n.Game.update(e,o.isPause)},t.prototype.onApplicationPause=function(){this.runInBackgroundDate=Date.now(),n.Game.userData.saveData(),this.addPushMessage(),this.cacheAdOpend=n.Game.sdkPipeline.adOpening},t.prototype.onApplicationResume=function(){console.log("[App],onApplicationResume open interstitial");var e=n.Game.userData;this.cacheAdOpend||n.Game.sdkPipeline.showInterstitial(r.default.AD_PLAY_POS_RUN_BACK,e.lvRwd.This),this.cacheAdOpend=!1},t.prototype.startShowBanner=function(){s.default.SDK.hasBannerAD()&&(this.showBanner=!0,n.Game.sdkPipeline.showBanner(this.showBanner))},t.prototype.hideBanner=function(){this.showBanner=!1,n.Game.sdkPipeline.showBanner(this.showBanner)},t.prototype.onShowUI=function(){o.isPause=!0},t.prototype.onHideUI=function(){o.isPause=!1},t.prototype.addPushMessage=function(){s.default.SDK.addPushMessage(c.default.get("L4001"),c.default.get("L4005"),1,7200,0),s.default.SDK.addPushMessage(c.default.get("L4002"),c.default.get("L4006"),2,10800,0),s.default.SDK.addPushMessage(c.default.get("L4003"),c.default.get("L4007"),3,79200,0),s.default.SDK.addPushMessage(c.default.get("L4004"),c.default.get("L4008"),4,172800,0),s.default.SDK.addPushMessage(c.default.get("L4003"),c.default.get("L4009"),5,432e3,0),s.default.SDK.addPushMessage(c.default.get("L4001"),c.default.get("L4010"),6,597600,0),s.default.SDK.addPushMessage(c.default.get("L4011"),c.default.get("L4012"),7,14,4)},t.prototype.todayIsSign=function(){var e=n.Game.userData.signInData,t=h.default.getSameDayZeroTimeStamp()-e.Timestamp;cc.log("\u76f8\u5dee\u5929\u6578\uff1a"+t);var o=n.Game.userData.signInData;return o&&!o.Isloadered?(o.Isloadered=!0,n.Game.userData.signInData=o,!1):0==e.Timestamp||t>0},t.prototype.keepOnFile=function(){var e=new f.LevelArchiving;e.missionId=n.Game.userData.dotData.currentLevel.toString();var t=new f.CoinArchiving;t.number=n.Game.userData.goldData.gold.toString();var o=new f.StatArchiving;null!=n.Game.userData.saveData&&null!=n.Game.userData.starData.alltotal?o.number=n.Game.userData.starData.alltotal.toString():o.number="0",i.default.log(i.default.dot_keep_goin,t),i.default.log(i.default.dot_keep_missid,e),i.default.log(i.default.dot_keep_start,o)},t.prototype.checkResetBonusData=function(){var e=n.Game.userData.bonusData;if(e.SpinTimes){var t=h.default.getTimestampFromString(s.default.CommonResetClock);e.Timestamp<t&&(e.SpinTimes=0,e.Timestamp=0,n.Game.userData.bonusData)}},t.mIsPause=!1,t.mDelta=.03,o=__decorate([y],t)}(cc.Component));o.default=m,cc._RF.pop()},{"./Game":"Game","./core/global/Emitter":"Emitter","./core/global/I18N":"I18N","./core/util/DateUtils":"DateUtils","./global/AudioMgr":"AudioMgr","./global/Const":"Const","./global/DataManager":"DataManager","./global/GameConfig":"GameConfig","./sdk/LogEvent":"LogEvent","./sdk/MibData":"MibData","./sdk/SDKConst":"SDKConst","./view/UICenter":"UICenter"}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"eb5e8/d0B5LOLPomUOSeI/3","AudioMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioMgr=o.SoundManager=void 0;var i=e("./DataManager"),a=e("../core/util/StrUtil"),n=e("../core/util/ResUtil"),r=e("../core/util/MathUtil"),s=e("../Game"),l=function(){function e(){this.effectSoundChannel=-1,this.musicChannel=-1,this._musicLock=!0,this._effectLock=!0}return Object.defineProperty(e.prototype,"curEffectId",{get:function(){return this.effectSoundChannel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"musicLock",{get:function(){return this._musicLock},set:function(e){this._musicLock=e,this._musicLock?this.musicChannel>=0?cc.audioEngine.resume(this.musicChannel):this.playBgSound():this.musicChannel>=0&&cc.audioEngine.pause(this.musicChannel),s.Game.userData.updateData("k",[this._musicLock,this._effectLock]),s.Game.userData.saveData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"effectLock",{get:function(){return this._effectLock},set:function(e){this._effectLock=e,this._effectLock||(this.effectSoundChannel>=0&&cc.audioEngine.stop(this.effectSoundChannel),this.effectSoundChannel=-1),s.Game.userData.updateData("k",[this._musicLock,this._effectLock]),s.Game.userData.saveData()},enumerable:!1,configurable:!0}),e.prototype.init=function(e,t){this._musicLock=e,this._effectLock=t},e.prototype.onPause=function(){cc.audioEngine.pauseAll()},e.prototype.onResume=function(){cc.audioEngine.resumeAll()},e.prototype.pauseBgm=function(){this.musicChannel>=0&&cc.audioEngine.pause(this.musicChannel)},e.prototype.resumeBgm=function(){this.musicChannel>=0&&cc.audioEngine.resume(this.musicChannel)},e.prototype.playBgSound=function(e){var t=this,o=e;o||(o="bgm"+r.default.randomRange(1,3)),this.playSound(o,!1),cc.audioEngine.setFinishCallback(this.musicChannel,function(){t.musicChannel=-1,t.playBgSound(e)})},e.prototype.clear=function(){this.effectSoundChannel>=0&&cc.audioEngine.stop(this.effectSoundChannel),this.effectSoundChannel=-1,this.musicChannel>=0&&cc.audioEngine.stop(this.musicChannel),this.musicChannel=-1},e.prototype.playSound=function(e,t){if(void 0===t&&(t=!0),this.musicLock){this.musicChannel>=0&&cc.audioEngine.stop(this.musicChannel);var o=i.default.getSoundRes(e);o&&(this.musicChannel=cc.audioEngine.playMusic(o,t))}},e.prototype.playEffect=function(e,t,o,a){if(void 0===t&&(t=!0),void 0===o&&(o=!1),void 0===a&&(a=0),this.effectLock){var n=i.default.getSoundRes(e);n&&(this.effectSoundChannel=cc.audioEngine.playEffect(n,o),a>0&&cc.audioEngine.setCurrentTime(this.effectSoundChannel,a))}},e.prototype.playSFX=function(e,t,o){void 0===t&&(t=!0),!a.default.isNullOrEmpty(e)&&this.effectLock&&(t&&(e=n.ResUtil.MakeResUrl(e,n.eResType.Audio)),cc.resources.load(e,cc.AudioClip,function(e,t){if(!e){var i=cc.audioEngine.play(t,!1,1);o&&o(i)}}))},e.instance=new e,e}();o.SoundManager=l,o.AudioMgr=l.instance,cc._RF.pop()},{"../Game":"Game","../core/util/MathUtil":"MathUtil","../core/util/ResUtil":"ResUtil","../core/util/StrUtil":"StrUtil","./DataManager":"DataManager"}],BeginnerGiftWindow:[function(e,t,o){"use strict";cc._RF.push(t,"a0ef3GRkTlNB6n33fykpQSg","BeginnerGiftWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/I18N"),a=e("../../core/Table/Table"),n=e("../../core/Table/TableHelper"),r=e("../../core/UI/WWindow"),s=e("../../data/ShopHelper"),l=e("../../Game"),c=e("../../game/type/Enum"),p=e("./shop/ShopComp"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelUndo=null,t.labelAuto=null,t.labelRefresh=null,t.labelCoins=null,t.labelCost=null,t.labelDesc=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),this.shopFiled=n.TableHelper.GetField(a.eTable.eTabShop,s.default.BeginnerGiftId),this.initByField(this.shopFiled)},t.prototype.initLanguage=function(){this.labelDesc.string=i.default.get("L40061")},t.prototype.onBuyClick=function(){var e=this;l.Game.sdkPipeline.purchaseByShopId(s.default.BeginnerGiftId,4,function(t){s.default.getInstance().shopDataChange(e.shopFiled,t,4),e.hide()})},t.prototype.initByField=function(e){this.refreshPropLabels(e.type1,e.num1),this.refreshPropLabels(e.type2,e.num2),this.refreshPropLabels(e.type3,e.num3),this.refreshPropLabels(e.type4,e.num4),this.labelCost.string="$"+e.payid},t.prototype.getFildValueByType=function(e,t){return p.default.getFildValueByType(e,t)},t.prototype.refreshPropLabels=function(e,t){switch(e){case c.PropType.PropGold:this.labelCoins.string="x"+t;break;case c.PropType.PropUndo:this.labelUndo.string=""+t;break;case c.PropType.PropAuto:this.labelAuto.string=""+t;break;case c.PropType.PropRefresh:this.labelRefresh.string=""+t;break;default:console.log("[BeginnerGiftWindow], type error",e)}},__decorate([h(cc.Label)],t.prototype,"labelUndo",void 0),__decorate([h(cc.Label)],t.prototype,"labelAuto",void 0),__decorate([h(cc.Label)],t.prototype,"labelRefresh",void 0),__decorate([h(cc.Label)],t.prototype,"labelCoins",void 0),__decorate([h(cc.Label)],t.prototype,"labelCost",void 0),__decorate([h(cc.RichText)],t.prototype,"labelDesc",void 0),__decorate([d],t)}(r.default);o.default=f,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../data/ShopHelper":"ShopHelper","../../game/type/Enum":"Enum","./shop/ShopComp":"ShopComp"}],BonusItemContent:[function(e,t,o){"use strict";cc._RF.push(t,"befb59KyP5J1oc6DKs1UoT1","BonusItemContent"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../game/type/Enum"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeGold=null,t.nodeProps=null,t.labelNumber=null,t}return __extends(t,e),t.prototype.setContent=function(e,t){this.nodeGold.active=e==i.PropType.PropGold,this.nodeProps.active=e!=i.PropType.PropGold,this.labelNumber.string=""+t},__decorate([r(cc.Node)],t.prototype,"nodeGold",void 0),__decorate([r(cc.Node)],t.prototype,"nodeProps",void 0),__decorate([r(cc.Label)],t.prototype,"labelNumber",void 0),__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../game/type/Enum":"Enum"}],BonusWindow:[function(e,t,o){"use strict";cc._RF.push(t,"c95bexeoS1Dn4cvpic0mVBl","BonusWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/UI/WWindow"),a=e("../../Game"),n=e("../../core/UI/Toast"),r=e("../../core/global/Emitter"),s=e("../../core/global/I18N"),l=e("../../sdk/SDKConst"),c=e("../../global/AudioMgr"),p=e("../../global/Const"),u=e("../UICenter"),d=e("../../game/BoxOpenSystem"),h=e("../../game/type/Enum"),f=e("../../core/Table/TableHelper"),g=e("../../core/Table/Table"),y=e("../../core/util/MathUtil"),m=e("../../global/GameConfig"),v=e("../../core/util/StrUtil"),_=e("./StrengthWindow"),b=e("../../sdk/MibData"),T=e("../../sdk/LogEvent"),C=cc._decorator,S=C.ccclass,I=C.property,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bonusNode=null,t.btnBack=null,t.btnSpin=null,t.labelFreeTimes=null,t.labelbtnSpin=null,t.labelCoins=null,t.state=!1,t.onClose=null,t.mAniPlaying=!1,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.initLanguage(),r.Emitter.register(p.default.eLanguageChange,this.initLanguage,this),r.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(t,o){e.prototype.show.call(this,t),T.default.dotAdPv(l.default.AD_PLAY_POS_BONUS),this.onClose=o,this.setBonusState(!0),this.setFreeTimesLabel(),this.setBtnsState(!0),this.btnSpin.interactable=m.default.SDK.rewardAvailability(),u.UICenter.openStrengthWindow(!1,!1,!1)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onHide=function(){u.UICenter.closeStrengthWindow(),this.onClose&&(this.onClose(),this.onClose=null),e.prototype.onHide.call(this)},t.prototype.initLanguage=function(){this.labelbtnSpin.string=s.default.get("L40072")},t.prototype.setBonusState=function(e){this.state=!e,e&&(this.bonusNode.angle=0)},t.prototype.setFreeTimesLabel=function(){var e=a.Game.userData.bonusData,t=m.default.BonusFreeTime-e.SpinTimes;this.labelFreeTimes.string=v.default.stringFormat(s.default.get("L40071"),t)},t.prototype.setBtnsState=function(e){this.btnBack.interactable=e;var t=a.Game.userData.bonusData;if(m.default.BonusFreeTime-t.SpinTimes<=0)this.btnSpin.interactable=!1;else{var o=m.default.SDK.rewardAvailability();this.btnSpin.interactable=e&&o}},t.prototype.run=function(e){var t=360-45*e;cc.tween(this.bonusNode).to(8,{angle:-2160-t},{easing:"quintOut"}).start(),cc.tween(this.bonusNode).delay(7).call(this.onRunFinished.bind(this,e)).start(),c.AudioMgr.playEffect("bonus_spin")},t.prototype.onRunFinished=function(e){var t=this;this.setBonusState(!1);var o=f.TableHelper.GetFieldByIndex(g.eTable.eTabRotaryTable,e);if(o){var i=a.Game.userData.bonusData,n=[];n.push(new d.Prop(o.type,o.number)),i.SpinTimes+=1,i.Timestamp=Math.floor(Date.now()/1e3),a.Game.userData.bonusData=i,this.setFreeTimesLabel(),u.UICenter.openGainItemWindow(n,this.onGainItem.bind(this,n),!1,h.ItemFromType.FromBonus),setTimeout(function(){t.setBtnsState(!0),t.mAniPlaying=!1},300),i.SpinTimes==m.default.BonusFreeTime&&r.Emitter.fire(p.default.eOnBonusTipChange,!1)}else this.setBtnsState(!0)},t.prototype.onRunClick=function(){var e=this,t=a.Game.userData.bonusData;if(!this.state){if(t.SpinTimes>=m.default.BonusFreeTime)return void n.default.showWith(s.default.get("L10008"));a.Game.sdkPipeline.showReward(function(t){if(t){e.setBtnsState(!1),e.mAniPlaying=!0;var o=e.getRandomIndex();e.run(o)}},this,l.default.AD_PLAY_POS_BONUS)}},t.prototype.onGainItem=function(e){var t=this,o=a.Game.userData.lvRwd.This;this.mAniPlaying=!0,this.setBtnsState(!1);for(var i=function(e){if(e.propType==h.PropType.PropGold){var i=e.propNum<10?1:Math.floor(e.propNum/10);_.default.animateGold(n.node,e.propNum,i,function(){t.setFreeTimesLabel(),t.setBonusState(!0),t.setBtnsState(!0),t.mAniPlaying=!1,cc.log("\u8f49\u76e4\u589e\u52a0\u91d1\u5e63\uff01"),T.default.dotVirtualGain(o,e.propNum,2,a.Game.userData.goldData.gold,1)})}else{new b.PropEvent;var r=a.Game.userData.goldData;e.propType==h.PropType.PropUndo?(r.propUndo+=e.propNum,T.default.dotPropLog(h.PropType.PropUndo,e.propNum,r.propUndo,o,2)):e.propType==h.PropType.PropAuto?(r.propAuto+=e.propNum,T.default.dotPropLog(h.PropType.PropAuto,e.propNum,r.propAuto,o,2)):e.propType==h.PropType.PropRefresh&&(r.propRefresh+=e.propNum,T.default.dotPropLog(h.PropType.PropRefresh,e.propNum,r.propRefresh,o,2)),a.Game.userData.goldData=r,n.setFreeTimesLabel(),n.setBonusState(!0),n.setBtnsState(!0),n.mAniPlaying=!1}},n=this,r=0,s=e;r<s.length;r++)i(s[r])},t.prototype.getRandomIndex=function(){for(var e=0,t=f.TableHelper.GetCount(g.eTable.eTabRotaryTable),o=[],i=0;i<t;i++){var a=f.TableHelper.GetFieldByIndex(g.eTable.eTabRotaryTable,i);o.push(a.weight)}for(var n=0,r=0;r<o.length;r++)n+=o[r];for(var s=y.default.randomRange(1,n+1),l=0;l<o.length;l++)if((s-=o[l])<=0){e=l;break}return e},t.prototype.refreshAdBtn=function(e){this.mAniPlaying||(this.btnSpin.interactable=e)},__decorate([I(cc.Node)],t.prototype,"bonusNode",void 0),__decorate([I(cc.Button)],t.prototype,"btnBack",void 0),__decorate([I(cc.Button)],t.prototype,"btnSpin",void 0),__decorate([I(cc.Label)],t.prototype,"labelFreeTimes",void 0),__decorate([I(cc.Label)],t.prototype,"labelbtnSpin",void 0),__decorate([I(cc.Label)],t.prototype,"labelCoins",void 0),__decorate([S],t)}(i.default);o.default=D,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/Toast":"Toast","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/MathUtil":"MathUtil","../../core/util/StrUtil":"StrUtil","../../game/BoxOpenSystem":"BoxOpenSystem","../../game/type/Enum":"Enum","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/MibData":"MibData","../../sdk/SDKConst":"SDKConst","../UICenter":"UICenter","./StrengthWindow":"StrengthWindow"}],BottomManager:[function(e,t,o){"use strict";cc._RF.push(t,"54fceWRrDRGOK+NSBCMFqIn","BottomManager"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../util/GameUtil"),a=e("../../global/GameConfig"),n=function(){function e(){this.gameUtil=null,this._posMap=null,this._posRecord=null,this._specificRecord=[],this._posOriginalRecord=null,this._index=null,this._delRecord=null,this.width=null,this.height=null,this.beginX=null,this.beginY=null}return e.getInstance=function(){return e.instance},e.prototype.eliminate=function(){this._delRecord=[];for(var e=0;e<this._index&&!(e+3>this._index);e++){var t=this._posRecord[e],o=this._posRecord[e+1],i=this._posRecord[e+2];null!=t&&null!=o&&null!=i&&t[0].z==o[0].z&&t[0].z==i[0].z&&(this._delRecord.push(t),this._delRecord.push(o),this._delRecord.push(i),e+=2)}this.generateSpecificRecord()},Object.defineProperty(e.prototype,"specificRecord",{get:function(){return this._specificRecord},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posOriginalRecord",{get:function(){return this._posOriginalRecord},enumerable:!1,configurable:!0}),e.prototype.generateSpecificRecord=function(){this._specificRecord=[];for(var e=0;e<this._posRecord.length;e++){for(var t=0,o=this._posRecord[e],i=0;i<this._delRecord.length;i++){var a=this._delRecord[i];if(o[1].x==a[1].x&&o[1].y==a[1].y&&o[1].z==a[1].z){t=1;break}}0==t&&this._specificRecord.push(o)}for(e=0;e<this._index&&!(e+3>this._index);e++){var n=this._posRecord[e],r=this._posRecord[e+1],s=this._posRecord[e+2];if(null!=n&&null!=r&&null!=s&&n[0].z==r[0].z&&n[0].z==s[0].z){for(var l=0;l<this._posOriginalRecord.length;l++)if(null!=this._posOriginalRecord[l]){if(null!=n&&this._posOriginalRecord[l][1].x==n[1].x&&this._posOriginalRecord[l][1].y==n[1].y&&this._posOriginalRecord[l][1].z==n[1].z){this._posOriginalRecord[l]=null;continue}if(null!=r&&this._posOriginalRecord[l][1].x==r[1].x&&this._posOriginalRecord[l][1].y==r[1].y&&this._posOriginalRecord[l][1].z==r[1].z){this._posOriginalRecord[l]=null;continue}if(null!=s&&this._posOriginalRecord[l][1].x==s[1].x&&this._posOriginalRecord[l][1].y==s[1].y&&this._posOriginalRecord[l][1].z==s[1].z){this._posOriginalRecord[l]=null;continue}}e+=2}}var c=[];for(e=0;e<this._posOriginalRecord.length;e++)null!=this._posOriginalRecord[e]&&c.push(this._posOriginalRecord[e]);this._posOriginalRecord=c},e.prototype.getMaxTypeNo=function(){var e=[];if(0==this._specificRecord.length)return e.push(0),e.push(0),e;e.push(this._specificRecord[0][0].z),e.push(2);for(var t=0;t<this._index;t++){var o=this._specificRecord[t],i=this._specificRecord[t+1];if(null!=o&&null!=i&&o[0].z==i[0].z){(e=[]).push(o[0].z),e.push(1);break}}return e},e.prototype.againGenerateRecord=function(){for(var e=0;e<this._index&&!(e+3>this._index);e++){var t=this._posRecord[e],o=this._posRecord[e+1],i=this._posRecord[e+2];null!=t&&null!=o&&null!=i&&t[0].z==o[0].z&&t[0].z==i[0].z&&(this._posRecord[e]=null,this._posRecord[e+1]=null,this._posRecord[e+2]=null,e+=2)}var a=[];for(e=0;e<this._index;e++)null!=this._posRecord[e]&&a.push(this._posRecord[e]);this._posRecord=a,this._index=this._posRecord.length},e.prototype.isAdjacent=function(){return!0},e.prototype.init=function(){this.gameUtil=i.default.getInstance(),this.generatePosMap(),this._index=0,this._posRecord=[],this._delRecord=[],this._posOriginalRecord=[],this._specificRecord=[]},e.prototype.generatePosMap=function(){this._posMap=[],this.width=2*a.default.padding+a.default.size*a.default.bottomSquareNo+a.default.spacing*(a.default.bottomSquareNo-1),this.height=2*a.default.padding+a.default.size,this.beginX=-this.width/2+a.default.padding+a.default.size/2,this.beginY=this.height/2;for(var e=0;e<a.default.bottomSquareNo;e++){var t=this.beginX+e*(a.default.size+a.default.spacing),o=this.beginY;this._posMap.push(cc.v2(t,o))}},e.prototype.getPos=function(){var e=this._index;return this._index=this._index+1,this._posMap[e]},e.prototype.getnewPos=function(e){return this._posMap[e]},e.prototype.getIndex=function(){return this._index},e.prototype.getPosRecord=function(){return this._posRecord},e.prototype.getDelRecord=function(){return this._delRecord},e.prototype.setDelRecord=function(){return this._delRecord=[],!0},e.prototype.generateRecord=function(e,t){var o=[];o.push(t),o.push(e),this._posOriginalRecord.push(o),this.gameUtil.deleteRecord(t.z);for(var i=0,a=0,n=0;n<this._index-1;n++)if(null!=(s=this._posRecord[n]))if(s[0].z==t.z)a=1;else if(1==a){i=1;for(var r=this._index-1;r>n;r--)this._posRecord[r]=this._posRecord[r-1];this._posRecord[n]=o;break}for(0==i&&this._posRecord.push(o),n=0;n<this._index;n++)var s=this._posRecord[n];return this.eliminate(),!0},e.prototype.undoOperation=function(){var e=this._posOriginalRecord.length;if(e>0){var t=this._posOriginalRecord[e-1][0].z,o=this._posRecord.length;if(o>0)for(var i=0;i<o;i++)this._posOriginalRecord[e-1][1].x==this._posRecord[i][1].x&&this._posOriginalRecord[e-1][1].y==this._posRecord[i][1].y&&this._posOriginalRecord[e-1][1].z==this._posRecord[i][1].z&&(this._posRecord[i]=null);var a=this._posOriginalRecord[e-1][1];this._posOriginalRecord[e-1]=null;for(var n=[],r=0;r<this._posOriginalRecord.length;r++)null!=this._posOriginalRecord[r]&&n.push(this._posOriginalRecord[r]);this._posOriginalRecord=n;for(var s=[],l=0;l<this._index;l++)null!=this._posRecord[l]&&s.push(this._posRecord[l]);return this._posRecord=s,this._index=this._posRecord.length,this.gameUtil.addRemainRcord(t),this.eliminate(),a}return null},e.instance=new e,e}();o.default=n,cc._RF.pop()},{"../../global/GameConfig":"GameConfig","../util/GameUtil":"GameUtil"}],BoxOpenSystem:[function(e,t,o){"use strict";cc._RF.push(t,"5b8b8WiCwRL/IBh5a7kMz9F","BoxOpenSystem"),Object.defineProperty(o,"__esModule",{value:!0}),o.Prop=void 0;var i=e("../core/Table/Table"),a=e("../core/Table/TableHelper"),n=e("../core/util/MathUtil"),r=e("./type/Enum"),s=function(e,t){this.propType=0,this.propNum=0,this.propType=e,this.propNum=t};o.Prop=s;var l=function(){function e(){}return e.getPropRandomOneTime=function(){var e=this.getRandomIndex(),t=a.TableHelper.GetFieldByIndex(i.eTable.eTabBox,e);return new s(t.type,t.num)},e.getPropList=function(e){for(var t=[],o=0;o<e;o++){var i=this.getPropRandomOneTime();i&&t.push(i)}return t},e.getRandomProp=function(){r.PropType.PropUndo;var e=[r.PropType.PropUndo,r.PropType.PropAuto,r.PropType.PropRefresh],t=n.default.randomRange(0,e.length);return new s(e[t],1)},e.getRandomIndex=function(){for(var e=0,t=a.TableHelper.GetCount(i.eTable.eTabBox),o=[],r=0;r<t;r++){var s=a.TableHelper.GetFieldByIndex(i.eTable.eTabBox,r);o.push(s.weight)}for(var l=0,c=0;c<o.length;c++)l+=o[c];for(var p=n.default.randomRange(1,l+1),u=0;u<o.length;u++)if((p-=o[u])<=0){e=u;break}return e},e}();o.default=l,cc._RF.pop()},{"../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/util/MathUtil":"MathUtil","./type/Enum":"Enum"}],ColorUtil:[function(e,t,o){"use strict";cc._RF.push(t,"d9bc5w+47BCqIh6JrB794KB","ColorUtil"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=(i.property,function(){function e(){}var t;return t=e,e.getColorInfo=function(e,o){void 0===o&&(o=t.RGB_TYPE);var i=[];return o==t.RGB_TYPE?(i[0]=e>>16,i[1]=e>>8&255,i[2]=255&e):o==t.ARGB_TYPE&&(i[3]=e>>>24,i[0]=e>>>16&255,i[1]=e>>>8&255,i[2]=255&e),i},e.buildColor=function(e,o,i,a,n){return void 0===a&&(a=0),void 0===n&&(n=t.RGB_TYPE),n==t.RGB_TYPE?e<<16|o<<8|i:a<<24|e<<16|o<<8|i},e.toHtml16String=function(e){return"#"+e.toString(16).toUpperCase()},e.ReversalColor=function(e){return(255&e)<<16|(e>>8&255)<<8|e>>16},e.setGrayFlilter=function(e){return t.ColorMatrixFilter(e,[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])},e.brightness=function(e,o){void 0===o&&(o=0);var i=[1,0,0,0,o,0,1,0,0,o,0,0,1,0,o,0,0,0,1,0];return t.ColorMatrixFilter(e,i)},e.contrast=function(e,o){void 0===o&&(o=0);var i=[o,0,0,0,128*(1-o),0,o,0,0,128*(1-o),0,0,o,0,128*(1-o),0,0,0,1,0];return t.ColorMatrixFilter(e,i)},e.ColorMatrixFilter=function(e,t){var o=e.getR(),i=e.getG(),a=e.getB(),n=e.getA(),r=t[0]*o+t[1]*i+t[2]*a+t[3]*n+t[4],s=t[5]*o+t[6]*i+t[7]*a+t[8]*n+t[9],l=t[10]*o+t[11]*i+t[12]*a+t[13]*n+t[14],c=t[15]*o+t[16]*i+t[17]*a+t[18]*n+t[19];return new cc.Color(r,s,l,c)},e.RGB_TYPE=24,e.ARGB_TYPE=32,t=__decorate([a],e)}());o.default=n,cc._RF.pop()},{}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"4277cjuWEpI4boyL+8eif4x","Const"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.posBase=new cc.Vec2,e.eOnGoldClick="onGoldClick",e.ePreOrientationChanged="preOrientationChanged",e.eOrientationChanged="orientationChanged",e.eAfterOrientationChanged="afterOrientationChanged",e.eOnStartGame="onStartGame",e.eOnGameReady="onGameReady",e.eOnGameEnd="onGameEnd",e.eLanguageChange="languageChange",e.eChangeGameBG="changeGameBG",e.eOnShowUI="onShowUI",e.eOnHideUI="onHideUI",e.eOnShowRL="onShowRL",e.kGuide="guide",e.kGoldData="goldData",e.eGoldDataChanged="goldDataChanged",e.ePigDataChanged="pigDataChanged",e.kShopWatchTimes="shopWatchTimes",e.kShopLastTimestamp="shopLastTimestamp",e.eShopGoldChanged="shopGoldChanged",e.eShopRemainderTimes="shopRemainderTimes",e.eRefreshShopUI="refreshShopUI",e.kCollectStars="collectStars",e.eCollectStarsChanged="collectStarsChanged",e.kStarData="starData",e.eStarDataChanged="starDataChanged",e.kFailInfo="failInfo",e.kPigData="pigData",e.kPlusChequer="plusChequer",e.kSignInData="signInData",e.kBonusData="bonusData",e.kLvRwd="lvRwd",e.kShopData="shopData",e.kDotData="dotData",e.kTrophyYear="trophyYear",e.kTrophy="trophy",e.kLastMonth="lastMonth",e.kCurrentMonth="currentMonth",e.eUpdateDaliyInfo="updateDaliyInfo",e.kRaceData="raceData",e.kcurentDay="currentDay",e.kraceRecord="raceRecord",e.eOnBeginnerPurchased="onBeginnerPurchased",e.eOnChangePigData="eOnChangePigData",e.eHideRemoveAd="hideRemoveAd",e.eOnBonusTipChange="onBonusTipChange",e.eOnDailyTipChange="onDailyTipChange",e}();o.default=i,cc._RF.pop()},{}],DailyHelpWindow:[function(e,t,o){"use strict";cc._RF.push(t,"80e7e7PuM5C06H5A/wXQIRP","DailyHelpWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/I18N"),a=e("../../core/UI/WWindow"),n=cc._decorator,r=n.ccclass,s=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lab_title=null,t.lab_playinfo=null,t.lab_rewardinfo=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage()},t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.initLanguage=function(){this.lab_title.string=i.default.get("L50006"),this.lab_playinfo.string=i.default.get("L50007"),this.lab_rewardinfo.string=i.default.get("L50008")},__decorate([s(cc.Label)],t.prototype,"lab_title",void 0),__decorate([s(cc.Label)],t.prototype,"lab_playinfo",void 0),__decorate([s(cc.Label)],t.prototype,"lab_rewardinfo",void 0),__decorate([r],t)}(a.default);o.default=l,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N"}],DaliyHelper:[function(e,t,o){"use strict";cc._RF.push(t,"ee0b4renn9HFJ5O1UcLVZ3/","DaliyHelper"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Game"),a=e("../../global/Const"),n=e("../../global/GameConfig"),r=e("../global/I18N"),s=e("../Table/Table"),l=e("../Table/TableHelper"),c=e("../util/DateUtils"),p=function(){function e(){}return e.dateIsValid=function(e){var t=c.default.splitDate(e),o=t.year,i=t.month,a=(t.day,new Date);return a.getMonth()>0?o==a.getFullYear()&&(i==a.getMonth()||i==a.getMonth()+1):o==a.getFullYear()&&i==a.getMonth()+1||o==a.getFullYear()-1&&11==i},e.getDayCount=function(e,t){var o=this.DayCount[t];return 0==o&&(o=e%4==0&&e%100!=0||e%400==0?29:28),o},e.getTrophy=function(e,t){var o=this.getTrophyData(t),i=this.getDayCount(e,t);return(!o||o<0)&&(o=0),this.getTrophyIndex(o,i)},e.getTrophyIndex=function(e,t){return e==t?3:e>=20?2:Math.floor(e/10)},e.getNextTrophy=function(e){return e>=3?3:e+1},e.getNextTrophyCount=function(e,t,o){return 3==e?0:3==(e+=1)?o-t:10*e-t},e.getDaliyData=function(e,t){var o=i.Game.userData.raceData;return null==o[e]&&(o[e]=[]),null==o[e][t]&&(o[e][t]=[],i.Game.userData.raceData=o),i.Game.userData.raceData[e][t]},e.getDaliyDayData=function(e,t,o){var a=i.Game.userData.raceData;return null==a[e]&&(a[e]=[]),null==a[e][t]&&(a[e][t]=[]),null==a[e][t][o]&&(a[e][t][o]=[0,0,0],i.Game.userData.raceData=a),i.Game.userData.raceData[e][t][o]},e.getTrophyData=function(e){return i.Game.userData.FBData[a.default.kTrophy][e]},e.getTrophyDataNew=function(e){var t=e.getFullYear(),o=e.getMonth(),a=(e.getDate(),i.Game.userData.raceData);null==a[t]&&(a[t]=[]),null==a[t][o]&&(a[t][o]=[]);for(var n=0,r=a[t][o],s=0;s<32;s++)r&&r[s]&&r[s][1]&&Number(r[s][1])>0&&(n+=1);return n},e.getDaliyDayLevelNo=function(e){var t=((e-new Date(2021,0,1))/864e5).toFixed(0),o=Number(t);cc.log("\u539f\u59cb\u503c\uff1a"+o);var i=o/n.default.MaxRaceNumber;o-=parseInt(i.toString())*n.default.MaxRaceNumber,cc.log("\u8ddd\u79bb\u65e5\u671f\uff1a"+o);var a=l.TableHelper.GetFieldByIndex(s.eTable.eTabRaceMap,o),r=1;if(a){var c=l.TableHelper.GetFieldByIndex(s.eTable.eTabMap,a.mapid);r=l.TableHelper.GetFieldByIndex(s.eTable.eTabLevelInfo,c.infoId-1).GetID()}return r},e.getChangeDate=function(){var e=i.Game.userData.currtyDay;return r.default.isLocal("zh_CN")?(e.getMonth()+1).toString()+r.default.get("L50014")+e.getDate()+r.default.get("L50015"):r.default.get("L"+(e.getMonth()+309))+" "+e.getDate()},e.DayCount=[31,0,31,30,31,30,31,31,30,31,30,31],e}();o.default=p,window.DaliyHelper=p,cc._RF.pop()},{"../../Game":"Game","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../Table/Table":"Table","../Table/TableHelper":"TableHelper","../global/I18N":"I18N","../util/DateUtils":"DateUtils"}],DaliyWindow:[function(e,t,o){"use strict";cc._RF.push(t,"38d86pyzKRApYS81B0qKgu9","DaliyWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/I18N"),a=e("../../core/global/Emitter"),n=e("../../core/util/DateUtils"),r=e("../../Game"),s=e("../../core/UI/WWindow"),l=e("./DayItem"),c=e("./DaliyHelper"),p=e("../../view/UICenter"),u=e("../../sdk/SDKConst"),d=e("../../game/BoxOpenSystem"),h=e("../../game/type/Enum"),f=e("../Table/Table"),g=e("../Table/TableHelper"),y=e("../util/MathUtil"),m=e("../../global/GameConfig"),v=cc._decorator,_=v.ccclass,b=v.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TrophyRes=[],t.TrophyPro=null,t.TrophyProSize=0,t.TrophyDot=[],t.maxNumLabel=null,t.monthLabel=null,t.monthPageBtn=[],t.weekLabel=[],t.dayItemPre=null,t.dayContiner=null,t.daySelectIcon=null,t.btnForbid=null,t.btnPreForbid=null,t.btnStartLabel=null,t.btnRestartLabel=null,t.btnAdStartLabel=null,t.btnMask=[],t.helperBtn=null,t.proBar=null,t.giftBtn=[],t.labelProgressDays=[],t.btnAd=null,t.mIsStarGame=!1,t.dayItems=[[],[],[],[],[],[]],t.currentDate=new Date,t.isNowMonth=!0,t.fanye=0,t.jlDy=null,t.isInit=!0,t}return __extends(t,e),t.prototype.onLoad=function(){for(var e,t=0;t<6;t++)for(var o=0;o<7;o++)e=cc.instantiate(this.dayItemPre),this.dayContiner.addChild(e),this.dayItems[t][o]=e.getComponent(l.default).setPos(t,o);this.monthPageBtn[0].node.active=!0,this.monthPageBtn[1].node.active=!1,this.initLanguage(),this.initUI(1),this.dayContiner.on("itemClick",this.itemClickHandler,this),a.Emitter.register("languageChange",this.initLanguage,this),this.itemClickHandler(this._selectItem,!0),a.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.update=function(){this.isInit&&(this.daySelectIcon.position=this._selectItem.node.position)},t.prototype.initLanguage=function(){for(var e=0;e<7;e++)this.weekLabel[e].string=i.default.get("L32"+(e+1));this.btnAdStartLabel.string=i.default.get("L524"),this.btnStartLabel.string=i.default.get("L524"),this.btnRestartLabel.string=i.default.get("L381"),this.monthLabel.string=i.default.get("L"+(this.currentDate.getMonth()+309));for(var t=0;t<this.labelProgressDays.length;t++)this.labelProgressDays[t].string=i.default.get("L5001"+(t+1))},t.prototype.changebtn=function(e){this.btnStartLabel.node.parent.parent.active=!1,this.btnRestartLabel.node.parent.parent.active=!1,this.btnAdStartLabel.node.parent.parent.active=!1,0==e?this.btnStartLabel.node.parent.parent.active=!0:1==e?this.btnRestartLabel.node.parent.parent.active=!0:2==e&&(this.btnAdStartLabel.node.parent.parent.active=!0)},t.prototype.show=function(t){e.prototype.show.call(this),this.mIsStarGame=!1,this.mCallback=t,this.initUI(2),this.btnAd.interactable=m.default.SDK.rewardAvailability()},t.prototype.onShow=function(){e.prototype.onShow.call(this),p.UICenter.openStrengthWindow(!0,!0),this.isInit&&(this.isInit=!1)},t.prototype.hide=function(){e.prototype.hide.call(this),this.mCallback&&this.mCallback(this.mIsStarGame)},t.prototype.initUI=function(e){var t;t=this.isNowMonth?new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1):new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+this.fanye,1);var o=0;if(2==e){var a=r.Game.userData.currtyDay;a&&(cc.log("\u7cfb\u7edf\u65f6\u95f4\uff1a"+t),cc.log("\u5f53\u524d\u65f6\u95f4\uff1a"+a.toString())),this.jlDy&&(o=this.jlDy.getDate())}var n=t.getDay(),s=t.getMonth(),l=c.default.getDaliyData(t.getFullYear(),t.getMonth()),p=this.currentDate.getDate(),u=c.default.getDayCount(t.getFullYear(),s);this.monthLabel.string=i.default.get("L"+(s+309));for(var d=1,h=0;h<6;h++)for(var f=0;f<7;f++)if(n>0)this.dayItems[h][f].setData(-1),n--;else if(d<=u){var g=0;if(null==l[d]||(g=(l[d][0],l[d][0])),2==e)if(this.isNowMonth){var y=d>p?-2:0;d==p?this.dayItems[h][f].setData(2,d,!0,g):this.dayItems[h][f].setData(y,d,!1,g),d==p&&0==o?this.itemClickHandler(this.dayItems[h][f]):d==o&&this.itemClickHandler(this.dayItems[h][f])}else this.dayItems[h][f].setData(1,d,!1,g),d==u&&0==o?this.itemClickHandler(this.dayItems[h][f]):d==o&&this.itemClickHandler(this.dayItems[h][f]);else if(this.isNowMonth){var v=d>p?-2:0;d==p?(this.dayItems[h][f].setData(2,d,!0,g),this.itemClickHandler(this.dayItems[h][f])):this.dayItems[h][f].setData(v,d,!1,g)}else this.dayItems[h][f].setData(1,d,!1,g),d==u&&this.itemClickHandler(this.dayItems[h][f]);d++}else this.dayItems[h][f].setData(-1);var _=r.Game.userData.raceRecord;_||(_=[0,0]);var b=_[0];this.proBar.progress=b/m.default.rlthree,b==m.default.rlthree?(this.TrophyDot[0].active=!0,this.TrophyDot[1].active=!0,this.TrophyDot[2].active=!0):b>=m.default.rltow?(this.TrophyDot[0].active=!0,this.TrophyDot[1].active=!0,this.TrophyDot[2].active=!1):b>=m.default.rlone?(this.TrophyDot[0].active=!0,this.TrophyDot[1].active=!1,this.TrophyDot[2].active=!1):(this.TrophyDot[0].active=!1,this.TrophyDot[1].active=!1,this.TrophyDot[2].active=!1,this.giftBtn[0].interactable=!0,this.giftBtn[1].interactable=!0,this.giftBtn[2].interactable=!0,this.btnMask[0].active=!1,this.btnMask[1].active=!1,this.btnMask[2].active=!1),this.restGinBtn()},t.prototype.restGinBtn=function(){var e=r.Game.userData.raceRecord;e||(e=[0,0]);var t=e[0],o=e[1];cc.log("\u9886\u53d6\u5956\u52b1\u8ba1\u6570\uff1a"+o),this.giftBtn[0].interactable=!1,this.giftBtn[1].interactable=!1,this.giftBtn[2].interactable=!1,this.btnMask[0].active=!1,this.btnMask[1].active=!1,this.btnMask[2].active=!1,t>=m.default.rlone&&(this.giftBtn[0].interactable=!0),t>=m.default.rltow&&(this.giftBtn[0].interactable=!0,this.giftBtn[1].interactable=!0),t>=m.default.rltow&&(this.giftBtn[0].interactable=!0,this.giftBtn[1].interactable=!0,this.giftBtn[2].interactable=!0),1!=o&&3!=o&&5!=o&&7!=o||(this.giftBtn[0].interactable=!1,this.btnMask[0].active=!0),2!=o&&3!=o&&6!=o&&7!=o||(this.giftBtn[1].interactable=!1,this.btnMask[1].active=!0),4!=o&&5!=o&&6!=o&&7!=o||(this.giftBtn[2].interactable=!1,this.btnMask[2].active=!0)},t.prototype.itemClickHandler=function(e,t){this._selectItem&&this._selectItem.changeSelectState(!1),e.changeSelectState(!0),this._selectItem=e,this.daySelectIcon.position=e.node.position,t&&(this.daySelectIcon.active=!0),cc.log("\u662f\u5426\u5f53\u65e5\u6311\u6218\uff1a",e.mtype),e.startno>0?this.changebtn(1):1==e.mtype||0==e.mtype?this.changebtn(2):this.changebtn(0)},t.prototype.getRiCoin=function(e,t){var o=this,i=r.Game.userData.raceRecord;i||(i=[0,0]);var a=i[0],n=i[1];if(cc.log("\u6240\u6709\u6311\u6218\u5929\u6570\uff1a"+a),a>=m.default.rlone&&0==t&&1!=n&&3!=n&&5!=n&&7!=n){var s=this.getChestCoinProp(500),l=[s];p.UICenter.openGainItemWindow(l,function(){o.onGainItem(s)},!1,h.ItemFromType.FromRl),this.btnMask[0].active=!0,this.giftBtn[0].interactable=!1,i[1]+=1,r.Game.userData.raceRecord=i}if(a>=m.default.rltow&&1==t&&2!=n&&3!=n&&6!=n&&7!=n){var c=this.getChestDjProp(3);l=[c],p.UICenter.openGainItemWindow(l,function(){o.onGainItem(c)},!1,h.ItemFromType.FromRl),i[1]+=2,r.Game.userData.raceRecord=i,this.btnMask[1].active=!0,this.giftBtn[1].interactable=!1}if(a==m.default.rlthree&&2==t&&4!=n&&7!=n){var u=this.getChestProp(1);l=[u],p.UICenter.openGainItemWindow(l,function(){o.onGainItem(u)},!1,h.ItemFromType.FromRl),this.btnMask[2].active=!0,this.giftBtn[2].interactable=!1,i[1]+=4,r.Game.userData.raceRecord=i}7==i[1]&&(i[0]=0,i[1]=0,r.Game.userData.raceRecord=i,this.initUI(2))},t.prototype.getRandomIndex=function(){var e=g.TableHelper.GetCount(f.eTable.eTabSuperRotary);return y.default.randomRange(0,e-1)},t.prototype.getChestProp=function(){var e=new d.Prop(h.PropType.PropGold,1),t=this.getRandomIndex(),o=g.TableHelper.GetFieldByIndex(f.eTable.eTabSuperRotary,t);return e.propType=o.type,e.propNum=o.number,e},t.prototype.getChestCoinProp=function(){var e=new d.Prop(h.PropType.PropGold,1);return e.propType=h.PropType.PropGold,e.propNum=500,e},t.prototype.getChestDjProp=function(){var e=new d.Prop(h.PropType.PropGold,1);return e.propType=h.PropType.PropAuto,e.propNum=3,e},t.prototype.onGainItem=function(e){var t=r.Game.userData.goldData;e.propType==h.PropType.PropGold?t.gold+=e.propNum:e.propType==h.PropType.PropUndo?t.propUndo+=e.propNum:e.propType==h.PropType.PropAuto?t.propAuto+=e.propNum:e.propType==h.PropType.PropRefresh&&(t.propRefresh+=e.propNum),r.Game.userData.goldData=t},t.prototype.changePage=function(e,t){this.fanye+=Number(t),cc.log("fanye:"+this.fanye);var o=0==this.fanye,i=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+this.fanye,1);2021==i.getFullYear()&&0==i.getMonth()?(this.monthPageBtn[0].node.active=!1,this.btnPreForbid.active=!0):(this.monthPageBtn[0].node.active=!0,this.btnPreForbid.active=!1),this.fanye>-1?(this.monthPageBtn[1].node.active=!1,this.btnForbid.active=!0):(this.monthPageBtn[1].node.active=!0,this.btnForbid.active=!1),this.isNowMonth=o,this.initUI(1)},t.prototype.getSelectMonth=function(){var e=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+this.fanye,1);return 1e4*e.getFullYear()+100*(e.getMonth()+1)},t.prototype.getViewSelectMonth=function(){var e=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+this.fanye,1);return e.getFullYear()+"/"+(e.getMonth()+1)+"/"},t.prototype.setRaceDate=function(e){var t=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+this.fanye,e);cc.log("\u5b58\u50a8\u524d\u65f6\u95f4\uff1a"+t);var o=r.Game.userData.currtyDay;o=t,r.Game.userData.currtyDay=o,this.jlDy=t,cc.log("\u5b58\u50a8\u540e\u65f6\u95f4\uff1a"+r.Game.userData.currtyDay)},t.prototype.play=function(e,t){var o=this;this.setRaceDate(this._selectItem.value);var i=c.default.getChangeDate();r.Game.gameMgr.DaliyInfo=[n.default.dateFormat(this.currentDate),this.isNowMonth,this._selectItem.value,i];var a=c.default.getDaliyDayLevelNo(r.Game.userData.currtyDay);m.default.DailyLevelTest&&(a=1);var s=c.default.getDaliyDayData(r.Game.userData.currtyDay.getFullYear(),r.Game.userData.currtyDay.getMonth(),r.Game.userData.currtyDay.getDate()),l=4!=s[0]?s[0]:0;2==t?(cc.log("\u8fdb\u5165\u5e7f\u544a\uff01"),r.Game.sdkPipeline.showReward(function(e){e&&p.UICenter.openEnterGameWindow(a,function(e){e&&(o.mIsStarGame=!0,o.hide())},!0,i,l,!1)},this,u.default.AD_PLAY_POS_RACE)):p.UICenter.openEnterGameWindow(a,function(e){e&&(o.mIsStarGame=!0,o.hide())},!0,i,l)},t.prototype.showTrophyMonth=function(){},t.prototype.close=function(){this.toBack()},t.prototype.onTipClick=function(){p.UICenter.openDailyHelpWindow()},t.prototype.refreshAdBtn=function(e){this.btnAd.interactable=e},__decorate([b(cc.SpriteFrame)],t.prototype,"TrophyRes",void 0),__decorate([b({type:cc.Node,tooltip:"\u5956\u676f\u8fbe\u6807\u8fdb\u5ea6\u6761"})],t.prototype,"TrophyPro",void 0),__decorate([b({tooltip:"\u5956\u676f\u8fbe\u6807\u8fdb\u5ea6\u6761\u5bbd\u5ea6"})],t.prototype,"TrophyProSize",void 0),__decorate([b({type:cc.Node,tooltip:"\u5956\u676f\u8fbe\u6807\u5706\u5708"})],t.prototype,"TrophyDot",void 0),__decorate([b(cc.Label)],t.prototype,"maxNumLabel",void 0),__decorate([b(cc.Label)],t.prototype,"monthLabel",void 0),__decorate([b(cc.Button)],t.prototype,"monthPageBtn",void 0),__decorate([b(cc.Label)],t.prototype,"weekLabel",void 0),__decorate([b(cc.Prefab)],t.prototype,"dayItemPre",void 0),__decorate([b(cc.Node)],t.prototype,"dayContiner",void 0),__decorate([b(cc.Node)],t.prototype,"daySelectIcon",void 0),__decorate([b(cc.Node)],t.prototype,"btnForbid",void 0),__decorate([b(cc.Node)],t.prototype,"btnPreForbid",void 0),__decorate([b(cc.Label)],t.prototype,"btnStartLabel",void 0),__decorate([b(cc.Label)],t.prototype,"btnRestartLabel",void 0),__decorate([b(cc.Label)],t.prototype,"btnAdStartLabel",void 0),__decorate([b(cc.Node)],t.prototype,"btnMask",void 0),__decorate([b(cc.Node)],t.prototype,"helperBtn",void 0),__decorate([b(cc.ProgressBar)],t.prototype,"proBar",void 0),__decorate([b(cc.Button)],t.prototype,"giftBtn",void 0),__decorate([b(cc.Label)],t.prototype,"labelProgressDays",void 0),__decorate([b(cc.Button)],t.prototype,"btnAd",void 0),__decorate([_],t)}(s.default);o.default=T,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/DateUtils":"DateUtils","../../game/BoxOpenSystem":"BoxOpenSystem","../../game/type/Enum":"Enum","../../global/GameConfig":"GameConfig","../../sdk/SDKConst":"SDKConst","../../view/UICenter":"UICenter","../Table/Table":"Table","../Table/TableHelper":"TableHelper","../util/MathUtil":"MathUtil","./DaliyHelper":"DaliyHelper","./DayItem":"DayItem"}],DataManager:[function(e,t,o){"use strict";cc._RF.push(t,"103fbGLB6JFl7qMCQHB0zLY","DataManager"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../core/global/I18N"),a=e("../core/global/Emitter"),n=e("../Game"),r=e("../core/Table/TabManager"),s=e("../core/util/ResUtil"),l=e("../App"),c=e("../view/UICenter"),p=function(){function e(){}return e.startLoad=function(){this.totalCount=7,this.userDataInitData()},e.userDataInitData=function(){var e=this;n.Game.userData.initData(function(){e.completedCount++,e.onUserDataLaded()})},e.getProgress=function(){return 0==this.totalCount?this.uiPrefabProgress:this.completedCount/this.totalCount*.3+.7*this.uiPrefabProgress},e.onUserDataLaded=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r.TabManager.asyncLoad()];case 1:return e.sent(),[4,this.loadI18n(n.Game.userData.language)];case 2:return e.sent(),[4,this.loadI18nAtlas(n.Game.userData.language)];case 3:return e.sent(),[4,this.loadI18nFont(n.Game.userData.language)];case 4:return e.sent(),[4,this.loadGameRes()];case 5:return e.sent(),[4,this.preLoadUI()];case 6:return e.sent(),[4,this.loadBgm()];case 7:return e.sent(),[4,this.loadGameScene()];case 8:return e.sent(),l.default.instance.onGameLoaded(),[2]}})})},e.loadI18n=function(e){var t=this;return new Promise(function(o){e=i.default.getLocalKey(e),s.ResUtil.loadRes(i.default.defaultLU,s.eResType.I18n,function(a){i.default.defaultLU!=e?s.ResUtil.loadRes(e,s.eResType.I18n,function(e){i.default.loadProperty(a.text,e.text),t.completedCount++,o()}):(i.default.loadProperty(a.text,null),t.completedCount++,o())})})},e.loadI18nFont=function(e){var t=this;return new Promise(function(o){e=i.default.getLocalKey(e),s.ResUtil.loadRes(i.default.defaultLU,s.eResType.font,function(a){i.default.defaultLU!=e?s.ResUtil.loadRes(e,s.eResType.font,function(e){i.default.initFont(a,e),t.completedCount++,o()},function(){i.default.initFont(a,null),t.completedCount++,o()}):(i.default.initFont(a,null),t.completedCount++,o())})})},e.loadI18nAtlas=function(e){var t=this;return new Promise(function(o){e=i.default.getLocalKey(e),s.ResUtil.loadRes(i.default.defaultLU,s.eResType.I18nAtlas,function(a){i.default.defaultLU!=e&&i.default.supportAtlas(e)?s.ResUtil.loadRes(e,s.eResType.I18nAtlas,function(e){i.default.initAtlas(a,e),t.completedCount++,o()}):(i.default.initAtlas(a,null),t.completedCount++,o())})})},e.loadGameRes=function(){var e=this;return new Promise(function(t){e.completedCount++,n.Game.gameRes.load(t)})},e.preLoadUI=function(){var e=this;return new Promise(function(t){for(var o=["MainWindow","Level3000Window","BonusWindow","ShopWindow","SuspendWindow","TileFailWindow","TileWinWindow","LoaderWindow","MapWindow"],i=0,a=o.length,r=function(r){var l=o[r];s.ResUtil.loadRes(l,s.eResType.UIPrefab,function(o){i++,e.uiPrefabProgress=i/a,n.Game.uiMgr.preLoadRes.add(l,o),i==a&&t()})},l=0;l<a;l++)r(l)})},e.loadGameScene=function(){var e=this;return new Promise(function(t){cc.director.loadScene("db://assets/scene/Game.fire",function(){e.completedCount++;var o=cc.find("Canvas");cc.find("Stage").setParent(o),cc.find("UIRoot").setParent(o),n.Game.uiMgr.cleanCurSceneWindow(),c.UICenter.openMainWindow(!0),cc.find("Canvas/LoadingWindow").setSiblingIndex(99999),t()})})},e.loadBgm=function(){var e=this;return new Promise(function(t){for(var o=["bgm1","bgm2"],i=0,a=o.length,n=function(n){var r=n;cc.resources.load("sound/"+o[r],cc.AudioClip,function(n,s){n||(e.soundMap[o[r]]=s),++i==a&&(e.completedCount++,t())})},r=0;r<a;r++)n(r)})},e.loadDataResLazy=function(){e.loadMusic()},e.loadMusic=function(){for(var e=this,t=["ad_unenough","bonus_spin","box_getitem","btn_click","cancel_common","coin_unenough","get_bouns","gold","item_back","item_random","item_refresh","kill_time","lock_grid_click","logo","open_common","result_fail","result_success_star_1","result_success_star_2","result_success_star_3","result_win","setting_slide","stage_change","tab_change","tile_click","tile_destory","tile_flyer","tile_obtain","withdraw","wrong_operation","box_getstar","box_getdiamond","consume_ strength"],o=0,i=t.length,n=function(n){var r=n;cc.resources.load("sound/"+t[r],cc.AudioClip,function(n,s){n||(e.soundMap[t[r]]=s),e.completedCount++,++o==i&&a.Emitter.fire("soundLoaded")})},r=0;r<i;r++)n(r)},e.getSoundRes=function(t){return e.soundMap[t]},e.completedCount=0,e.totalCount=0,e.uiPrefabProgress=0,e.soundMap={},e}();o.default=p,cc._RF.pop()},{"../App":"App","../Game":"Game","../core/Table/TabManager":"TabManager","../core/global/Emitter":"Emitter","../core/global/I18N":"I18N","../core/util/ResUtil":"ResUtil","../view/UICenter":"UICenter"}],DataStructure:[function(e,t,o){"use strict";cc._RF.push(t,"05222StKC9HnYW4CfRtfglI","DataStructure"),Object.defineProperty(o,"__esModule",{value:!0}),o.Coord=o.Coordinate=void 0;var i=function(){function e(e,t,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===o&&(o=0),this.x=e,this.y=t,this.z=o}return e.prototype.set=function(e,t,o){"number"==typeof e?(this.x=e,this.y=t,this.z=o):(this.x=e.x,this.y=e.y,this.z=e.z)},e.prototype.copy=function(){return new e(this.x,this.y,this.z)},e.prototype.compare=function(e,t){return"number"==typeof e?this.x===e&&this.y===t:this.x===e.x&&this.y===e.y},e.prototype.toString=function(){return"(x:"+this.x+", y:"+this.y+", z:"+this.z+")"},e}();o.Coordinate=i,o.Coord=function(e,t,o){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===o&&(o=0),new i(e,t,o)},cc._RF.pop()},{}],DataTools:[function(e,t,o){"use strict";cc._RF.push(t,"c73e2JX89lGrrhHSv1ppI2A","DataTools"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Game"),a=e("../core/UI/DialogBox"),n=e("../core/util/StrUtil"),r=e("../core/global/I18N"),s=e("../sdk/SDKConst"),l=e("../view/window/GoldWindow"),c=e("../view/UICenter"),p=e("../global/GameConfig"),u=e("../core/UI/Toast"),d=e("../App"),h=function(){function e(){}return e.addGold=function(e){var t=i.Game.userData.goldData;t.gold+=e,i.Game.userData.goldData=t},e.buyGoodsDialog=function(e,t,o){var i=new a.DialogBoxData;i.initWith(a.eDialogButtonType.CONFIRM|a.eDialogButtonType.CANCEL,n.default.stringFormat(r.default.get("L856"),e)),i.callback=function(e){e==a.eDialogButtonType.CONFIRM?t():o&&o()},a.default.showWith(i)},e.buyGoods=function(e,t){var o=this;this.buyGoodsDialog(e,function(){i.Game.userData.goldData.gold>=e?t&&t():p.default.SDK.rewardAvailability()?o.goldNotEnough():u.default.showWith(r.default.get("L858"))})},e.goldNotEnough=function(){var t=this,o=new a.DialogBoxData;o.initWith(a.eDialogButtonType.CONFIRM|a.eDialogButtonType.CANCEL,n.default.stringFormat(r.default.get("L857"),50)),o.callback=function(o){o==a.eDialogButtonType.CONFIRM&&i.Game.sdkPipeline.showReward(function(t){t&&(c.UICenter.openGoldWindow(i.Game.userData.goldData.gold),l.default.animate(d.default.instance.node,50,function(){e.addGold(50)}))},t,s.default.AD_PLAY_POS_BUY_GOLD)},a.default.showWith(o)},e.enterLevel=function(e,t,o,a){void 0===a&&(a=!0),cc.log("enterLevel index:"+t),i.Game.gameMgr.startArcade(t,a),o&&o(!0)},e}();o.default=h,cc._RF.pop()},{"../App":"App","../Game":"Game","../core/UI/DialogBox":"DialogBox","../core/UI/Toast":"Toast","../core/global/I18N":"I18N","../core/util/StrUtil":"StrUtil","../global/GameConfig":"GameConfig","../sdk/SDKConst":"SDKConst","../view/UICenter":"UICenter","../view/window/GoldWindow":"GoldWindow"}],DateUtils:[function(e,t,o){"use strict";cc._RF.push(t,"f7a0bfqKb9CxLvUo3p0BG/+","DateUtils"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.timeFormat=function(e,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=2),0==e)return 1==o?"00:00:00":"00:00";var i=Math.ceil(t?e/1e3:e),a=i%60,n=(a<10?"0":"")+a;return i-=i%60,i/=60,o>0?(n=((a=i%60)<10?"0":"")+a+":"+n,i-=i%60,(1==o||i>0)&&(n=((a=i/60)<10?"0":"")+a+":"+n)):n=(i<10?"0":"")+i+":"+n,n},e.dateFormat=function(e,t){void 0===t&&(t=!1);var o=e.getFullYear()+"-",i=e.getMonth()+1;t&&i<10&&(o+="0"),o+=i+"-";var a=e.getDate();return t&&a<10&&(o+="0"),o+a},e.dateNumFormat=function(e){return Math.floor(e/1e4)+"-"+(Math.floor(e%1e4/100)+1)+"-"+e%100},e.getDateNum=function(e,t,o){return 1e4*e+100*t+o},e.splitDate=function(e){if(!e)return{};var t=e.split("-");return 3!=t.length?{}:{year:Number.parseInt(t[0]),month:Number.parseInt(t[1]),day:Number.parseInt(t[2])}},e.getUintNumber=function(t){for(var o=0;t>1e3&&(t/=1e3,!(++o>=e.uints.length-1)););return 0==o?Math.ceil(t)+"":Number(t.toFixed(2))+e.uints[o]},e.getTimestampFromString=function(e){var t=e.split(":"),o=parseInt(t[0]),i=parseInt(t[1]),a=parseInt(t[2]),n=new Date;return n.setHours(o,i,a),Math.floor(n.getTime()/1e3)},e.getSameDayZeroTimeStamp=function(){var e=new Date((new Date).setHours(0,0,0,0)),t=Math.floor(e.getTime()/1e3);return cc.log("\u96f6\u9ede\u6642\u9593\u6233\uff1a"+t),t},e.getTimeStamp=function(){return(new Date).valueOf().toString()},e.uints=["","K","M","B","t","q","Q","s","S","o","n","d","U","D","T","Qt","Qd","Sd","St","O","N","v","c"],e}();o.default=i,cc._RF.pop()},{}],DayGiftWindow:[function(e,t,o){"use strict";cc._RF.push(t,"4e6951dT49KvZPV6ziZOFeI","DayGiftWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/I18N"),a=e("../../core/UI/WWindow"),n=e("../UICenter"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.giftNode=[],t.labelTip=null,t.giftPos0=cc.v3(),t.giftPos1=cc.v3(),t.giftPos2=cc.v3(),t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage()},t.prototype.show=function(){e.prototype.show.call(this),this.giftNode[0].getPosition(this.giftPos0),this.giftNode[1].getPosition(this.giftPos1),this.giftNode[2].getPosition(this.giftPos2),this.animate()},t.prototype.initLanguage=function(){this.labelTip.string=i.default.get("L40081")},t.prototype.onClaimRewardClick=function(){this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.animate=function(){var e=this;cc.log("\u52a8\u753b\u5f00\u59cb\uff01"),cc.tween(this.giftNode[0]).to(.3,{position:this.giftPos2}).to(.3,{position:this.giftPos1}).to(.3,{position:this.giftPos2}).to(.3,{position:this.giftPos1}).to(.1,{scale:1.2}).to(.1,{scale:1}).to(.3,{position:this.giftPos0}).call(function(){return e.giftNode[0].on(cc.Node.EventType.TOUCH_END,e.onTouchEnd,e)}).start(),cc.tween(this.giftNode[1]).to(.3,{position:this.giftPos0}).to(.3,{position:this.giftPos1}).to(.3,{position:this.giftPos0}).to(.3,{position:this.giftPos1}).to(.1,{scale:1.2}).to(.1,{scale:1}).to(.3,{position:this.giftPos1}).call(function(){return e.giftNode[1].on(cc.Node.EventType.TOUCH_END,e.onTouchEnd,e)}).start(),cc.tween(this.giftNode[2]).to(.3,{position:this.giftPos1}).to(.3,{position:this.giftPos2}).to(.3,{position:this.giftPos1}).to(.3,{position:this.giftPos1}).to(.1,{scale:1.2}).to(.1,{scale:1}).to(.3,{position:this.giftPos2}).call(function(){return e.giftNode[2].on(cc.Node.EventType.TOUCH_END,e.onTouchEnd,e)}).start()},t.prototype.onTouchEnd=function(){cc.log("\u9ede\u64ca\u4e8b\u4ef6\uff01"),e.prototype.toBack.call(this),n.UICenter.openDayOpenGiftWindow()},__decorate([l(cc.Node)],t.prototype,"giftNode",void 0),__decorate([l(cc.Label)],t.prototype,"labelTip",void 0),__decorate([s],t)}(a.default);o.default=c,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../UICenter":"UICenter"}],DayItem:[function(e,t,o){"use strict";cc._RF.push(t,"9d107xu2mNJfKrJMYYblRM/","DayItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../global/I18N"),a=e("../UI/Toast"),n=cc._decorator,r=n.ccclass,s=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.bg=null,t.stars=[],t.redPoint=null,t.bgs=[],t.nbgstart=[],t.row=0,t.col=0,t._type=0,t.value=0,t.startno=0,t.mtype=0,t}return __extends(t,e),t.prototype.setPos=function(e,t){return this.row=e,this.col=t,this},t.prototype.setData=function(e,t,o,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===o&&(o=!1),void 0===i&&(i=0),this.startno=i,this.type=e,this.value=t,this.mtype=e,this.label.string=t+"",o&&i<=0?this.changeDayLabelColor(!1):this.changeDayLabelColor(!0);var a=this.node.getComponent(cc.Button);a&&(this.type>=0?(a.transition=cc.Button.Transition.SCALE,a.zoomScale=1.1):a.transition=cc.Button.Transition.NONE)},t.prototype.changeSelect=function(){if(this.type>=0)this.node.getParent().emit("itemClick",this);else if(-2==this.type){var e=i.default.get("L50019");a.default.showWith(e)}},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){if(this._type=e,this.stars[0].node.active=!1,this.stars[1].node.active=!1,this.stars[2].node.active=!1,this.bg.node.active=!1,-1==e)return this.label.node.active=!1,void(this.bg.node.active=!1);if(0==e?(this.label.node.active=!0,this.bg.node.active=!0,this.bg.spriteFrame=this.bgs[0]):-2==e?(this.label.node.active=!0,this.bg.node.active=!0,this.bg.spriteFrame=this.bgs[1]):(this.label.node.active=!0,this.bg.node.active=!0,this.bg.spriteFrame=this.bgs[0]),4==this.startno)for(var t=0;t<3;t++)this.stars[t].node.active=!0,this.stars[t].spriteFrame=this.nbgstart[1],this.label.node.active=!1;else{if(0!=this.startno)for(t=0;t<3;t++)this.stars[t].node.active=!0,this.stars[t].spriteFrame=this.nbgstart[1],this.label.node.active=!1;for(t=0;t<=this.startno-1;t++)this.stars[t].node.active=!0,this.stars[t].spriteFrame=this.nbgstart[0],this.label.node.active=!1}},enumerable:!1,configurable:!0}),t.prototype.changeSelectState=function(e){var t=e?this.bgs[2]:this.bgs[0];this.bg.spriteFrame=t;var o=this.label.getComponent(cc.LabelOutline);if(o){var i=e?"#447239":"#A84525",a=new cc.Color;a.fromHEX(i),o.color=a}},t.prototype.changeDayLabelColor=function(e){var t=new cc.Color;t.fromHEX("#3CA8F1");var o=e?cc.Color.WHITE:t;this.label.node.color=o},t.colors=[new cc.Color(238,238,238),new cc.Color(51,51,51)],__decorate([s(cc.Label)],t.prototype,"label",void 0),__decorate([s(cc.Sprite)],t.prototype,"bg",void 0),__decorate([s(cc.Sprite)],t.prototype,"stars",void 0),__decorate([s(cc.Node)],t.prototype,"redPoint",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"bgs",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"nbgstart",void 0),__decorate([r],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../UI/Toast":"Toast","../global/I18N":"I18N"}],DayOpenGiftWindow:[function(e,t,o){"use strict";cc._RF.push(t,"e53e4wVMh1GzKH9V5oRSh1b","DayOpenGiftWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/global/I18N"),n=e("../../core/Table/Table"),r=e("../../core/Table/TableHelper"),s=e("../../core/UI/WWindow"),l=e("../../core/util/DateUtils"),c=e("../../core/util/MathUtil"),p=e("../../Game"),u=e("../../game/BoxOpenSystem"),d=e("../../game/type/Enum"),h=e("../../global/AudioMgr"),f=e("../../global/GameConfig"),g=e("../../sdk/LogEvent"),y=e("../../sdk/SDKConst"),m=e("./content/ItemGoldContent"),v=cc._decorator,_=v.ccclass,b=v.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.goldPrefab=null,t.itemParent=null,t.icons=[],t.openBoxNode=null,t.starParticle=null,t.particle=null,t.openClip=null,t.idleClip=null,t.labelDouble=null,t.labelClaim=null,t.btnDouble=null,t.mItemPool=[],t.mCurrentItems=[],t.mPropList=[],t.mDouble=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),i.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(){var t=this;e.prototype.show.call(this),this.mDouble=!1,this.doSignIn(),this.refreshItems(),this.starParticle.stopSystem(),this.particle.stopSystem(),this.labelClaim.node.active=!1,setTimeout(function(){t.labelClaim.node.active=!0},2e3),this.btnDouble.interactable=f.default.SDK.rewardAvailability(),g.default.dotAdPv(y.default.AD_PLAY_POS_GIFTBOX)},t.prototype.onShow=function(){var t=this;h.AudioMgr.playEffect("box_getitem"),null==this.animation&&(this.animation=this.node.getComponent(cc.Animation));var o=0;null!=this.animation&&null!=this.openClip&&(this.animation.play(this.openClip.name),o=this.openClip.duration,null!=this.idleClip&&(setTimeout(function(){t.animation.play(t.idleClip.name),t.starParticle.resetSystem()},1e3*o),o+=this.idleClip.duration)),setTimeout(function(){e.prototype.onShow.call(t)},1e3*o)},t.prototype.initLanguage=function(){this.labelDouble.string=a.default.get("L40101")+" x2",this.labelClaim.string=a.default.get("L40101")},t.prototype.removeNodes=function(){for(var e=0,t=this.mCurrentItems;e<t.length;e++){var o=t[e];this.mItemPool.push(o),o.node.removeFromParent(!1)}this.mCurrentItems=[]},t.prototype.refreshItems=function(){for(var e=0;e<this.mPropList.length;e++){var t=this.mPropList[e],o=t.propType==d.PropType.PropGold?0:1,i=this.getItemFromPools(o);i.setContent(t),this.mCurrentItems.push(i),i.node.setParent(this.itemParent)}for(var a=0,n=this.itemParent.children;a<n.length;a++){var r=n[a],s=this.itemParent.convertToWorldSpaceAR(cc.Vec3.ZERO),l=this.openBoxNode.convertToWorldSpaceAR(cc.Vec3.ZERO);r.setPosition(cc.v2(0,-(s.y-l.y))),r.scale=0}},t.prototype.onClaimRewardClick=function(){console.log("onClaimRewardClick"),this.hide()},t.prototype.onClaimDoubleClick=function(){var e=this;p.Game.sdkPipeline.showReward(function(t){t&&(e.mDouble=!0,e.hide())},this,y.default.AD_PLAY_POS_GIFTBOX)},t.prototype.hide=function(){console.log("[DayOpenGiftWindow],hide"),e.prototype.hide.call(this),this.gainProp(),this.clearProps(),this.removeNodes()},t.prototype.gainProp=function(){for(var e=p.Game.userData.goldData,t=p.Game.userData.lvRwd.This,o=0;o<this.mPropList.length;o++){var i=this.mPropList[o],a=this.mDouble?2*i.propNum:i.propNum;switch(i.propType){case d.PropType.PropGold:e.gold+=a,g.default.dotVirtualGain(t,a,3,e.gold,1);break;case d.PropType.PropUndo:e.propUndo+=a,g.default.dotPropLog(d.PropType.PropUndo,i.propNum,e.propUndo,t,3);break;case d.PropType.PropAuto:e.propAuto+=a,g.default.dotPropLog(d.PropType.PropAuto,i.propNum,e.propAuto,t,3);break;case d.PropType.PropRefresh:e.propRefresh+=a,g.default.dotPropLog(d.PropType.PropRefresh,i.propNum,e.propRefresh,t,3);break;default:console.log("[gainProp],propType error",i.propType)}}this.mPropList.length>0&&(p.Game.userData.goldData=e)},t.prototype.clearProps=function(){for(var e=this.mPropList.length-1;e>=0;e--)this.mPropList.pop()},t.prototype.animate=function(){for(var e=this.getPostionXList(this.mPropList.length),t=0;t<this.itemParent.childrenCount;t++){var o=this.itemParent.children[t],i=this.itemParent.convertToWorldSpaceAR(cc.Vec3.ZERO),a=this.openBoxNode.convertToWorldSpaceAR(cc.Vec3.ZERO),n=i.y-a.y,r=cc.jumpTo(.6,cc.v2(e[t],0),n,1).easing(cc.easeSineOut()),s=cc.scaleTo(.6,1),l=cc.tween(o);l.parallel(r,s),l.start()}},t.prototype.getPostionXList=function(e){var t=[];return 2==e?t.push(-200,200):3==e?(t.push(-300),t.push(0),t.push(300)):t.push(0),t},t.prototype.doSignIn=function(){var e=p.Game.userData.signInData,t=f.default.maxSignInDay;cc.log("\u6700\u5927\u5929\u6578\uff1a"+t);var o=l.default.getSameDayZeroTimeStamp()-e.Timestamp;if(cc.log("\u76f8\u5dee\u5929\u6578\uff1a"+o),0==e.Timestamp)e.SignInDays=1;else if(o>=172800)e.SignInDays=1;else{if(!(172800>o&&o>0))return void cc.log("\u4e0d\u80fd\u7c3d\u5230\uff01");e.SignInDays<t?e.SignInDays+=1:e.SignInDays=1}cc.log("\u7c3d\u5230\u5929\u6578\uff1a"+e.SignInDays);var i=c.default.randomRange(0,t),a=r.TableHelper.GetFieldByIndex(n.eTable.eTabLoginReward,i);if(null!=a){var s=new u.Prop(0,a.gold);this.mPropList.push(s),p.Game.userData.lvRwd.This>=f.default.GuideLevel[3]+1&&(s=new u.Prop(a.type,a.num),this.mPropList.push(s))}e.Timestamp=l.default.getSameDayZeroTimeStamp(),p.Game.userData.signInData=e},t.prototype.PlayParticle=function(){this.particle.resetSystem(),this.animate()},t.prototype.getItemFromPools=function(e){var t=null,o=this.mItemPool.findIndex(function(t){return t.itemType==e});return-1!=o?(t=this.mItemPool[o],this.mItemPool.splice(o,1)):t=(1==e?cc.instantiate(this.itemPrefab):cc.instantiate(this.goldPrefab)).getComponent(m.default),t},t.prototype.refreshAdBtn=function(e){this.btnDouble.interactable=e},__decorate([b(cc.Prefab)],t.prototype,"itemPrefab",void 0),__decorate([b(cc.Prefab)],t.prototype,"goldPrefab",void 0),__decorate([b(cc.Node)],t.prototype,"itemParent",void 0),__decorate([b(cc.SpriteFrame)],t.prototype,"icons",void 0),__decorate([b(cc.Node)],t.prototype,"openBoxNode",void 0),__decorate([b(cc.ParticleSystem)],t.prototype,"starParticle",void 0),__decorate([b(cc.ParticleSystem)],t.prototype,"particle",void 0),__decorate([b(cc.AnimationClip)],t.prototype,"openClip",void 0),__decorate([b(cc.AnimationClip)],t.prototype,"idleClip",void 0),__decorate([b(cc.Label)],t.prototype,"labelDouble",void 0),__decorate([b(cc.Label)],t.prototype,"labelClaim",void 0),__decorate([b(cc.Button)],t.prototype,"btnDouble",void 0),__decorate([_],t)}(s.default);o.default=T,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/DateUtils":"DateUtils","../../core/util/MathUtil":"MathUtil","../../game/BoxOpenSystem":"BoxOpenSystem","../../game/type/Enum":"Enum","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst","./content/ItemGoldContent":"ItemGoldContent"}],Debug:[function(e,t,o){"use strict";cc._RF.push(t,"7340cBx881LhZy8DM3mtl5i","Debug"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(){},cc._RF.pop()},{}],DefaultPaySDK:[function(e,t,o){"use strict";cc._RF.push(t,"a15f0mtfQxGH7Ae38UVULz4","DefaultPaySDK"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.PayisLoaded=function(){return!0},e.prototype.purchase=function(e,t,o){setTimeout(function(){o("orderid",0)},1e3)},e.prototype.suppleMent=function(e){setTimeout(function(){e("productId","orderId",0)},1e3)},e}();o.default=i,cc._RF.pop()},{}],DefaultSDK:[function(e,t,o){"use strict";cc._RF.push(t,"c4c5c6Q/dBB45sc18FTQEH0","DefaultSDK"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./fbplugin/FBAdManager"),a=e("../global/GameConfig"),n=e("./SDKConst"),r=cc._decorator,s=r.ccclass,l=(r.property,function(){function e(){}var t;return t=e,e.prototype.addPushMessage=function(e,t){console.log("add push message",e,t)},e.prototype.setOrientation=function(e){console.log("mobile only! type=",e),1==e?cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT):2==e?cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE):cc.view.setOrientation(cc.macro.ORIENTATION_AUTO)},e.prototype.logEvent=function(e){cc.log("\u8c03\u7528 logEvent\uff01"+e)},e.prototype.getAFStatus=function(){return 1},e.prototype.setAdUid=function(){},e.prototype.ADisLoaded=function(e){return void 0===e&&(e=n.default.AD_TYPE_REWARD),!0},e.prototype.initAD=function(){},e.prototype.loadAD=function(e,t){void 0===t&&(t=n.default.AD_TYPE_REWARD)},e.prototype.showInterstitial=function(e,t,o){e&&e.call(o,!0),setTimeout(function(){t&&t.call(o)},2e3)},e.prototype.showReward=function(e,t,o){e&&e.call(o,!0),setTimeout(function(){t&&t.call(o,!0)},2e3)},e.prototype.displayBannerAD=function(){},e.prototype.hasBannerAD=function(){return!1},e.prototype.rewardAvailability=function(){return!0},e.prototype.SDKCallBack=function(){},e.prototype.getLocal=function(){try{return i.default.getLocale()}catch(e){return console.error(e),navigator.language}},e.prototype.getData=function(e,o,i){var a=cc.sys.localStorage.getItem(t.localStorageKey),n=a?JSON.parse(a):{};if(e){for(var r={},s=0,l=e;s<l.length;s++){var c=l[s];r[c]=n[c]}o.call(i,r)}else o.call(i,n)},e.prototype.setData=function(e){var o=cc.sys.localStorage.getItem(t.localStorageKey),i=o?JSON.parse(o):{};for(var a in e)i[a]=e[a];cc.sys.localStorage.setItem(t.localStorageKey,JSON.stringify(i))},e.prototype.showRateDialog=function(){},e.prototype.getIsRated=function(){return!1},e.prototype.getVersion=function(){return a.default.VERSION},e.prototype.smbCommand=function(){},e.localStorageKey="game_MD_2",t=__decorate([s],e)}());o.default=l,cc._RF.pop()},{"../global/GameConfig":"GameConfig","./SDKConst":"SDKConst","./fbplugin/FBAdManager":"FBAdManager"}],DialogBox:[function(e,t,o){"use strict";cc._RF.push(t,"eef7d2uQMlBKaBloXlg8PYw","DialogBox"),Object.defineProperty(o,"__esModule",{value:!0}),o.DialogBoxData=o.eDialogButtonType=void 0;var i,a=e("./WWindow"),n=e("../global/I18N"),r=e("../util/StrUtil"),s=e("../util/ResUtil"),l=e("../../Game");(function(e){e[e.CONFIRM=1]="CONFIRM",e[e.CANCEL=2]="CANCEL",e[e.CLOSE=4]="CLOSE"})(i=o.eDialogButtonType||(o.eDialogButtonType={}));var c=function(){function e(){this.type=i.CONFIRM,this.callback=null,this.clickToBack=!1}return e.prototype.initWith=function(e,t,o,i,a){for(var n=[],s=5;s<arguments.length;s++)n[s-5]=arguments[s];this.type=e,this.title=o,r.default.isNullOrEmpty(t)||(this.content=r.default.stringFormat(t,n)),r.default.isNullOrEmpty(i)?this.confirm=this.getDefaultConfirmText():this.confirm=i,r.default.isNullOrEmpty(a)?this.cancel=this.getDefaultCancelText():this.cancel=a},e.prototype.getDefaultConfirmText=function(){return n.default.get("L1")},e.prototype.getDefaultCancelText=function(){return n.default.get("L2")},e}();o.DialogBoxData=c;var p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mDialogDatas=[],t.mCurDialogData=null,t.labelTitle=null,t.labelText=null,t.labelConfirm=null,t.labelCancel=null,t.btnConfirm=null,t.btnCancel=null,t.btnClose=null,t}var o;return __extends(t,e),o=t,t.instance=function(e){var t=this;null==this._Instance?s.ResUtil.loadRes("DialogBox",s.eResType.UIPrefab,function(i){var a=cc.instantiate(i);a.parent=l.Game.uiMgr.topUI,t._Instance=a.getComponent(o),l.Game.uiMgr.initUIClickAudio(a),e(t._Instance)}):(this._Instance.node.setSiblingIndex(1e4),e(this._Instance))},t.showWith=function(e){null!=e&&this.instance(function(t){t.mCurDialogData?t.mDialogDatas.push(e):t.opend(e)})},t.prototype.onHide=function(){if(this.close(this.mCurrentButtonType),this.mDialogDatas.length>0){var t=this.mDialogDatas.shift();this.opend(t)}else this.mCurDialogData=null,e.prototype.onHide.call(this)},t.prototype.opend=function(t){this.mCurDialogData=t,this.setText(this.labelTitle,t.title),this.setText(this.labelText,t.content),this.setText(this.labelConfirm,t.confirm),this.setText(this.labelCancel,t.cancel),this.setButtonActive(this.btnClose,this.isShowButton(t.type,i.CLOSE)),this.setButtonActive(this.btnConfirm,this.isShowButton(t.type,i.CONFIRM)),this.setButtonActive(this.btnCancel,this.isShowButton(t.type,i.CANCEL)),e.prototype.show.call(this),t.clickToBack&&this.node.once(cc.Node.EventType.TOUCH_END,this.toBack,this)},t.prototype.setButtonActive=function(e,t){e&&(e.active=t)},t.prototype.setText=function(e,t){e&&(r.default.isNullOrEmpty(t)?e.string="":e.string=t)},t.prototype.isShowButton=function(e,t){return(e&t)==t},t.prototype.close=function(e){this.mCurDialogData.callback&&this.mCurDialogData.callback(e)},t.prototype.onConfirm=function(){this.mCurrentButtonType=i.CONFIRM,this.hide()},t.prototype.onCancel=function(){this.mCurrentButtonType=i.CANCEL,this.hide()},t.prototype.onClose=function(){this.mCurrentButtonType=i.CLOSE,this.hide()},t._Instance=null,__decorate([d(cc.RichText)],t.prototype,"labelTitle",void 0),__decorate([d(cc.RichText)],t.prototype,"labelText",void 0),__decorate([d(cc.Label)],t.prototype,"labelConfirm",void 0),__decorate([d(cc.Label)],t.prototype,"labelCancel",void 0),__decorate([d(cc.Node)],t.prototype,"btnConfirm",void 0),__decorate([d(cc.Node)],t.prototype,"btnCancel",void 0),__decorate([d(cc.Node)],t.prototype,"btnClose",void 0),o=__decorate([u],t)}(a.default);o.default=h,cc._RF.pop()},{"../../Game":"Game","../global/I18N":"I18N","../util/ResUtil":"ResUtil","../util/StrUtil":"StrUtil","./WWindow":"WWindow"}],DialogWarnBox:[function(e,t,o){"use strict";cc._RF.push(t,"00b2a/7KqdH0aZXK0H7W5hW","DialogWarnBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./DialogBox"),a=e("../util/ResUtil"),n=e("../../Game"),r=e("./WWindow"),s=e("../util/StrUtil"),l=e("../../global/AudioMgr"),c=cc._decorator,p=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mDialogDatas=[],t.mCurDialogData=null,t.labelTitle=null,t.labelText=null,t.labelConfirm=null,t.labelCancel=null,t.btnConfirm=null,t.btnCancel=null,t.btnClose=null,t}var o;return __extends(t,e),o=t,t.instance=function(e){var t=this;null==this._Instance?a.ResUtil.loadRes("DialogWarnBox",a.eResType.UIPrefab,function(i){var a=cc.instantiate(i);a.parent=n.Game.uiMgr.topUI,t._Instance=a.getComponent(o),n.Game.uiMgr.initUIClickAudio(a),e(t._Instance)}):(this._Instance.node.setSiblingIndex(1e4),e(this._Instance))},t.showWith=function(e){null!=e&&this.instance(function(t){t.mCurDialogData?t.mDialogDatas.push(e):t.opend(e)})},t.prototype.onHide=function(){if(this.close(this.mCurrentButtonType),this.mDialogDatas.length>0){var t=this.mDialogDatas.shift();this.opend(t)}else this.mCurDialogData=null,e.prototype.onHide.call(this)},t.prototype.opend=function(t){this.mCurDialogData=t,this.setText(this.labelTitle,t.title),this.setText(this.labelText,t.content),this.setText(this.labelConfirm,t.confirm),this.setText(this.labelCancel,t.cancel),this.setButtonActive(this.btnClose,this.isShowButton(t.type,i.eDialogButtonType.CLOSE)),this.setButtonActive(this.btnConfirm,this.isShowButton(t.type,i.eDialogButtonType.CONFIRM)),this.setButtonActive(this.btnCancel,this.isShowButton(t.type,i.eDialogButtonType.CANCEL)),e.prototype.show.call(this)},t.prototype.setButtonActive=function(e,t){e&&(e.active=t)},t.prototype.setText=function(e,t){e&&(s.default.isNullOrEmpty(t)?e.string="":e.string=t)},t.prototype.isShowButton=function(e,t){return(e&t)==t},t.prototype.close=function(e){this.mCurDialogData.callback&&this.mCurDialogData.callback(e)},t.prototype.hide=function(){e.prototype.hide.call(this),l.AudioMgr.clickOK()},t.prototype.onConfirm=function(){this.mCurrentButtonType=i.eDialogButtonType.CONFIRM,this.hide()},t.prototype.onCancel=function(){this.mCurrentButtonType=i.eDialogButtonType.CANCEL,this.hide()},t.prototype.onClose=function(){this.mCurrentButtonType=i.eDialogButtonType.CLOSE,this.hide()},t._Instance=null,__decorate([u(cc.RichText)],t.prototype,"labelTitle",void 0),__decorate([u(cc.RichText)],t.prototype,"labelText",void 0),__decorate([u(cc.Label)],t.prototype,"labelConfirm",void 0),__decorate([u(cc.Label)],t.prototype,"labelCancel",void 0),__decorate([u(cc.Node)],t.prototype,"btnConfirm",void 0),__decorate([u(cc.Node)],t.prototype,"btnCancel",void 0),__decorate([u(cc.Node)],t.prototype,"btnClose",void 0),o=__decorate([p],t)}(r.default);o.default=d,cc._RF.pop()},{"../../Game":"Game","../../global/AudioMgr":"AudioMgr","../util/ResUtil":"ResUtil","../util/StrUtil":"StrUtil","./DialogBox":"DialogBox","./WWindow":"WWindow"}],Emitter:[function(e,t,o){"use strict";cc._RF.push(t,"c6260SPqQZERrM2h09IJB5e","Emitter"),Object.defineProperty(o,"__esModule",{value:!0}),o.Emitter=void 0;var i=function(){function e(){}return e.register=function(t,o,i){e.listeners[t]||(e.listeners[t]=[]),e.listeners[t].push(new a(o,i))},e.registerOnce=function(t,o,i){e.listeners[t]||(e.listeners[t]=[]),e.listeners[t].push(new a(o,i,!0))},e.hasRegister=function(e){return this.listeners.hasOwnProperty(e)},e.remove=function(t,o,i){var a=e.listeners[t];if(a){for(var n=a.length,r=0;r<n;r++)if(a[r].compar(o,i)){a.splice(r,1);break}0==a.length&&delete e.listeners[t]}},e.fire=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var a=e.listeners[t];if(a){for(var n=a.length,r=[],s=0;s<n;s++){var l=a[s];l.notify.apply(l,o),l.once&&r.push(s)}if(r.length>0)for(var c=0,p=r;c<p.length;c++){var u=p[c];a.splice(u,1)}}},e.listeners={},e}();o.Emitter=i;var a=function(){function e(e,t,o){void 0===o&&(o=!1),this.callback=null,this.context=null,this._Once=!1,this.callback=e,this.context=t,this._Once=o}return Object.defineProperty(e.prototype,"once",{get:function(){return this._Once},enumerable:!1,configurable:!0}),e.prototype.notify=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var i=this;(e=i.callback).call.apply(e,__spreadArrays([i.context],t))},e.prototype.compar=function(e,t){return e==this.callback&&t==this.context},e}();cc._RF.pop()},{}],EnterGameWindow:[function(e,t,o){"use strict";cc._RF.push(t,"00b82WhqMpLEZHorXGXGce0","EnterGameWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/global/I18N"),n=e("../../core/Table/Table"),r=e("../../core/Table/TableHelper"),s=e("../../core/UI/Toast"),l=e("../../core/UI/WWindow"),c=e("../../core/util/StrUtil"),p=e("../../data/DataTools"),u=e("../../Game"),d=e("../../global/Const"),h=e("../../global/GameConfig"),f=e("../../sdk/SDKConst"),g=e("../UICenter"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelLevel=null,t.startBtnNode=null,t.labelFreeBooster=null,t.labelFreeTimes=null,t.labelStart=null,t.addGridAdNode=null,t.addGridCoinNode=null,t.labelAddGridCoin=null,t.lightStars=[],t.mLevel=0,t.mPlayAd=!0,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),i.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(t,o,i,s,l,p){if(e.prototype.show.call(this),this.mLevel=t,this.mIsEnterGame=!1,this.mCallback=o,this.mIsRace=i,this.mPlayAd=p,i)this.labelLevel.string=""+s;else{var u=r.TableHelper.GetField(n.eTable.eTabMap,t);if(u){var d=" "+u.chapter+" - "+u.Checkpoint;this.labelLevel.string=c.default.stringFormat(a.default.get("L10025"),d)}}this.refreshPropLabels(),this.refreshWatchTimes(),this.randomShowAddGridBtn(),this.refreshLightStars(l);var f=h.default.SDK.rewardAvailability();this.refreshAdBtn(f)},t.prototype.initLanguage=function(){this.labelFreeBooster.string=a.default.get("L20071");var e=u.Game.userData.plusChequerData,t=h.default.PlusChequerFreeTimes-e.WatchTimes;this.changeWatchTimes(t),this.labelStart.string=a.default.get("L40120"),this.labelAddGridCoin.string="x"+h.default.AddGridCost+" "+a.default.get("L20071")},t.prototype.hide=function(){e.prototype.hide.call(this),this.mCallback&&this.mCallback(this.mIsEnterGame)},t.prototype.toBack=function(){cc.log("\u8fd4\u56de toBack"),e.prototype.toBack.call(this)},t.prototype.onEnterGameClick=function(){var e=this;cc.log("EnterGameWindow onEnterGameClick:"+this.mLevel),h.default.isChallenge=this.mIsRace,p.default.enterLevel(this.startBtnNode,this.mLevel,function(t){t&&(e.mIsEnterGame=!0,e.hide())},this.mPlayAd)},t.prototype.onEnterGameClickNoAd=function(){var e=this;cc.log("EnterGameWindow onEnterGameClickNoAd:"+this.mLevel),h.default.isChallenge=this.mIsRace,p.default.enterLevel(this.startBtnNode,this.mLevel,function(t){t&&(e.mIsEnterGame=!0,e.hide())},!1)},t.prototype.refreshPropLabels=function(){},t.prototype.onPlusChequerClick=function(){var e=this,t=u.Game.userData.plusChequerData;t.WatchTimes>=h.default.PlusChequerFreeTimes?s.default.showWith(a.default.get("L10008")):u.Game.sdkPipeline.showReward(function(o){if(o){t.WatchTimes+=1,t.Timestamp=Math.floor(Date.now()/1e3),u.Game.userData.updateData(d.default.kPlusChequer,t);var i=h.default.PlusChequerFreeTimes-t.WatchTimes;e.changeWatchTimes(i),h.default.bottomNo=h.default.defaultBottomNo+1,e.onEnterGameClickNoAd()}},this,f.default.AD_PLAY_POS_START)},t.prototype.getTimestampFromString=function(e){var t=e.split(":"),o=parseInt(t[0]),i=parseInt(t[1]),a=parseInt(t[2]),n=new Date;return n.setHours(o,i,a),Math.floor(n.getTime()/1e3)},t.prototype.refreshWatchTimes=function(){var e=u.Game.userData.plusChequerData;if(e.WatchTimes){var t=this.getTimestampFromString(h.default.CommonResetClock);e.Timestamp<t&&Math.floor(Date.now()/1e3)>=t&&(e.WatchTimes=0,e.Timestamp=0,u.Game.userData.updateData(d.default.kPlusChequer,e),this.changeWatchTimes(h.default.PlusChequerFreeTimes))}},t.prototype.changeWatchTimes=function(e){cc.log(a.default.get("L40120")),this.labelFreeTimes.string=c.default.stringFormat(a.default.get("L40123"),e)},t.prototype.onAddGridByCoinClick=function(){var e=u.Game.userData.goldData;if(e.gold<h.default.AddGridCost)return s.default.showWith(a.default.get("L858")),void g.UICenter.openShopWindow();e.gold-=h.default.AddGridCost,u.Game.userData.goldData=e,h.default.bottomNo=h.default.defaultBottomNo+1,this.onEnterGameClick()},t.prototype.refreshLightStars=function(e){e>this.lightStars.length&&(e=this.lightStars.length);for(var t=0;t<this.lightStars.length;t++)this.lightStars[t].active=t<e},t.prototype.randomShowAddGridBtn=function(){this.addGridAdNode.active=!0,this.labelFreeTimes.node.active=!0,this.addGridCoinNode.active=!1},t.prototype.refreshAdBtn=function(e){if(this.addGridAdNode.active){var t=this.addGridAdNode.getComponent(cc.Button);t&&(t.interactable=e)}},__decorate([v(cc.Label)],t.prototype,"labelLevel",void 0),__decorate([v(cc.Node)],t.prototype,"startBtnNode",void 0),__decorate([v(cc.Label)],t.prototype,"labelFreeBooster",void 0),__decorate([v(cc.Label)],t.prototype,"labelFreeTimes",void 0),__decorate([v(cc.Label)],t.prototype,"labelStart",void 0),__decorate([v(cc.Node)],t.prototype,"addGridAdNode",void 0),__decorate([v(cc.Node)],t.prototype,"addGridCoinNode",void 0),__decorate([v(cc.Label)],t.prototype,"labelAddGridCoin",void 0),__decorate([v(cc.Node)],t.prototype,"lightStars",void 0),__decorate([m],t)}(l.default);o.default=_,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/Toast":"Toast","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../data/DataTools":"DataTools","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../../sdk/SDKConst":"SDKConst","../UICenter":"UICenter"}],Enum:[function(e,t,o){"use strict";cc._RF.push(t,"92897Mwf/JP7aqY16cWJgsA","Enum"),Object.defineProperty(o,"__esModule",{value:!0}),o.PayScene=o.GooglePayEvent=o.ItemFromType=o.ShopItemType=o.ShopType=o.PropType=o.MainToggleType=o.TileEvent=o.TileType=void 0,function(e){e[e.A=1]="A",e[e.B=2]="B",e[e.C=3]="C",e[e.D=4]="D",e[e.E=5]="E",e[e.F=6]="F",e[e.G=7]="G",e[e.H=8]="H",e[e.I=9]="I",e[e.J=10]="J",e[e.K=11]="K",e[e.L=12]="L",e[e.M=13]="M",e[e.N=14]="N",e[e.O=15]="O",e[e.P=16]="P",e[e.Q=17]="Q",e[e.R=18]="R",e[e.S=19]="S",e[e.T=20]="T",e[e.U=21]="U",e[e.V=22]="V",e[e.W=23]="W",e[e.X=24]="X",e[e.Y=25]="Y",e[e.Z=26]="Z",e[e.AA=27]="AA",e[e.AB=28]="AB",e[e.AC=29]="AC",e[e.AD=30]="AD",e[e.AE=31]="AE",e[e.AF=32]="AF",e[e.AG=33]="AG",e[e.AH=34]="AH",e[e.AI=35]="AI",e[e.AJ=36]="AJ"}(o.TileType||(o.TileType={})),function(e){e.TouchStart="tile_touchstart",e.TouchEnd="tile_touchend",e.TouchCancel="tile_touchcancel"}(o.TileEvent||(o.TileEvent={})),function(e){e[e.None=0]="None",e[e.Shop=1]="Shop",e[e.Event=2]="Event",e[e.Home=3]="Home",e[e.VS=4]="VS",e[e.Rank=5]="Rank"}(o.MainToggleType||(o.MainToggleType={})),function(e){e[e.PropGold=0]="PropGold",e[e.PropUndo=1]="PropUndo",e[e.PropAuto=2]="PropAuto",e[e.PropRefresh=3]="PropRefresh",e[e.PropRemoveAds=4]="PropRemoveAds",e[e.ShopPigBank=5]="ShopPigBank",e[e.PropRandom=6]="PropRandom",e[e.AdChest=7]="AdChest",e[e.PropSpin=8]="PropSpin",e[e.PropSuperSpin=9]="PropSuperSpin"}(o.PropType||(o.PropType={})),function(e){e[e.MoneyShop=1]="MoneyShop",e[e.CoinsShop=2]="CoinsShop"}(o.ShopType||(o.ShopType={})),function(e){e[e.NormalItem=1]="NormalItem",e[e.SuitItem=2]="SuitItem"}(o.ShopItemType||(o.ShopItemType={})),function(e){e[e.FromChest=0]="FromChest",e[e.FromBonus=1]="FromBonus",e[e.FromRl=2]="FromRl"}(o.ItemFromType||(o.ItemFromType={})),(o.GooglePayEvent||(o.GooglePayEvent={})).PigBank="pigbank",function(e){e[e.InLobbyShop=1]="InLobbyShop",e[e.InPiggyBank=2]="InPiggyBank",e[e.InGameShop=3]="InGameShop",e[e.InBeginnerShop=4]="InBeginnerShop",e[e.InSuperSpin=5]="InSuperSpin"}(o.PayScene||(o.PayScene={})),cc._RF.pop()},{}],FBAdManager:[function(e,t,o){"use strict";var i,a;function n(e){var t="NONE";switch(e){case a.NEW:t="NEW";break;case a.LOADING:t="LOADING";break;case a.LOADED:t="LOADED";break;case a.PLAYING:t="PLAYING"}return t}function r(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(o,i){setTimeout(function(){try{t&&t(),o()}catch(e){i(e)}},1e3*e)})]})})}cc._RF.push(t,"ace09bef7lLlYMwaSxyVE1J","FBAdManager"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.INTERSTITIAL=0]="INTERSTITIAL",e[e.REWARDED_VIDEO=1]="REWARDED_VIDEO",e[e.BANNER=2]="BANNER"}(i||(i={})),function(e){e[e.NONE=0]="NONE",e[e.NEW=1]="NEW",e[e.LOADING=2]="LOADING",e[e.LOADED=3]="LOADED",e[e.PLAYING=4]="PLAYING"}(a||(a={}));var s={code:"EXCEED_MAX_AD_INSTANCE",message:"Max AD Instance allowed: 3"},l={code:"NO_READY_AD_INSTANCE",message:"AD Instance Not Ready or Played too frequently"},c={code:"NOT_READY_FOR_LOAD",message:"Not Ready for Load"},p={code:"AD_IS_LOADING",message:"AD is Loading"},u={code:"NOT_READY_FOR_PLAYING",message:"Not Ready for Playing"},d={code:"AD_IS_PLAYING",message:"AD is Playing"},h={code:"NO_BANNER_AD",message:"No Banner Ad Instance"},f={code:"API_NOT_SUPPORT",message:"API Not Support"},g={code:"TOO_FAST_SHOW",message:"Too Fast To Show Ads"},y={code:"NOT_PLAYING",message:"Ads Not Playing"},m={code:"TOO_MANY_ERRORS",message:"Too Many Errors, Stop Next Action"};function v(e,t,o){return e&&void 0!==e[t]?e[t]:o}var _=function(){function e(e,t){this._lastShowTime=0,this._refreshInterval=0,this._refreshInterval=e>0?e:0,this._lastShowTime=0,t>0&&(this._lastShowTime=Date.now()+1e3*t-1e3*this._refreshInterval)}return e.prototype.isReadyToRefresh=function(){return this.getNextRefreshInterval()<=0},e.prototype.getNextRefreshInterval=function(){var e=0;if(this._refreshInterval>0&&this._lastShowTime>0){var t=Date.now();e=this._refreshInterval-(t-this._lastShowTime)/1e3}return e},e.prototype.updateLastShowTime=function(){this._lastShowTime=Date.now()},e}(),b=function(){function e(e,t,o,i){this._maxLoadError=0,this._errorCounter=0,this._fatalError=!1,this._sharedTimer=null,this._adId=e,this._state=a.NONE,this._type=t,this._sharedTimer=o,this._fatalError=!1,console.assert(!!o,"sharedTimer is invalid",o),this._maxLoadError=v(i,"maxLoadError",0)}return e.prototype.getStateName=function(){return n(this._state)},e.prototype.getAdTypeName=function(){return this._type==i.INTERSTITIAL?"Interstitial":this._type==i.REWARDED_VIDEO?"RewardedVideo":this._type==i.BANNER?"Banner":"UNKNOWN"},e.prototype.getInfo=function(){return"["+this.getAdTypeName()+":"+this._adId+":"+this.getStateName()+"]"},e.prototype.isReadyToRefresh=function(){return this._sharedTimer.isReadyToRefresh()},e.prototype.getNextRefreshInterval=function(){return this._sharedTimer.getNextRefreshInterval()},e.prototype.updateLastShowTime=function(){this._sharedTimer.updateLastShowTime()},e.prototype.increaseErrorCounter=function(){this._errorCounter++},e.prototype.resetErrorCounter=function(){this._errorCounter=0},e.prototype.setFatalError=function(){this._fatalError=!0},e.prototype.isErrorTooMany=function(){return this._fatalError||this._maxLoadError>0&&this._errorCounter>=this._maxLoadError},e}(),T=function(e){function t(t,o,i,a){var n=e.call(this,t,o,i,a)||this;return n._adInstance=null,n._autoLoadOnPlay=v(a,"autoLoadOnPlay",!1),n}return __extends(t,e),t.prototype.loadAsync=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o,i=this;return __generator(this,function(n){switch(n.label){case 0:return null!=this._adInstance?[3,4]:this._state!=a.NONE?[3,2]:(this._state=a.NEW,console.log("Get Ad Instance: "+this.getInfo()),e=this,[4,this.createAdInstanceAsync(this._adId)]);case 1:return e._adInstance=n.sent(),[3,3];case 2:return console.log("Ad Instance is still creating: "+this.getInfo()),[2];case 3:return[3,4];case 4:if(this._state!=a.NEW)throw console.log("Not ready for preload: "+this.getInfo()),this._state==a.LOADING?(console.log("Ad is loading, do not reload"+this.getInfo()),p):c;if(this.isErrorTooMany())throw console.log("Too many errors, stop loading: "+this.getInfo()),m;n.label=5;case 5:return n.trys.push([5,7,,8]),this._state=a.LOADING,console.log("Start Loading: "+this.getInfo()),[4,this._adInstance.loadAsync()];case 6:return n.sent(),this._state=a.LOADED,this.resetErrorCounter(),console.log("Loading Success: "+this.getInfo()),[2,!0];case 7:throw t=n.sent(),console.error("Loading Failed: "+this.getInfo(),t),"ADS_NO_FILL"==t.code?(console.error("Ads Not Fill, stop loading: "+this.getInfo()),this.setFatalError()):(this.increaseErrorCounter(),this._state=a.NEW,o=10*this._errorCounter+1,console.log("Reload after "+o+" seconds: "+this.getInfo()),r(o,this.loadAsync.bind(this)).catch(function(e){console.info("Reload failed: "+i.getInfo(),e)})),t;case 8:return console.log("end  loadAsync"),[2]}})})},t.prototype.isReady=function(){return null!=this._adInstance&&this._state==a.LOADED},t.prototype.showAsync=function(e){return __awaiter(this,void 0,void 0,function(){var t,o=this;return __generator(this,function(i){switch(i.label){case 0:if(!this.isReady())throw console.log("Not Ready for play: "+this.getInfo()),this._state==a.PLAYING?d:u;if(!this.isReadyToRefresh())throw console.log("Play too frequently, wait for "+this.getNextRefreshInterval()+" seconds: "+this.getInfo()),g;i.label=1;case 1:return i.trys.push([1,3,,4]),this._state=a.PLAYING,console.log("Play Ads: "+this.getInfo()),e&&e(),[4,this._adInstance.showAsync()];case 2:return i.sent(),console.log("Play Success: "+this.getInfo()),this._adInstance=null,this._state=a.NONE,this.updateLastShowTime(),this._autoLoadOnPlay&&(console.log("Reload after 1 seconds: "+this.getInfo()),r(1,this.loadAsync.bind(this)).catch(function(e){console.info("Reload failed: "+o.getInfo(),e)})),[2,!0];case 3:throw t=i.sent(),console.log("Play Failed: "+this.getInfo(),t),"RATE_LIMITED"==t.code?this._state=a.LOADED:(this._adInstance=null,this._state=a.NONE,this._autoLoadOnPlay&&(console.log("Reload after 1 seconds: "+this.getInfo()),r(1,this.loadAsync.bind(this)).catch(function(e){console.info("Reload Failed: "+o.getInfo(),e)}))),t;case 4:return[2]}})})},t}(b),C=function(e){function t(t,o,a){return e.call(this,t,i.INTERSTITIAL,o,a)||this}return __extends(t,e),t.prototype.createAdInstanceAsync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,FBInstant.getInterstitialAdAsync(this._adId)];case 1:return[2,e.sent()]}})})},t}(T),S=function(e){function t(t,o,a){return e.call(this,t,i.REWARDED_VIDEO,o,a)||this}return __extends(t,e),t.prototype.createAdInstanceAsync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,FBInstant.getRewardedVideoAsync(this._adId)];case 1:return[2,e.sent()]}})})},t}(T),I=function(e){function t(t,o,a){return e.call(this,t,i.BANNER,o,a)||this}return __extends(t,e),t.prototype.showAsync=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if(!this.isReadyToRefresh())throw console.log("Play too frequently, wait for "+this.getNextRefreshInterval()+" seconds: "+this.getInfo()),g;if(this.isErrorTooMany())throw console.log("Too many errors, stop: "+this.getInfo()),m;if(this._state==a.LOADING)throw console.info("Banner is loading, wait for it: "+this.getInfo()),p;t.label=1;case 1:return t.trys.push([1,3,,4]),this._state=a.LOADING,console.log("Show Banner: "+this.getInfo()),[4,FBInstant.loadBannerAdAsync(this._adId)];case 2:return t.sent(),this._state=a.PLAYING,console.log("Show Banner Success: "+this.getInfo()),this.updateLastShowTime(),this.resetErrorCounter(),[3,4];case 3:throw e=t.sent(),console.error("Show Banner Failed: "+this.getInfo(),e),"RATE_LIMITED"==e.code?this._state=a.NONE:"ADS_NO_FILL"==e.code?(console.error("Ads Not Fill, Stop: "+this.getInfo()),this.setFatalError()):(this.increaseErrorCounter(),this._state=a.NONE),e;case 4:return[2]}})})},t.prototype.hideAsync=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if(this._state!=a.PLAYING)throw console.log("No Banner Playing: "+this.getInfo()),y;t.label=1;case 1:return t.trys.push([1,3,,4]),console.log("Hide Banner: "+this.getInfo()),[4,FBInstant.hideBannerAdAsync()];case 2:return t.sent(),this._state=a.NONE,[3,4];case 3:throw e=t.sent(),console.error("Hide Banner Failed: "+this.getInfo(),e),e;case 4:return[2]}})})},t}(b),D=function(){function e(){}return e.getVersion=function(){return"1.0.4"},e.addInterstitial=function(e,t){void 0===t&&(t=3),null==this._interstitialTimer&&(this._interstitialTimer=new _(this.defaultInterstitialTimerOption.refreshInterval,this.defaultInterstitialTimerOption.delayForFirstAd));for(var o=0;o<t;o++){if(this._interstitialAds.length>=3)throw console.log("Fail to add interstitial, too many instances: "+this._interstitialAds.length,e),s;var i=new C(e,this._interstitialTimer,this.defaultInterstitialOption);this._interstitialAds.push(i),console.log("Add Interstitial: "+e,"count: "+this._interstitialAds.length)}return this._interstitialAds.length},e.addRewardedVideo=function(e,t){void 0===t&&(t=3),null==this._rewardedVideoTimer&&(this._rewardedVideoTimer=new _(this.defaultRewardedVideoTimerOption.refreshInterval,this.defaultRewardedVideoTimerOption.delayForFirstAd));for(var o=0;o<t;o++){if(this._rewardedVideos.length>=3)throw console.log("Fail to add RewardedVideo, too many instances: "+this._rewardedVideos.length,e),s;var i=new S(e,this._rewardedVideoTimer,this.defaultRewardedVideoOption);this._rewardedVideos.push(i),console.log("Add RewardedVideo: "+e,"count: "+this._rewardedVideos.length)}return this._rewardedVideos.length},e.addBanner=function(e){null==this._bannerTimer&&(this._bannerTimer=new _(this.defaultBannerTimerOption.refreshInterval,this.defaultBannerTimerOption.delayForFirstAd));var t=new I(e,this._bannerTimer,this.defaultBannerOption);return this._banners.push(t),console.log("Add Banner: "+e,"count: "+this._banners.length),t},e.loadAll=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadAllAsync()];case 1:return[2,e.sent()]}})})},e.loadAllAsync=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o,i;return __generator(this,function(a){switch(a.label){case 0:console.log("FBAdManager Version: "+this.getVersion()),console.log("Init Ads Queue"),t=0,a.label=1;case 1:return t<this._rewardedVideos.length?(o=this._rewardedVideos[t],t>0?[4,r(.1)]:[3,3]):[3,7];case 2:a.sent(),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,o.loadAsync()];case 4:return a.sent(),[3,6];case 5:return e=a.sent(),console.log("loadAllAsync error :"+e),[3,6];case 6:return t++,[3,1];case 7:t=0,a.label=8;case 8:return t<this._interstitialAds.length?(o=this._interstitialAds[t],t>0?[4,r(.1)]:[3,10]):[3,14];case 9:a.sent(),a.label=10;case 10:return a.trys.push([10,12,,13]),[4,o.loadAsync()];case 11:return a.sent(),[3,13];case 12:return i=a.sent(),console.log("loadAllAsync error :"+i),[3,13];case 13:return t++,[3,8];case 14:return console.log("end loadAllAsync"),[2]}})})},e._isAdReady=function(e){for(var t=e==i.INTERSTITIAL?this._interstitialAds:this._rewardedVideos,o=!1,a=0;a<t.length;a++){var n=t[a];if(n.isReady()&&n.isReadyToRefresh()){o=!0;break}}return o},e._showAsync=function(e,t){for(var o=e==i.INTERSTITIAL?this._interstitialAds:this._rewardedVideos,a=null,n=0;n<o.length;n++){var r=o[n];if(r.isReady()&&r.isReadyToRefresh()){a=r;break}}if(null!=a)return a.showAsync(t);throw l},e._getAdTimer=function(e){return e==i.INTERSTITIAL?this._interstitialTimer:e==i.REWARDED_VIDEO?this._rewardedVideoTimer:this._bannerTimer},e.isInterstitialAdReady=function(){return this._isAdReady(i.INTERSTITIAL)},e.showInterstitialAd=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._showAsync(i.INTERSTITIAL,e)];case 1:return[2,t.sent()]}})})},e.isRewardedVideoReady=function(){return this._isAdReady(i.REWARDED_VIDEO)},e.showRewardedVideo=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._showAsync(i.REWARDED_VIDEO,e)];case 1:return[2,t.sent()]}})})},e.checkApiSupport=function(e){return FBInstant.getSupportedAPIs().indexOf(e)>=0},e.isBannerSupport=function(){return void 0===this._bannerSupport&&(this._bannerSupport=this.checkApiSupport("loadBannerAdAsync")),this._bannerSupport},e.isBannerReady=function(){if(this._banners.length<=0)throw h;return this._banners[0].isReadyToRefresh()},e.showBannerAsync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isBannerSupport())throw f;if(this._banners.length<=0)throw h;return[4,this._banners[0].showAsync()];case 1:return[2,e.sent()]}})})},e.hideBannerAsync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isBannerSupport())throw f;if(this._banners.length<=0)throw h;return[4,this._banners[0].hideAsync()];case 1:return[2,e.sent()]}})})},e.getLocale=function(){return FBInstant.getLocale()},e._interstitialAds=[],e._rewardedVideos=[],e._banners=[],e._interstitialTimer=null,e._rewardedVideoTimer=null,e._bannerTimer=null,e._bannerSupport=void 0,e.defaultInterstitialOption={autoLoadOnPlay:!0,maxLoadError:3},e.defaultRewardedVideoOption={autoLoadOnPlay:!0,maxLoadError:3},e.defaultBannerOption={autoLoadOnPlay:!0,maxLoadError:1},e.defaultInterstitialTimerOption={refreshInterval:40,delayForFirstAd:30},e.defaultRewardedVideoTimerOption={refreshInterval:0,delayForFirstAd:0},e.defaultBannerTimerOption={refreshInterval:40,delayForFirstAd:0},e}();o.default=D,cc._RF.pop()},{}],FacebookSDK:[function(e,t,o){"use strict";cc._RF.push(t,"43b34FEP2hL7a6zDEFSYUnY","FacebookSDK"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../global/GameConfig"),a=e("../SDKConst"),n=e("./FBAdManager"),r=function(){function e(){this.isBannerShow=!1}return e.prototype.addInterstitial=function(){try{var e=n.default.addInterstitial("4864743603539728_5324943400853077",3);console.log("add interstitial, count: "+e)}catch(t){console.log("add interstitial, error: "+t.message)}},e.prototype.addRewardedVideo=function(){try{var e=n.default.addRewardedVideo("4864743603539728_5324944030853014",3);console.log("add video, count: "+e)}catch(t){console.log("add video, error: "+t.message)}},e.prototype.addBanner=function(){n.default.addBanner("4864743603539728_5324942390853178")},e.prototype.initAds=function(){var e=this;n.default.loadAll().then(function(){e.isBannerShow&&e.showBanner()}),console.log("add all video")},e.prototype.showBanner=function(){n.default.showBannerAsync().then(function(){console.log("show Banner success")}).catch(function(e){console.log("show banner failed: "+e.message)})},e.prototype.hideBanner=function(){n.default.hideBannerAsync().then(function(){console.log("hide banner success")}).catch(function(e){console.log("hide banner failed: "+e.message)})},e.prototype.getLocale=function(){return n.default.getLocale()},e.prototype.addPushMessage=function(e,t){console.log("add push message",e,t)},e.prototype.setOrientation=function(e){console.log("mobile only! type=",e),1==e?cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT):2==e?cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE):cc.view.setOrientation(cc.macro.ORIENTATION_AUTO)},e.prototype.logEvent=function(e){cc.log("\u8c03\u7528 logEvent\uff01"+e)},e.prototype.getAFStatus=function(){return 1},e.prototype.setAdUid=function(){},e.prototype.ADisLoaded=function(e){return void 0===e&&(e=a.default.AD_TYPE_REWARD),!0},e.prototype.initAD=function(){this.addInterstitial(),this.addRewardedVideo(),this.addBanner(),this.initAds()},e.prototype.loadAD=function(e,t){void 0===t&&(t=a.default.AD_TYPE_REWARD)},e.prototype.showInterstitial=function(e,t,o){console.log("try show interstitial"),n.default.showInterstitialAd(function(){e&&e.call(o,!0)}).then(function(){console.log("show interstitial success"),t&&t.call(o)}).catch(function(t){console.log("show interstitial failed: "+t.message),e&&e.call(o,!1)})},e.prototype.showReward=function(e,t,o){if(console.log("try show video"),!n.default.isRewardedVideoReady())return e&&e.call(o,!0),void(t&&t.call(o,!0));n.default.showRewardedVideo(function(){e&&e.call(o,!0)}).then(function(){console.log("show video success"),t&&t.call(o,!0)}).catch(function(t){console.log("show video failed: "+t.message),e&&e.call(o,!1)})},e.prototype.displayBannerAD=function(e){this.isBannerShow=e,e?this.showBanner():this.hideBanner()},e.prototype.hasBannerAD=function(){return!0},e.prototype.rewardAvailability=function(){return!0},e.prototype.SDKCallBack=function(){},e.prototype.getLocal=function(){try{return n.default.getLocale()}catch(e){return console.error(e),navigator.language}},e.prototype.getData=function(t,o,i){var a=cc.sys.localStorage.getItem(e.localStorageKey),n=a?JSON.parse(a):{};if(t){for(var r={},s=0,l=t;s<l.length;s++){var c=l[s];r[c]=n[c]}o.call(i,r)}else o.call(i,n)},e.prototype.setData=function(t){var o=cc.sys.localStorage.getItem(e.localStorageKey),i=o?JSON.parse(o):{};for(var a in t)i[a]=t[a];cc.sys.localStorage.setItem(e.localStorageKey,JSON.stringify(i))},e.prototype.showRateDialog=function(){},e.prototype.getIsRated=function(){return!1},e.prototype.getVersion=function(){return i.default.VERSION},e.prototype.smbCommand=function(){},e.localStorageKey="game_MD_2",e}();o.default=r,cc._RF.pop()},{"../../global/GameConfig":"GameConfig","../SDKConst":"SDKConst","./FBAdManager":"FBAdManager"}],FitOrientaionLayout:[function(e,t,o){"use strict";cc._RF.push(t,"c546bvcYXtFgpN/CQmNUzm8","FitOrientaionLayout"),Object.defineProperty(o,"__esModule",{value:!0}),o.LayoutData=void 0;var i=e("../global/Emitter"),a=e("./Orientation"),n=e("../../global/Const"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(){function e(){this.paddingLeft=0,this.paddingRight=0,this.paddingTop=0,this.paddingBottom=0,this.spacingX=0,this.spacingY=0}return __decorate([l(cc.Float)],e.prototype,"paddingLeft",void 0),__decorate([l(cc.Float)],e.prototype,"paddingRight",void 0),__decorate([l(cc.Float)],e.prototype,"paddingTop",void 0),__decorate([l(cc.Float)],e.prototype,"paddingBottom",void 0),__decorate([l(cc.Float)],e.prototype,"spacingX",void 0),__decorate([l(cc.Float)],e.prototype,"spacingY",void 0),__decorate([s("LayoutData")],e)}();o.LayoutData=c;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.portrait=new c,t.landscape=new c,t}return __extends(t,e),t.prototype.onLoad=function(){this.layout||(this.layout=this.getComponent(cc.Layout)),this.onOrientationChanged(a.default.current.isPortrait),i.Emitter.register(n.default.eOrientationChanged,this.onOrientationChanged,this)},t.prototype.onDestroy=function(){i.Emitter.remove(n.default.eOrientationChanged,this.onOrientationChanged,this)},t.prototype.onOrientationChanged=function(e){this.layout&&(e?this.setLayoutData(this.portrait):this.setLayoutData(this.landscape))},t.prototype.setLayoutData=function(e){this.layout.paddingLeft=e.paddingLeft,this.layout.paddingRight=e.paddingRight,this.layout.paddingTop=e.paddingTop,this.layout.paddingBottom=e.paddingBottom,this.layout.spacingX=e.spacingX,this.layout.spacingY=e.spacingY},__decorate([l(cc.Layout)],t.prototype,"layout",void 0),__decorate([l(c)],t.prototype,"portrait",void 0),__decorate([l(c)],t.prototype,"landscape",void 0),__decorate([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../global/Const":"Const","../global/Emitter":"Emitter","./Orientation":"Orientation"}],FitOrientaionScale:[function(e,t,o){"use strict";cc._RF.push(t,"7bcd4WU+4NKdZmJce+7CYme","FitOrientaionScale"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Orientation"),a=e("../global/Emitter"),n=e("../../global/Const"),r=e("../../Game"),s=cc._decorator,l=s.ccclass,c=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.portrait=new cc.Vec2,t.landscape=new cc.Vec2,t.landReverseUIScale=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.hideLandscape(i.default.current.isPortrait),a.Emitter.register(n.default.eOrientationChanged,this.hideLandscape,this)},t.prototype.onDestroy=function(){a.Emitter.remove(n.default.eOrientationChanged,this.hideLandscape,this)},t.prototype.hideLandscape=function(e){e?(this.node.scaleX=this.portrait.x,this.node.scaleY=this.portrait.y):this.landReverseUIScale?(this.node.scaleX=this.landscape.x/r.Game.uiMgr.uiRoot.scale,this.node.scaleY=this.landscape.y/r.Game.uiMgr.uiRoot.scale):(this.node.scaleX=this.landscape.x,this.node.scaleY=this.landscape.y)},__decorate([c(cc.Vec2)],t.prototype,"portrait",void 0),__decorate([c(cc.Vec2)],t.prototype,"landscape",void 0),__decorate([c(cc.Boolean)],t.prototype,"landReverseUIScale",void 0),__decorate([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../global/Const":"Const","../global/Emitter":"Emitter","./Orientation":"Orientation"}],FitOrientationActive:[function(e,t,o){"use strict";cc._RF.push(t,"f14benImV9BPLtVnvbkPu71","FitOrientationActive"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Orientation"),a=e("../global/Emitter"),n=e("../../global/Const"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.landscapeHideNodes=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.hideLandscape(i.default.current.isPortrait),a.Emitter.register(n.default.eOrientationChanged,this.hideLandscape,this)},t.prototype.onDestroy=function(){a.Emitter.remove(n.default.eOrientationChanged,this.hideLandscape,this)},t.prototype.hideLandscape=function(e){if(this.landscapeHideNodes)for(var t=0,o=this.landscapeHideNodes;t<o.length;t++)o[t].active=e},__decorate([l(cc.Node)],t.prototype,"landscapeHideNodes",void 0),__decorate([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../global/Const":"Const","../global/Emitter":"Emitter","./Orientation":"Orientation"}],FitOrientationSize:[function(e,t,o){"use strict";cc._RF.push(t,"1e19047rT1FNIpO1qlzvs2d","FitOrientationSize"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Orientation"),a=e("../global/Emitter"),n=e("../../global/Const"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.portraitSize=null,t.landscapeSize=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.onOrientationChanged(i.default.current.isPortrait),a.Emitter.register(n.default.eOrientationChanged,this.onOrientationChanged,this)},t.prototype.onDestroy=function(){a.Emitter.remove(n.default.eOrientationChanged,this.onOrientationChanged,this)},t.prototype.onOrientationChanged=function(e){e?(this.node.width=this.portraitSize.width,this.node.height=this.portraitSize.height):(this.node.width=this.landscapeSize.width,this.node.height=this.landscapeSize.height)},__decorate([l(cc.Size)],t.prototype,"portraitSize",void 0),__decorate([l(cc.Size)],t.prototype,"landscapeSize",void 0),__decorate([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../global/Const":"Const","../global/Emitter":"Emitter","./Orientation":"Orientation"}],FitOrientationWidget:[function(e,t,o){"use strict";cc._RF.push(t,"b36084mk65Cnq2SILJlj5oH","FitOrientationWidget"),Object.defineProperty(o,"__esModule",{value:!0}),o.WidgetData=void 0;var i=e("./Orientation"),a=e("../global/Emitter"),n=e("../../global/Const"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(){function e(){this.isAlignTop=!1,this.top=0,this.isAlignBottom=!1,this.bottom=0,this.isAlignLeft=!1,this.left=0,this.isAlignRight=!1,this.right=0}return __decorate([l(cc.Boolean)],e.prototype,"isAlignTop",void 0),__decorate([l(cc.Float)],e.prototype,"top",void 0),__decorate([l(cc.Boolean)],e.prototype,"isAlignBottom",void 0),__decorate([l(cc.Float)],e.prototype,"bottom",void 0),__decorate([l(cc.Boolean)],e.prototype,"isAlignLeft",void 0),__decorate([l(cc.Float)],e.prototype,"left",void 0),__decorate([l(cc.Boolean)],e.prototype,"isAlignRight",void 0),__decorate([l(cc.Float)],e.prototype,"right",void 0),__decorate([s("WidgetData")],e)}();o.WidgetData=c;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widget=null,t.portrait=new c,t.landscape=new c,t}return __extends(t,e),t.prototype.onLoad=function(){this.widget||(this.widget=this.getComponent(cc.Widget)),this.onOrientationChanged(i.default.current.isPortrait),a.Emitter.register(n.default.eOrientationChanged,this.onOrientationChanged,this)},t.prototype.onDestroy=function(){a.Emitter.remove(n.default.eOrientationChanged,this.onOrientationChanged,this)},t.prototype.onOrientationChanged=function(e){this.widget&&(e?this.setWidgetData(this.portrait):this.setWidgetData(this.landscape))},t.prototype.setWidgetData=function(e){this.widget.isAlignTop=e.isAlignTop,this.widget.top=e.top,this.widget.isAlignBottom=e.isAlignBottom,this.widget.bottom=e.bottom,this.widget.isAlignLeft=e.isAlignLeft,this.widget.left=e.left,this.widget.isAlignRight=e.isAlignRight,this.widget.right=e.right},__decorate([l(cc.Widget)],t.prototype,"widget",void 0),__decorate([l(c)],t.prototype,"portrait",void 0),__decorate([l(c)],t.prototype,"landscape",void 0),__decorate([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../global/Const":"Const","../global/Emitter":"Emitter","./Orientation":"Orientation"}],FreePropWindow:[function(e,t,o){"use strict";cc._RF.push(t,"5d826bu8EJGbIBWrynBzuh+","FreePropWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/global/I18N"),n=e("../../core/UI/WWindow"),r=e("../../Game"),s=e("../../game/BoxOpenSystem"),l=e("../../game/type/Enum"),c=e("../../global/GameConfig"),p=e("../../sdk/LogEvent"),u=e("../../sdk/SDKConst"),d=cc._decorator,h=d.ccclass,f=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propFrames=[],t.propSp=null,t.labelTitle=null,t.lableDesc=null,t.labelBtn=null,t.btnAd=null,t.mPropType=l.PropType.PropUndo,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),i.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(t){e.prototype.show.call(this),this.mPropType=t,this.showPropSp(),this.labelTitle.string=this.getTitleString(),this.lableDesc.string=this.getDescString(),this.btnAd.interactable=c.default.SDK.rewardAvailability(),p.default.dotAdPv(u.default.AD_PLAY_POS_TREASUREBOX)},t.prototype.initLanguage=function(){this.labelBtn.string=a.default.get("L40041")},t.prototype.getIcon=function(e){return e==l.PropType.PropUndo?this.propFrames[0]:e==l.PropType.PropAuto?this.propFrames[1]:e==l.PropType.PropRefresh?this.propFrames[2]:(console.log("[GainItemWindow],prop type error,",e),null)},t.prototype.showPropSp=function(){var e=this.getIcon(this.mPropType);e&&(this.propSp.spriteFrame=e)},t.prototype.getTitleString=function(){var e="";return this.mPropType==l.PropType.PropUndo?e=a.default.get("L40051"):this.mPropType==l.PropType.PropAuto?e=a.default.get("L40052"):this.mPropType==l.PropType.PropRefresh&&(e=a.default.get("L40053")),e},t.prototype.getDescString=function(){var e="";return this.mPropType==l.PropType.PropUndo?e=a.default.get("L40054"):this.mPropType==l.PropType.PropAuto?e=a.default.get("L40055"):this.mPropType==l.PropType.PropRefresh&&(e=a.default.get("L40056")),e},t.prototype.onFreeClaimClick=function(){var e=this;r.Game.sdkPipeline.showReward(function(t){if(t){var o=[new s.Prop(e.mPropType,1)];e.gainProp(o),e.hide()}},this,u.default.AD_PLAY_POS_TREASUREBOX)},t.prototype.gainProp=function(e){for(var t=r.Game.userData.goldData,o=0,i=e;o<i.length;o++){var a=i[o];switch(a.propType){case l.PropType.PropUndo:t.propUndo+=a.propNum;break;case l.PropType.PropAuto:t.propAuto+=a.propNum;break;case l.PropType.PropRefresh:t.propRefresh+=a.propNum;break;default:console.log("[],propType error",a.propType)}}r.Game.userData.goldData=t},t.prototype.refreshAdBtn=function(e){this.btnAd.interactable=e},__decorate([f(cc.SpriteFrame)],t.prototype,"propFrames",void 0),__decorate([f(cc.Sprite)],t.prototype,"propSp",void 0),__decorate([f(cc.Label)],t.prototype,"labelTitle",void 0),__decorate([f(cc.Label)],t.prototype,"lableDesc",void 0),__decorate([f(cc.Label)],t.prototype,"labelBtn",void 0),__decorate([f(cc.Button)],t.prototype,"btnAd",void 0),__decorate([h],t)}(n.default);o.default=g,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../game/BoxOpenSystem":"BoxOpenSystem","../../game/type/Enum":"Enum","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst"}],GainItemWindow:[function(e,t,o){"use strict";cc._RF.push(t,"17280ne3lROCboXBa1QhGNg","GainItemWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/UI/WWindow"),a=e("../../Game"),n=e("../../core/global/I18N"),r=e("../../global/AudioMgr"),s=e("../../game/type/Enum"),l=e("../../sdk/SDKConst"),c=e("./content/ItemGoldContent"),p=e("../../sdk/LogEvent"),u=e("../../global/GameConfig"),d=e("../../core/global/Emitter"),h=cc._decorator,f=h.ccclass,g=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.goldPrefab=null,t.itemParent=null,t.labelDouble=null,t.labelClaim=null,t.labelClaimNormal=null,t.btnNodeDouble=null,t.btnNodeClaim=null,t.btnNormal=null,t.nodeEffect=null,t.nodeBox=null,t.nodeBtns=null,t.mProps=null,t.mDouble=!1,t.mItemPool=[],t.mCurrentItems=[],t.itemPosY=[409,226],t.btnsPosY=[-500.4,-407.9],t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),d.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(t,o,i,a,n){e.prototype.show.call(this),this.mComplete=o,this.mProps=t,this.mDouble=!1,this.mEnterGame=n,this.updateItemsPosition(a),this.updateBtnsPosition(a),this.nodeBox.active=0==a,this.showBtns(i),this.refreshItems();var s=u.default.SDK.rewardAvailability();this.refreshAdBtn(s),r.AudioMgr.playEffect("get_bouns"),p.default.dotAdPv(l.default.AD_PLAY_POS_GIFTBOX)},t.prototype.initLanguage=function(){this.labelDouble.string=n.default.get("L40101")+" x2",this.labelClaim.string=n.default.get("L40101"),this.labelClaimNormal.string=n.default.get("L40101")},t.prototype.onConfirmClick=function(){this.toBack()},t.prototype.hide=function(){this.removeNodes(),e.prototype.hide.call(this),this.mComplete&&this.mComplete(this.mDouble),this.mEnterGame&&this.mEnterGame()},t.prototype.refreshItems=function(){for(var e=0,t=this.mProps;e<t.length;e++){var o=t[e],i=o.propType==s.PropType.PropGold?0:1,a=this.getItemFromPools(i);a.setContent(o),this.mCurrentItems.push(a),a.node.setParent(this.itemParent)}},t.prototype.removeNodes=function(){for(var e=0,t=this.mCurrentItems;e<t.length;e++){var o=t[e];this.mItemPool.push(o),o.node.removeFromParent(!1)}this.mCurrentItems=[]},t.prototype.onClaimClick=function(){console.log("onClaimClick"),this.hide()},t.prototype.onClaimDoubleClick=function(){var e=this;a.Game.sdkPipeline.showReward(function(t){t&&(e.mDouble=!0,e.hide())},this,l.default.AD_PLAY_POS_GIFTBOX)},t.prototype.showBtns=function(e){var t=this;this.btnNodeDouble.active=e,e?(this.btnNodeClaim.active=!1,setTimeout(function(){t.btnNodeClaim.active=!0},1500)):this.btnNodeClaim.active=!1,this.btnNormal.active=!e},t.prototype.updateItemsPosition=function(e){e==s.ItemFromType.FromChest?this.itemParent.y=this.itemPosY[0]:this.itemParent.y=this.itemPosY[1],this.nodeEffect.y=this.itemParent.y},t.prototype.updateBtnsPosition=function(e){e==s.ItemFromType.FromChest?this.nodeBtns.y=this.btnsPosY[0]:this.nodeBtns.y=this.btnsPosY[1]},t.prototype.getItemFromPools=function(e){var t=null,o=this.mItemPool.findIndex(function(t){return t.itemType==e});return-1!=o?(t=this.mItemPool[o],this.mItemPool.splice(o,1)):t=(1==e?cc.instantiate(this.itemPrefab):cc.instantiate(this.goldPrefab)).getComponent(c.default),t},t.prototype.refreshAdBtn=function(e){if(this.btnNodeDouble.active){var t=this.btnNodeDouble.getComponent(cc.Button);t&&(t.interactable=e)}},__decorate([g(cc.Prefab)],t.prototype,"itemPrefab",void 0),__decorate([g(cc.Prefab)],t.prototype,"goldPrefab",void 0),__decorate([g(cc.Node)],t.prototype,"itemParent",void 0),__decorate([g(cc.Label)],t.prototype,"labelDouble",void 0),__decorate([g(cc.Label)],t.prototype,"labelClaim",void 0),__decorate([g(cc.Label)],t.prototype,"labelClaimNormal",void 0),__decorate([g(cc.Node)],t.prototype,"btnNodeDouble",void 0),__decorate([g(cc.Node)],t.prototype,"btnNodeClaim",void 0),__decorate([g(cc.Node)],t.prototype,"btnNormal",void 0),__decorate([g(cc.Node)],t.prototype,"nodeEffect",void 0),__decorate([g(cc.Node)],t.prototype,"nodeBox",void 0),__decorate([g(cc.Node)],t.prototype,"nodeBtns",void 0),__decorate([f],t)}(i.default);o.default=y,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../game/type/Enum":"Enum","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst","./content/ItemGoldContent":"ItemGoldContent"}],GameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"7e8905/e1hPBpCwuOumij2E","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../sdk/AndroidSDK"),a=e("../sdk/DefaultSDK"),n=e("../sdk/IOSSDK"),r=e("../pay/AndroidPaySDK"),s=e("../pay/DefaultPaySDK"),l=e("../sdk/fbplugin/FacebookSDK"),c=cc._decorator.ccclass,p=function(){function e(){}return Object.defineProperty(e,"SDK",{get:function(){return null==this.mSDK&&(cc.sys.isBrowser?this.useFacebookSDK?this.mSDK=new l.default:this.mSDK=new a.default:cc.sys.os===cc.sys.OS_IOS?this.mSDK=new n.default:cc.sys.os===cc.sys.OS_ANDROID?this.mSDK=new i.default:this.useFacebookSDK?this.mSDK=new l.default:this.mSDK=new a.default),this.mSDK},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PAYSDK",{get:function(){return null==this.mPaySDK&&(cc.sys.isBrowser?this.mPaySDK=new s.default:cc.sys.os===cc.sys.OS_IOS?this.mPaySDK=new s.default:cc.sys.os===cc.sys.OS_ANDROID?this.mPaySDK=new r.default:this.mPaySDK=new s.default),this.mPaySDK},enumerable:!1,configurable:!0}),e.TEST=!1,e.VERSION="1.0.0",e.useFacebookSDK=!0,e.mSDK=null,e.mPaySDK=null,e.row=0,e.col=0,e.size=112,e.guidesize=90,e.spacing=0,e.padding=0,e.layersTotalNo=0,e.blockCoinNo=3,e.randomMaxCoin=12,e.randomMinCoin=5,e.defaultBottomNo=7,e.bottomNo=7,e.bottomSquareNo=8,e.maxSignInDay=3,e.chalfHeight=480,e.chalfWidth=480,e.maxno=8,e.types=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36],e.SuccRewardGold=150,e.MaxLevelNumber=1599,e.rlone=10,e.rltow=20,e.rlthree=30,e.MaxRaceNumber=3900,e.advertTime=20,e.MaxStarNumber=3,e.MaxStarTime=80,e.MinStarTime=20,e.BetweenStarTime=50,e.AddStarTime=5,e.LastTime=100,e.isChallenge=!1,e.ItemCost=100,e.ShopWatchReward=100,e.ShopWatchLimit=10,e.ShopWatchResetClock="00:00:00",e.ShopWatchCD=120,e.GiftBoxRandomTimes=[2,3],e.TreasureBoxRandomTimes=1,e.ClaimRewardDelayTime=1.5,e.CollectStarTarget=20,e.PropPosition=[-236,-65],e.ClaimRewardMultiple=2,e.BonusRotateDuration=1.2,e.PlusChequerFreeTimes=5,e.CommonResetClock="00:00:00",e.BonusFreeTime=5,e.BonusMagnificationStep=.5,e.BonusMagnificationCost=150,e.BonusMagnificationLimit=3,e.PropShowLimit=99,e.AddGridCost=300,e.BuyPropCost=100,e.ReviveCost=300,e.PigMinCoins=1e3,e.PigMaxCoins=1500,e.PigWatchAdCount=15,e.GuideLevel=[0,2,1,3],e.OpenDailyLevel=5,e.DailyLevelTest=!1,__decorate([c],e)}();o.default=p,window.GameConfig=p,cc._RF.pop()},{"../pay/AndroidPaySDK":"AndroidPaySDK","../pay/DefaultPaySDK":"DefaultPaySDK","../sdk/AndroidSDK":"AndroidSDK","../sdk/DefaultSDK":"DefaultSDK","../sdk/IOSSDK":"IOSSDK","../sdk/fbplugin/FacebookSDK":"FacebookSDK"}],GameMgr:[function(e,t,o){"use strict";cc._RF.push(t,"2115eMaqcpENI/DeoJub4FJ","GameMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameMgr=o.GameType=void 0;var i=e("./../sdk/MibData"),a=e("../Game"),n=e("../data/DataTools"),r=e("../global/AudioMgr"),s=e("../sdk/LogEvent"),l=e("../view/UICenter"),c=e("./GameSucc"),p=e("./Stage"),u=e("./StageView"),d=e("../core/global/I18N"),h=e("../core/global/Emitter"),f=e("../global/Const"),g=e("../view/window/StageWindow"),y=e("../sdk/SDKConst"),m=e("./manager/TileManager"),v=e("../global/GameConfig"),_=e("../core/UI/Toast"),b=e("../core/Table/TableHelper"),T=e("../core/Table/Table"),C=e("./type/Enum");(function(e){e[e.Random=0]="Random",e[e.Normal=1]="Normal",e[e.Daliy=2]="Daliy",e[e.Arcade=3]="Arcade"})(o.GameType||(o.GameType={}));var S=function(){function e(){this.mStage=null,this.mStageUI=null,this.mGameSucc=null,this.DaliyInfo=[null,!1,0,0],this.arcadelevel=0,this.mGameSucc=new c.default,this.init()}return Object.defineProperty(e.prototype,"gameSucc",{get:function(){return this.mGameSucc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){if(!this.mStage){var e=cc.find("Canvas/Stage").getComponent(u.default);this.mStage=new p.default(e)}return this.mStage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageUI",{get:function(){if(!this.mStageUI){var e=cc.find("Canvas/UIRoot/StageWindow");this.mStageUI=e.getComponent(g.default)}return this.mStageUI},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.onUpdate=function(e){m.default.getInstance().onUpdate(e)},e.prototype.initStage=function(){this.stage.init()&&a.Game.sdkPipeline.loadAD()},e.prototype.startArcade=function(e,t){void 0===t&&(t=!0),this.initStage(),this.arcadelevel=e,this.startGame(!1)},e.prototype.restartGame=function(){this.startGame(!0)},e.prototype.restoreGrid=function(){cc.log("\u91cd\u7f6e \u5931\u8d25\u6570"),v.default.bottomNo!=v.default.defaultBottomNo&&(v.default.bottomNo=v.default.defaultBottomNo)},e.prototype.nextArcade=function(){var e=b.TableHelper.GetCount(T.eTable.eTabMap);this.arcadelevel!=e&&m.default.getInstance().init(this.arcadelevel++)},e.prototype.prevLevel=function(){1!=this.arcadelevel&&(this.arcadelevel--,m.default.getInstance().init(this.arcadelevel-1))},e.prototype.refreshTile=function(){var e=a.Game.userData.goldData;if(cc.log("\u5237\u65b0\u6b21\u6570\uff1a"+e.propRefresh),e.propRefresh>0){e.propRefresh=e.propRefresh-1,m.default.getInstance().refreshTile(),this.mStageUI.menusChange(2,e.propRefresh),a.Game.userData.goldData=e;var t=new i.PropEvent;t.missionId=this.arcadelevel.toString(),t.itemType="3",t.sourceType="1",t.countTotal=e.propRefresh.toString(),t.Count="1",s.default.log(s.default.dot_prop_use,t)}else this.mStageUI.menusChange(2,0),l.UICenter.openShopWindow(2,C.PropType.PropRefresh),s.default.dotRechargeScenarios(3)},e.prototype.autoEliminate=function(){var e=a.Game.userData.goldData;if(cc.log("\u81ea\u52a8\u5b8c\u6210\u6b21\u6570\uff1a"+e.propAuto),e.propAuto>0)if(m.default.getInstance().judgeAutoComplete()){e.propAuto=e.propAuto-1,m.default.getInstance().autoEliminate(),this.mStageUI.menusChange(1,e.propAuto),a.Game.userData.goldData=e;var t=new i.PropEvent;t.missionId=this.arcadelevel.toString(),t.itemType="2",t.sourceType="1",t.countTotal=e.propAuto.toString(),t.Count="1",s.default.log(s.default.dot_prop_use,t)}else _.default.showWith(d.default.get("L20092"));else this.mStageUI.menusChange(1,0),l.UICenter.openShopWindow(2,C.PropType.PropAuto),s.default.dotRechargeScenarios(3)},e.prototype.undoOperation=function(){var e=a.Game.userData.goldData;if(cc.log("\u56de\u9000\u6b21\u6570\uff1a"+e.propUndo),e.propUndo>0){var t=m.default.getInstance().obtainBottomTileNo();if(cc.log("\u5e95\u90e8\u5269\u4f59\u65b9\u5757\u6570\uff1a"+t),t>0){e.propUndo=e.propUndo-1,m.default.getInstance().undoOperation(),this.mStageUI.menusChange(0,e.propUndo),a.Game.userData.goldData=e;var o=new i.PropEvent;o.missionId=this.arcadelevel.toString(),o.itemType="1",o.sourceType="1",o.countTotal=e.propAuto.toString(),o.Count="1",s.default.log(s.default.dot_prop_use,o)}else _.default.showWith(d.default.get("L20091"))}else this.mStageUI.menusChange(0,0),l.UICenter.openShopWindow(2,C.PropType.PropUndo),s.default.dotRechargeScenarios(3)},e.prototype.coinChange=function(){n.default.addGold(v.default.SuccRewardGold),a.Game.userData.goldData},e.prototype.dotLevelActivityStart=function(){var e=new i.LevelActivityStart;e.missionId=this.arcadelevel.toString(),e.missionFlag="enter",e.missionName=this.arcadelevel.toString(),s.default.log(s.default.ACTION_LEVEL_BEGIN,e.missionId)},e.prototype.startGame=function(e){var t=this;this.stageUI.show(),h.Emitter.fire(f.default.eOnStartGame,this.arcadelevel);var o=a.Game.userData.dotData;o.currentLevel=this.arcadelevel,a.Game.userData.dotData=o,a.Game.sdkPipeline.showGameInterstitial(y.default.AD_PLAY_POS_START,this.arcadelevel,function(){t.stage.startGame(function(){a.Game.userData.saveData(),h.Emitter.fire(f.default.eOnGameReady)});var o=t.arcadelevel-1;if(m.default.getInstance().init(o),r.AudioMgr.playBgSound("bgm2"),t.dotLevelActivityStart(!0),!e){var n=a.Game.userData;11==t.arcadelevel&&n.lvRwd.This==t.arcadelevel&&n.lvRwd.Need&&a.Game.sdkPipeline.showRateDialog();var c=v.default.GuideLevel.findIndex(function(e){return e==o});if(c>=0){var p=a.Game.userData.starData;o>=p.levels.length&&!v.default.isChallenge&&(cc.log("\u5f39\u51fa\u5f15\u5bfc\u9875\u9762\uff01"),setTimeout(function(){l.UICenter.openGuideKingWindow(c)},700),(new i.NoviceGuide).eventTargetId="2",s.default.log(s.default.ACTION_TUTORIAL_BEGIN))}}})},e.prototype.onGameSucc=function(e){var t=this;a.Game.sdkPipeline.showGameInterstitial(y.default.AD_PLAY_POS_END_GAME,this.arcadelevel,function(){v.default.isChallenge?(cc.log("\u5f39\u51fa\u754c\u9762\uff01"),t.mGameSucc.onGameSucc(t.arcadelevel,e,function(e){l.UICenter.openRaceWinWindow(e)})):t.mGameSucc.onGameSucc(t.arcadelevel,e,function(e){l.UICenter.openTileWinWindow(e)}),h.Emitter.fire(f.default.eOnGameEnd)})},e.prototype.onGameFail=function(){a.Game.sdkPipeline.showGameInterstitial(y.default.AD_PLAY_POS_END_GAME,this.arcadelevel,function(){v.default.isChallenge?l.UICenter.openRaceFailWindow():l.UICenter.openTileFailWindow(),s.default.dotInMol(s.default.dot_nousefulmove_show)})},e.prototype.onBackClick=function(){this.backToMain(),m.default.getInstance().eliminateData(),s.default.logAF(s.default.dot_click_back)},e.prototype.backToMain=function(e,t){var o=this;void 0===e&&(e=!1),a.Game.userData.saveData(),l.UICenter.openMainWindow(e,function(){o.stage.reset(),o.stageUI.hide()},t),r.AudioMgr.playBgSound("bgm1")},e.prototype.backToMainOpenRili=function(e,t){var o=this;void 0===e&&(e=!1),a.Game.userData.saveData(),l.UICenter.openMainWindow(e,function(){o.stage.reset(),o.stageUI.hide(),h.Emitter.fire(f.default.eOnShowRL),cc.log("\u53d1\u9001\u4fe1\u606f\uff01")},t),r.AudioMgr.playBgSound("bgm1")},e.prototype.refreshStars=function(e,t){this.stageUI.refreshStars(e,t)},e.prototype.menusChange=function(e,t){this.mStageUI.menusChange(e,t)},e.prototype.addPigCoin=function(){this.mStageUI.addPigCoin()},e}();o.GameMgr=S,cc._RF.pop()},{"../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/UI/Toast":"Toast","../core/global/Emitter":"Emitter","../core/global/I18N":"I18N","../data/DataTools":"DataTools","../global/AudioMgr":"AudioMgr","../global/Const":"Const","../global/GameConfig":"GameConfig","../sdk/LogEvent":"LogEvent","../sdk/SDKConst":"SDKConst","../view/UICenter":"UICenter","../view/window/StageWindow":"StageWindow","./../sdk/MibData":"MibData","./GameSucc":"GameSucc","./Stage":"Stage","./StageView":"StageView","./manager/TileManager":"TileManager","./type/Enum":"Enum"}],GameRes:[function(e,t,o){"use strict";cc._RF.push(t,"7c3fbCFJs1BUaa2incxyHjm","GameRes"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/util/ResUtil"),a=e("../../core/util/StrUtil"),n=e("../../Game"),r=e("./TilePool"),s=function(){function e(){this.tileSprite=[],this.curGroup="skin1/food_"}return e.prototype.load=function(e){cc.log("ResManager onLoad");var t=this,o=0,n=function(){37==o&&null!=e&&e()};r.default.loadPrefab(function(){o++,n()});for(var s=function(e){var r=""+l.curGroup+a.default.lpad(e.toString(),3,"0");i.ResUtil.loadRes(r,i.eResType.Texture,function(i){t.tileSprite[e]=i,o++,n()})},l=this,c=1;c<37;c++)s(c)},e.getTileSpriteFrame=function(e){return n.Game.gameRes.tileSprite[e]},e.prototype.loadRes=function(e){this.curGroup=e;for(var t=this,o=function(e){i.ResUtil.loadRes(a.curGroup+e.toString(),i.eResType.Texture,function(o){t.tileSprite[e]=o})},a=this,n=1;n<36;n++)o(n)},e}();o.default=s,cc._RF.pop()},{"../../Game":"Game","../../core/util/ResUtil":"ResUtil","../../core/util/StrUtil":"StrUtil","./TilePool":"TilePool"}],GameSucc:[function(e,t,o){"use strict";cc._RF.push(t,"37b60Rz/n9HfKHXani14x9i","GameSucc"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Game"),a=e("../data/UserData"),n=function(){function e(){}return e.prototype.onGameSucc=function(e,t,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.submitData(e)];case 1:return i.sent(),o&&o(t),[2]}})})},e.prototype.submitData=function(e){return new Promise(function(t){var o=i.Game.userData;e==o.lvRwd.This?(i.Game.userData.tempRewardRes=new a.LvRwd,i.Game.userData.tempRewardRes.This=o.lvRwd.This+1,i.Game.userData.tempRewardRes.Next=o.lvRwd.Next+1,t()):t()})},e}();o.default=n,cc._RF.pop()},{"../Game":"Game","../data/UserData":"UserData"}],GameUtil:[function(e,t,o){"use strict";cc._RF.push(t,"a24f8zaZv9NVJB5lazoaLeA","GameUtil"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/Table/TableHelper"),a=e("../../core/Table/Table"),n=e("../../global/GameConfig"),r=e("../../Game"),s=function(){function e(){this._typeno=0,this._typeMaxNum=0,this._brickNum=0,this._postBrick=null,this._postType=null,this._postFixedType=null,this._remainingRecord=null,this._refreshRecord=null,this._refreshNo=0,this._refreshToltalNo=0,this._isEnd=!1,this._realBrickNum=0}return e.getInstance=function(){return e.instance},e.prototype.getRandomKnownType=function(){var e=this._postFixedType.concat();return e[Math.floor(e.length*Math.random())]},e.prototype.addRemainRcord=function(e){this._remainingRecord.push(e)},Object.defineProperty(e.prototype,"brickNum",{set:function(e){this._brickNum=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rebrickNum",{get:function(){return this._brickNum},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realBrickNo",{get:function(){return this._realBrickNum},enumerable:!1,configurable:!0}),e.prototype.setRefreshNo=function(e){if(this._refreshNo=e[0],this._refreshToltalNo=e[1],this._isEnd=!0,0!=this._refreshNo)if(1==this._refreshToltalNo){var t=this._refreshRecord.indexOf(this._refreshNo);this._refreshRecord.splice(t,1)}else 2==this._refreshToltalNo&&(t=this._refreshRecord.indexOf(this._refreshNo),this._refreshRecord.splice(t,1),t=this._refreshRecord.indexOf(this._refreshNo),this._refreshRecord.splice(t,1))},e.prototype.getRandomType=function(e){void 0===e&&(e=[]);for(var t=n.default.types.concat(),o=0;o<e.length;o++)t.splice(t.indexOf(e[o]),1);return t[Math.floor(t.length*Math.random())]},e.prototype.getKnownType=function(){var e=this._postBrick.concat(),t=e[Math.floor(e.length*Math.random())],o=e.indexOf(t);return this._postBrick.splice(o,1),t},e.prototype.initRefreshRecord=function(){this._refreshRecord=[],this._refreshRecord=this._remainingRecord.concat()},e.prototype.getRefreshType=function(e){var t=this._refreshRecord.concat();if(1==e&&1==this._isEnd&&0!=this._refreshNo&&0!=this._refreshToltalNo)return this._refreshToltalNo=this._refreshToltalNo-1,0==this._refreshToltalNo&&(this._isEnd=!1),this._refreshNo;if(0==t.length)return this._refreshToltalNo=0,this._isEnd=!1,this._refreshNo;var o=t[Math.floor(t.length*Math.random()/3)],i=t.indexOf(o);return this._refreshRecord.splice(i,1),o},e.prototype.getRandomNumInt=function(e,t){var o=t-e,i=Math.random();return e+Math.round(i*o)},e.prototype.getInitTypeMap=function(){cc.log("getInitTypeMap:\u5c42\u6570\uff1a"+n.default.layersTotalNo+"\u884c\u6570\uff1a"+n.default.row+"\u5217\u6570\uff1a"+n.default.col);for(var e=[],t=0;t<n.default.layersTotalNo;t++){for(var o=[],i=0;i<n.default.col;i++){for(var a=[],r=0;r<n.default.row;r++)a.push(0);o.push(a)}e.push(o)}return e},e.prototype.deleteRecord=function(e){var t=this._remainingRecord.indexOf(e);this._remainingRecord.splice(t,1)},e.prototype.getremainingNo=function(){return this._remainingRecord.length},e.prototype.reducePattern=function(e){cc.log("\u5931\u6557\u964d\u4f4e\u96e3\u5ea6\u4fe1\u606f\uff1a"+r.Game.userData.failInfoData.failinfo);var t=i.TableHelper.GetFieldByIndex(a.eTable.eTabMap,e);if(cc.log(" typenp"+this._typeno+" id:"+t.id+"  brickNum: "+t.brickNum+"  typeNumMin:"+t.typeNumMin+" typeNumMax:"+t.typeNumMax+"  typeMaxNum:"+t.typeMaxNum),this._typeno=this.getRandomNumInt(t.typeNumMax,t.typeNumMin),this._typeMaxNum=t.typeMaxNum,e!=r.Game.userData.failInfoData.failinfo[0])return cc.log("\u6ca1\u6709\u5931\u8d25\u8bb0\u5f55\uff01"),!1;var o=Math.ceil(this._brickNum/this._typeMaxNum);cc.log("BrickNum:"+this._brickNum),cc.log("_typeMaxNum"+this._typeMaxNum),cc.log("\u6700\u5c0f\u6ee1\u8db3\u6570\uff1a"+o);var n=i.TableHelper.GetFieldByIndex(a.eTable.eTabDifficulty,r.Game.userData.failInfoData.failinfo[1]);null==n?n=i.TableHelper.GetFieldByIndex(a.eTable.eTabDifficulty,20):cc.log("defeatedNum: "+n.defeatedNum+"typeReduce\uff1a  "+n.typeReduce);var s=this._typeno-n.typeReduce;return s<o?(this._typeno=o,cc.log("\u6700\u5c0f\u6ee1\u8db3\u6570\u76ee\uff1a"+this._typeno),!0):s<5&&(this._typeno=5,cc.log("\u5f3a\u5236\u6ee1\u8db3\u6570\u76ee\uff1a"+this._typeno),!0)},e.prototype.genInitType=function(e){this._postBrick=[],this._remainingRecord=[],this._postType=[],this._postFixedType=[],this.reducePattern(e);var t,o=[];this._postType=[],this._postFixedType=[];for(var i=0;i<this._typeno;i++){var a=this.getRandomType(o);o.push(a),this._postType[a]=3,this._postFixedType.push(a)}for(var n=0;n<this._typeno;n++)if(this._postBrick.push(this._postFixedType[n]),this._postBrick.push(this._postFixedType[n]),this._postBrick.push(this._postFixedType[n]),this._postBrick.length>=this._brickNum){cc.log("\u5df2\u7ecf\u6ee1\u8db3\uff01");break}cc.log("\u65b9\u5757\u6570\u76ee\uff1a"+this._brickNum);var r=0;if(0!=this._brickNum-3*this._typeno)for(;this._brickNum>this._postBrick.length;){var s=this.getRandomKnownType();if(this._postType[s]>=this._typeMaxNum||(this._postType[s]=this._postType[s]+3,this._postBrick.push(s),this._postBrick.push(s),this._postBrick.push(s)),(r+=1)>400)break}if(cc.log("this._postBrick:"+this._postBrick),0!=(t=this._brickNum%3)){var l=this._postBrick[0],c=this._postBrick.indexOf(l);this._postBrick.splice(c,1),c=this._postBrick.indexOf(l),this._postBrick.splice(c,1),c=this._postBrick.indexOf(l),this._postBrick.splice(c,1)}return cc.log("this._postBrick:"+this._postBrick),cc.log("this._postBrick length:"+this._postBrick.length),this._remainingRecord=this._postBrick.concat(),this._realBrickNum=this._remainingRecord.length,t},e.prototype.reAutoEliminateTile=function(e,t){for(var o=e,i=null,a=0,r=0;r<n.default.layersTotalNo;r++)for(var s=0;s<n.default.col;s++)for(var l=0;l<n.default.row;l++)if(null!=(i=o[r][s][l])&&0==i.isDestroy&&0==i.isMask()&&i.type==t)return a=1,i;if(0==a)for(r=0;r<n.default.layersTotalNo;r++)for(s=0;s<n.default.col;s++)for(l=0;l<n.default.row;l++)if(null!=(i=o[r][s][l])&&0==i.isDestroy&&i.type==t)return a=1,i;return i},e.prototype.reAutoRandEliminateTile=function(e){for(var t=e,o=null,i=[],a=[],r=0;r<n.default.layersTotalNo;r++)for(var s=0;s<n.default.col;s++)for(var l=0;l<n.default.row;l++)null!=(o=t[r][s][l])&&0==o.isDestroy&&0==o.isMask()&&(a.push(o),null==i[o.type]?i[o.type]=1:i[o.type]=i[o.type]+1);var c=0;for(r=0;r<i.length;r++)if(null!=i[r]&&i[r]>2){c=r;break}if(0==c)for(r=0;r<i.length;r++)if(null!=i[r]&&i[r]>1){c=r;break}if(0==c)for(r=0;r<i.length;r++)if(null!=i[r]&&1==i[r]){c=r;break}return c},e.instance=new e,e}();o.default=s,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../global/GameConfig":"GameConfig"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"3eb04tlrvBOn62rjuhYqeZs","Game"),Object.defineProperty(o,"__esModule",{value:!0}),o.Game=void 0;var i=e("./data/UserData"),a=e("./core/UI/UIManager"),n=e("./core/global/I18N"),r=e("./game/GameMgr"),s=e("./sdk/SdkPipeline"),l=e("./game/manager/GameRes"),c=function(){function e(){this.mUserData=null,this.mUiMgr=null,this.mGameMgr=null,this.mSdkPipeline=null,this.mGameRes=null,this.mUserData=new i.default,this.mI18N=new n.default,this.mUiMgr=new a.UIManager,this.mGameMgr=new r.GameMgr,this.mSdkPipeline=new s.default,this.mGameRes=new l.default}return Object.defineProperty(e.prototype,"userData",{get:function(){return this.mUserData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"I18N",{get:function(){return this.mI18N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uiMgr",{get:function(){return this.mUiMgr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameMgr",{get:function(){return this.mGameMgr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sdkPipeline",{get:function(){return this.mSdkPipeline},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameRes",{get:function(){return this.mGameRes},enumerable:!1,configurable:!0}),e.prototype.update=function(e,t){t||this.gameMgr.onUpdate(e)},e.instance=new e,e}();o.Game=c.instance,cc._RF.pop()},{"./core/UI/UIManager":"UIManager","./core/global/I18N":"I18N","./data/UserData":"UserData","./game/GameMgr":"GameMgr","./game/manager/GameRes":"GameRes","./sdk/SdkPipeline":"SdkPipeline"}],GoldWindow:[function(e,t,o){"use strict";cc._RF.push(t,"164acxSzYVKJKxjXCG23ja7","GoldWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/UI/WWindow"),a=e("../../Game"),n=e("../../core/global/Emitter"),r=e("../AnimationUtil"),s=cc._decorator,l=s.ccclass,c=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gold=null,t.icon=null,t.curGold=0,t}var o;return __extends(t,e),o=t,t.animate=function(e,t,i){var n=a.Game.uiMgr.getWindow("prefab/GoldWindow");n instanceof o&&n.animateGold(e,t,i)},t.prototype.onLoad=function(){n.Emitter.register("goldDataChanged",this.onGoldChanged,this)},t.prototype.show=function(t){e.prototype.show.call(this),t?(this.curGold=t,this.gold.string=""+t):this.gold.string=""+a.Game.userData.goldData.gold},t.prototype.onGoldChanged=function(){this.gold.string=""+a.Game.userData.goldData.gold},t.prototype.animateGold=function(e,t,o){var i=this;r.default.bezierFly(this.node,e,this.icon.node,t,2,function(e){i.curGold+=e,i.gold.string=""+i.curGold},function(){},o)},__decorate([c(cc.Label)],t.prototype,"gold",void 0),__decorate([c(cc.Sprite)],t.prototype,"icon",void 0),o=__decorate([l],t)}(i.default);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../AnimationUtil":"AnimationUtil"}],Guide01Window:[function(e,t,o){"use strict";cc._RF.push(t,"fde12TGE/NMQ4hN7kiN+kdQ","Guide01Window"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../game/type/DataStructure"),a=e("../../game/component/Tile"),n=e("../../global/GameConfig"),r=e("../../game/manager/TilePool"),s=e("../../global/AudioMgr"),l=e("../../core/UI/WWindow"),c=e("../../game/util/GuideGameUtil"),p=e("../../game/util/TestTypeMap"),u=e("../../core/global/I18N"),d=cc._decorator,h=d.ccclass,f=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.bottomArea=null,t.guideFinger=null,t.icon=[],t.titleText=null,t.downText=null,t.closeButton=null,t.prop=null,t.propCircle=null,t.preBtnNode=null,t.nextBtnNode=null,t.guideGameUtil=null,t.typeMap=null,t.tileMap=null,t.layerTileMap=null,t.layerMap=null,t.downTileMap=null,t.removeno=0,t._bindex=0,t._posMap=null,t._posCenMap=null,t.width=null,t.height=null,t.beginX=null,t.beginY=null,t.ntype=1,t.totalno=0,t._col=0,t._row=0,t._layersTotalNo=1,t._delRecord=[],t._leaveno=0,t.maxx=0,t.minx=0,t.maxy=0,t.miny=0,t._realBrakNo=0,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){cc.log("Guide01Window onLoad\uff01"),this.containerx=this.container.x,this.containery=this.container.y,o.instance=this,this.guideGameUtil=c.default.getInstance()},t.prototype.show=function(t){e.prototype.show.call(this),t||0==t?(this.preBtnNode.active=!1,this.nextBtnNode.active=!1,this.Guideinit(t)):(this.preBtnNode.active=!0,this.nextBtnNode.active=!0,this.Guideinit(0)),cc.log("\u5f15\u5bfc\u9875\u9762\uff01")},t.prototype.onHide=function(){cc.log("\u9690\u85cf\u754c\u9762\uff01"),e.prototype.onHide.call(this),this.clearContainer(),this.clearBottomArea(),this.unschedule(this.autoComplete),this.unschedule(this.initBottomBrik),this._leaveno=0,cc.Tween.stopAllByTarget(this.propCircle),cc.Tween.stopAllByTarget(this.guideFinger),cc.Tween.stopAllByTarget(this.prop),this.propCircle.setScale(1,1),this.guideFinger.setScale(1,1)},t.getInstance=function(){return o.instance},t.prototype.delJudge=function(){var e=0;if(this._delRecord.length>2)for(var t=0;t<this._delRecord.length&&!(t+3>this._delRecord.length);t++){var o=this._delRecord[t],i=this._delRecord[t+1],a=this._delRecord[t+2];null!=o&&null!=i&&null!=a&&o[0].z==i[0].z&&o[0].z==a[0].z&&(e=o[0].z,t+=2)}return e},t.prototype.delBottomTile=function(){var e=this._delRecord.length,t=this.delJudge();if(t>0){for(var o=0;o<e;o++){var i=this._delRecord[o];s.AudioMgr.playEffect("tile_destory");var n="t"+i[1].x+"|"+i[1].y+"|"+i[1].z;cc.log("delBottomTile:"+n);var r=this.bottomArea.getChildByName(n);null==r||i[0].z==t&&(r.getComponent(a.default).delayeDisappear(),cc.log("end display tile"),this._delRecord[o]=null)}var l=[];for(o=0;o<this._delRecord.length;o++)null!=this._delRecord[o]&&l.push(this._delRecord[o]);this._delRecord=l,this._bindex=this._delRecord.length,0==this._realBrakNo&&this.Guideinit(0),this.displayBottomTile()}},t.prototype.generateConfig=function(e){var t=null;0==e?(t=p.default.normal,this._col=6,this._row=4,this.propCircle.active=!1):(t=p.default.cross,this._col=6,this._row=3,this.propCircle.active=!0),this.layerMap=[];for(var o=t.length,i=[],a=0;a<o;a+=6){var n=t.substr(a,6);i.push(n)}this.layerMap.push(i),this._realBrakNo=t.length,this._layersTotalNo=1},t.prototype.displayBottomTile=function(){for(var e=0;e<this._delRecord.length;e++){var t=this._delRecord[e],o=this.getOwnTileCoord(t[1].x,t[1].y,t[1].z),i="t"+t[1].x+"|"+t[1].y+"|"+t[1].z;if(cc.log("displayBottomTile:"+i),0==o.isDestroy){cc.log("displayBottomTile:"+i);var a=this.container.getChildByName(i),n=this.bottomArea.convertToNodeSpaceAR(o.worldPos),r=this._posMap[e];if(cc.log("\u5e95\u90e8\u663e\u793a\u4f4d\u7f6e\uff1a"+r.toString()),null==a)continue;a.parent=this.bottomArea,a.zIndex=e,a.setPosition(n),o.disappear(),o.activeMask=!1,o.guidbmove(r)}else null!=(a=this.bottomArea.getChildByName(i))?(n=this.bottomArea.convertToNodeSpaceAR(o.worldPos),r=this._posMap[e],cc.log("aim:"+r.toString()+" no:"+e),a.zIndex=e,a.setPosition(n),o.activeMask=!1,o.dhmove(r)):cc.log("\u51fa\u73b0\u95ee\u9898")}},t.prototype.generatePosMap=function(){this._posMap=[],this._bindex=0,this.width=2*n.default.padding+n.default.guidesize*n.default.defaultBottomNo+n.default.spacing*n.default.defaultBottomNo,this.height=2*n.default.padding+n.default.guidesize,this.beginX=-this.width/2+n.default.padding+n.default.guidesize/2,this.beginY=this.height/2,cc.log("GameConfig.defaultBottomNo:  "+n.default.defaultBottomNo+"    generatePosMap beginX:"+this.beginX+"generatePosMap beginY:"+this.beginY);for(var e=0;e<n.default.defaultBottomNo;e++){var t=this.beginX+e*(n.default.guidesize+n.default.spacing),o=this.beginY;this._posMap.push(cc.v2(t,o))}},t.prototype.generateCenterPosMap=function(){this._posCenMap=[],this.width=2*n.default.padding+n.default.guidesize*this._col+n.default.spacing*(this._col-1),this.height=2*n.default.padding+n.default.guidesize*this._row+n.default.spacing*(this._row-1),this.beginX=-this.width/2+n.default.padding+n.default.guidesize/2,this.beginY=this.height/2-n.default.padding-n.default.guidesize/2,cc.log("beginX:"+this.beginX+"beginY:"+this.beginY);for(var e=0;e<this._col;e++){for(var t=[],o=this.beginX+e*(n.default.guidesize+n.default.spacing),i=0;i<this._row;i++){var a=this.beginY-i*(n.default.guidesize+n.default.spacing);t.push(cc.v2(o,a))}this._posCenMap.push(t)}},t.prototype.onTileTouchEnd=function(e){cc.log("Tile\u70b9\u51fb | coord: "+e.toString()+" | type: "+this.getType(e)),this._realBrakNo=this._realBrakNo-1;var t=new i.Coordinate(e.x,e.y,e.z),o=this._posMap[this._bindex];this._bindex=this._bindex+1,cc.log("\u83b7\u5f97\u5e95\u90e8\u5730\u5740\uff1a"+o.toString()),s.AudioMgr.playEffect("tile_click");var a=new i.Coordinate(o.x,o.y,this.getType(e)),n=[];return n.push(a),n.push(t),this._delRecord.push(n),cc.log("\u5e95\u90e8\u5185\u5bb9\uff1a"+this._delRecord.toString()),this.displayBottomTile(),e.z,!0},t.prototype.getType=function(e,t,o){return"number"==typeof e?this.typeMap[o][e][t]:this.typeMap[e.z][e.x][e.y]},t.prototype.getOwnTileCoord=function(e,t,o){return"number"==typeof e?this.layerTileMap[o][e][t]:this.layerTileMap[e.z][e.x][e.y]},t.prototype.Guideinit=function(e){cc.log("  Guideinit"+e),this._leaveno=e,this.totalno=0,this.maxy=0,this.maxx=0,this.minx=0,this.miny=0,this._delRecord=[],this._bindex=0,this.ntype=1,this.totalno=0,this.clearContainer(),this.clearBottomArea(),this.generateConfig(e),this.getInitTypeMap(),this.titleText.string=u.default.get("L40091"),0==e?this.downText.string=u.default.get("L40092"):1==e?(this.downText.string=u.default.get("L40055"),this.prop.getComponent(cc.Sprite).spriteFrame=this.icon[0]):2==e?(this.downText.string=u.default.get("L40054"),this.prop.getComponent(cc.Sprite).spriteFrame=this.icon[1]):3==e&&(this.downText.string=u.default.get("L40056"),this.prop.getComponent(cc.Sprite).spriteFrame=this.icon[2]),this.generatePosMap(),this.generateCenterPosMap(),this.generateTiles(),this.devpos(),this.generateContainer(e),this.displayTiles(),this.guideFinger.active=!1,this.unschedule(this.autoComplete),this.unschedule(this.initBottomBrik),0==e?this.schedule(this.autoComplete,1):this.schedule(this.initBottomBrik,1)},t.prototype.autoComplete=function(){var e=this,t=this._leaveno;s.AudioMgr.playEffect("item_random");var o=this._delRecord.length,a=null;if(0==o){var n=this.guideGameUtil.reAutoRandEliminateTile(this.layerTileMap,this._col,this._row,this._layersTotalNo);if(null!=(a=this.guideGameUtil.reAutoEliminateTile(this.layerTileMap,n,this._col,this._row,this._layersTotalNo))){var r=new i.Coordinate;r.set(a.coord),this.setFinger(r.x,r.y,r.z+1),setTimeout(function(){t==e._leaveno&&e.onTileTouchEnd(r,null)},100)}else cc.log("\u51fa\u9519 \u672a\u627e\u5230\u5408\u9002\u7684 \u65b9\u5757\uff01")}else if(null!=(a=this.guideGameUtil.reAutoEliminateTile(this.layerTileMap,this._delRecord[o-1][0].z,this._col,this._row,this._layersTotalNo))){var l=new i.Coordinate;l.set(a.coord),this.setFinger(l.x,l.y,l.z+1),setTimeout(function(){t==e._leaveno&&e.onTileTouchEnd(l,null)},100)}else cc.log("\u51fa\u9519 \u672a\u627e\u5230\u5408\u9002\u7684 \u65b9\u5757\uff01");return!0},t.prototype.generateContainer=function(e){var t=this.container.getContentSize();cc.log("\u663e\u793a\u533a\u57df\u957f\uff1a"+t.width+"\u663e\u793a\u533a\u57df\u9ad8\uff1a "+t.height);var o=t.height,i=t.width,a=this._col*n.default.guidesize,r=this._row*n.default.guidesize,s=Number((i/a).toFixed(2)),l=Number((o/r).toFixed(2));if(cc.log("\u539f\u59cbmaxX\uff1a"+this.maxx+" \u539f\u59cbminX\uff1a"+this.minx),cc.log("\u539f\u59cbmaxY\uff1a"+this.maxy+" \u539f\u59cbminY\uff1a"+this.miny),0==e){var c=-(this.maxx+this.minx)/2+this.containerx,p=-(this.maxy+this.miny)/2-50;cc.log("\u7236\u7ea7\u504f\u79fbX\uff1a"+c+"  \u7236\u7ea7\u504f\u79fbY\uff1a"+p),this.container.setPosition(c,p)}else c=-(this.maxx+this.minx)/2+this.containerx,p=-(this.maxy+this.miny)/2+20,cc.log("\u7236\u7ea7\u504f\u79fbX\uff1a"+c+"  \u7236\u7ea7\u504f\u79fbY\uff1a"+p),this.container.setPosition(c,p);cc.log("widthScale:   "+s+"        heightScale:  "+l),s>=1&&l>=1?(cc.log("\u56de\u590d\u6b63\u5e38\u8bbe\u7f6e"),this.container.setScale(1,1)):s>l?(cc.log("\u7f29\u653e\u6bd4\u4f8b\uff1a"+l),this.container.setScale(l,l)):this.container.setScale(s,s)},t.prototype.clearContainer=function(){this.container.setPosition(this.containerx,this.containery);for(var e=this.container.children.concat(),t=this.container.childrenCount,o=0;o<t;o++)null!=e[o]&&"guidefinger"!=e[o].name&&e[o].getComponent(a.default).recycle()},t.prototype.clearBottomArea=function(){for(;this.bottomArea.children.length>1;)"selectedBg"!=this.bottomArea.children[this.bottomArea.children.length-1].name&&this.bottomArea.children[this.bottomArea.children.length-1].getComponent(a.default).recycle()},t.prototype.displayTiles=function(){for(var e=[],t=function(t){e.push(!0),cc.log("\u64ad\u653e\u97f3\u4e50");for(var i=0;i<o.layerTileMap[t].length;i++)for(var a=o.layerTileMap[t][i],r=function(o){var i=a[o];if(null!=i){var r=i.node.getPosition();t%4==0?i.node.setPosition(r.sub(cc.v2(0,-n.default.chalfHeight))):t%4==1?i.node.setPosition(r.sub(cc.v2(0,n.default.chalfHeight))):t%4==2?i.node.setPosition(r.sub(cc.v2(n.default.chalfWidth,0))):t%4==3&&i.node.setPosition(r.sub(cc.v2(-n.default.chalfWidth,0))),setTimeout(function(){i.dhappear()},200*(t+1)),setTimeout(function(){i.dhmove(r),1==e[t]&&(s.AudioMgr.playEffect("tile_obtain"),e[t]=!1,cc.log("ms:"+t))},200*(t+1))}},l=0;l<a.length;l++)r(l)},o=this,i=0;i<this._layersTotalNo;i++)t(i)},t.prototype.devpos=function(){for(var e=0;e<this._layersTotalNo;e++)for(var t=0;t<this.layerTileMap[e].length;t++)for(var o=this.layerTileMap[e][t],i=0;i<o.length;i++){var a=o[i];if(null!=a){var n=a.node.getPosition();this.maxx=Math.max(this.maxx,n.x),this.minx=Math.min(this.minx,n.x),this.maxy=Math.max(this.maxy,n.y),this.miny=Math.min(this.miny,n.y)}}},t.prototype.setFinger=function(e,t){var o=this;this.guideFinger.active=!0,this.guideFinger.zIndex=10;var i=this.getCenPos(e,t);this.guideFinger.setPosition(i);var a=this._leaveno;cc.tween(this.guideFinger).to(.05,{scale:1.2}).to(.15,{scale:1}).call(function(){a==o._leaveno&&(o.guideFinger.active=!1)}).start()},t.prototype.setProp=function(){var e=this,t=this._leaveno;1==t?cc.tween(this.propCircle).to(.5,{scale:1.5}).to(.5,{scale:1}).to(.5,{scale:1.5}).to(.5,{scale:1}).call(function(){t==e._leaveno&&e.autoComplete()}).to(1,{scale:1}).call(function(){t==e._leaveno&&e.Guideinit(t)}).start():2==t?cc.tween(this.propCircle).to(.5,{scale:1.5}).to(.5,{scale:1}).to(.5,{scale:1.5}).to(.5,{scale:1}).call(function(){t==e._leaveno&&e.undoOperation()}).to(1,{scale:1}).call(function(){t==e._leaveno&&e.Guideinit(t)}).start():3==t&&cc.tween(this.propCircle).to(.5,{scale:1.5}).to(.5,{scale:1}).to(.5,{scale:1.5}).to(.5,{scale:1}).call(function(){t==e._leaveno&&e.refreshApperTile()}).to(2,{scale:1}).call(function(){t==e._leaveno&&e.Guideinit(t)}).start()},t.prototype.getNewTile=function(e,t,o,i){cc.log("x:"+e+"  Y:"+t);var n=r.default.get(),s=2*o,l="t"+e+"|"+t+"|"+o;n.setPosition(this.getCenPos(e,t)),this.container.addChild(n,s,l);var c=n.getComponent(a.default);return c.init(),c.setCoord(e,t,o),c.sPostion(n.getPosition()),c.setType(i),c.removeTouch(),this.typeMap[o][e][t]=i,c},t.prototype.getCenPos=function(e,t){return"number"==typeof e?this._posCenMap[e][t]:this._posCenMap[e.x][e.y]},t.prototype.refreshDisplayTile=function(){for(var e=0;e<this._layersTotalNo;e++)for(var t=0;t<this.layerTileMap[e].length;t++)for(var o=this.layerTileMap[e][t],i=function(t){var i=o[t];if(null!=i&&0==i.isDestroy){var r=i.node.getPosition();e%4==0?setTimeout(function(){i.refreshdisappear(r.sub(cc.v2(0,-n.default.chalfHeight)))},100*(a._layersTotalNo-e)):e%4==1?setTimeout(function(){i.refreshdisappear(r.sub(cc.v2(0,n.default.chalfHeight)))},100*(a._layersTotalNo-e)):e%4==2?setTimeout(function(){i.refreshdisappear(r.sub(cc.v2(n.default.chalfWidth,0)))},100*(a._layersTotalNo-e)):e%4==3&&setTimeout(function(){i.refreshdisappear(r.sub(cc.v2(-n.default.chalfWidth,0)))},100*(a._layersTotalNo-e))}},a=this,r=0;r<o.length;r++)i(r)},t.prototype.toBack=function(){e.prototype.toBack.call(this)},t.prototype.toLeft=function(){this.unschedule(this.autoComplete),this.unschedule(this.initBottomBrik),this._leaveno--,this._leaveno<0&&(this._leaveno=3),this.Guideinit(this._leaveno)},t.prototype.toRight=function(){this.unschedule(this.autoComplete),this.unschedule(this.initBottomBrik),cc.log("\u70b9\u51fb\u53f3\u4fa7\u6309\u94ae\uff01"),this._leaveno++,4==this._leaveno&&(this._leaveno=0),this.Guideinit(this._leaveno)},t.prototype.initBottomBrik=function(){var e=this,t=this._leaveno;if(2==this._leaveno){if(this.totalno>=1)return this.guideFinger.active=!1,1==this.totalno&&this.setProp(),void this.totalno++}else if(this.totalno>=2)return this.guideFinger.active=!1,2==this.totalno&&this.setProp(),void this.totalno++;var o=null;if(2==this._leaveno)if(3==this.totalno)if(null!=(o=this.guideGameUtil.reAutoEliminateTile(this.layerTileMap,this.ntype-1,this._col,this._row,this._layersTotalNo))){var a=new i.Coordinate;a.set(o.coord),this.setFinger(a.x,a.y,a.z+1),setTimeout(function(){t==e._leaveno&&e.onTileTouchEnd(a,null)},100)}else cc.log("\u51fa\u9519 \u672a\u627e\u5230\u5408\u9002\u7684 \u65b9\u5757\uff01");else if(null!=(o=this.guideGameUtil.reAutoEliminateTile(this.layerTileMap,this.ntype,this._col,this._row,this._layersTotalNo))){var n=new i.Coordinate;n.set(o.coord),this.setFinger(n.x,n.y,n.z+1),setTimeout(function(){t==e._leaveno&&e.onTileTouchEnd(n,null)},100)}else cc.log("\u51fa\u9519 \u672a\u627e\u5230\u5408\u9002\u7684 \u65b9\u5757\uff01");else if(1==this.totalno)if(null!=(o=this.guideGameUtil.reAutoEliminateTile(this.layerTileMap,this.ntype-1,this._col,this._row,this._layersTotalNo))){var r=new i.Coordinate;r.set(o.coord),this.setFinger(r.x,r.y,r.z+1),setTimeout(function(){t==e._leaveno&&e.onTileTouchEnd(r,null)},100)}else cc.log("\u51fa\u9519 \u672a\u627e\u5230\u5408\u9002\u7684 \u65b9\u5757\uff01");else if(null!=(o=this.guideGameUtil.reAutoEliminateTile(this.layerTileMap,this.ntype,this._col,this._row,this._layersTotalNo))){var s=new i.Coordinate;s.set(o.coord),this.setFinger(s.x,s.y,s.z+1),setTimeout(function(){t==e._leaveno&&e.onTileTouchEnd(s,null)},100)}else cc.log("\u51fa\u9519 \u672a\u627e\u5230\u5408\u9002\u7684 \u65b9\u5757\uff01");return this.ntype++,this.totalno++,!0},t.prototype.generateTiles=function(){this.layerTileMap=[],this._layersTotalNo=this.layerMap.length;for(var e=0;e<this._layersTotalNo;e++){this.tileMap=[];for(var t=0;t<this._col;t++){for(var o=[],i=0;i<this._row;i++)if(null!=this.layerMap[e]&&null!=this.layerMap[e][i]&&null!=this.layerMap[e][i][t]){var a=this.layerMap[e][i][t];o.push(this.getNewTile(t,i,e,Number(a)))}else cc.log("\u6570\u636e\u51fa\u9519\uff01");this.tileMap.push(o)}}this.layerTileMap.push(this.tileMap)},t.prototype.getInitTypeMap=function(){this.typeMap=[];for(var e=[],t=0;t<this._col;t++){for(var o=[],i=0;i<this._row;i++)o.push(0);e.push(o)}this.typeMap.push(e)},t.prototype.undoOperation=function(){var e=this,t=this._leaveno,o=this._delRecord.length,i=this._delRecord[o-1][1];if(null!=i){var a="t"+i.x+"|"+i.y+"|"+i.z;cc.log("delBottomTile:"+a);var n,r=this.bottomArea.getChildByName(a),s=this.container.convertToNodeSpaceAR(r.convertToWorldSpaceAR(cc.Vec2.ZERO));n=this.getCenPos(i.x,i.y);var l=this.getOwnTileCoord(i.x,i.y,i.z);1==l.isDestroy&&(r.parent=this.container,l.recover(),r.setPosition(s),l.dhmove(n)),this._delRecord.splice(o-1,1),this.displayBottomTile(),setTimeout(function(){t==e._leaveno&&e.againDisplay(0)},200)}},t.prototype.againDisplay=function(e){for(var t=e,o=1,i=0;i<this.layerTileMap[t].length;i++)for(var a=this.layerTileMap[t][i],n=0;n<a.length;n++){var r=a[n];null!=r&&0==r.isDestroy&&(r.node.setSiblingIndex(o),r.node.zIndex=0,r.dhappearNoAnimation(),o++)}},t.prototype.refreshApperTile=function(){for(var e=this,t=this._leaveno,o=[],i=0;i<this.layerTileMap[0].length;i++)for(var a=this.layerTileMap[0][i],n=0;n<a.length;n++){var r=a[n];null!=r&&0==r.isDestroy&&o.push(r.type)}cc.log("\u5269\u4f59\u7c7b\u578b\uff1a"+o.toString());for(var s=[],l=0;l<1;l++)for(s.push(!0),i=0;i<this.layerTileMap[0].length;i++){a=this.layerTileMap[0][i];var c=function(i){var n=a[i];if(null!=n&&0==n.isDestroy){var r=o[Math.floor(o.length*Math.random()/3)],s=o.indexOf(r);n.setType(r),o.splice(s,1),n.node.setPosition(n.coord.x,n.coord.y);var c=n.postion;setTimeout(function(){t==e._leaveno&&n.dhmove(c)},200*(l+1))}};for(n=0;n<a.length;n++)c(n)}},t.instance=null,__decorate([f(cc.Node)],t.prototype,"container",void 0),__decorate([f(cc.Node)],t.prototype,"bottomArea",void 0),__decorate([f(cc.Node)],t.prototype,"guideFinger",void 0),__decorate([f(cc.SpriteFrame)],t.prototype,"icon",void 0),__decorate([f(cc.RichText)],t.prototype,"titleText",void 0),__decorate([f(cc.RichText)],t.prototype,"downText",void 0),__decorate([f(cc.Button)],t.prototype,"closeButton",void 0),__decorate([f(cc.Node)],t.prototype,"prop",void 0),__decorate([f(cc.Node)],t.prototype,"propCircle",void 0),__decorate([f(cc.Node)],t.prototype,"preBtnNode",void 0),__decorate([f(cc.Node)],t.prototype,"nextBtnNode",void 0),o=__decorate([h],t)}(l.default);o.default=g,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../game/component/Tile":"Tile","../../game/manager/TilePool":"TilePool","../../game/type/DataStructure":"DataStructure","../../game/util/GuideGameUtil":"GuideGameUtil","../../game/util/TestTypeMap":"TestTypeMap","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig"}],GuideGameUtil:[function(e,t,o){"use strict";cc._RF.push(t,"2f932BD3qlELZ9WYCKrAOie","GuideGameUtil"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/Table/TableHelper"),a=e("../../core/Table/Table"),n=e("../../global/GameConfig"),r=e("../../Game"),s=function(){function e(){this._typeno=0,this._typeMaxNum=0,this._brickNum=0,this._postBrick=null,this._postType=null,this._postFixedType=null,this._remainingRecord=null,this._refreshRecord=null,this._refreshNo=0,this._refreshToltalNo=0,this._isEnd=!1,this._realBrickNum=0}return e.getInstance=function(){return e.instance},e.prototype.getRandomKnownType=function(){var e=this._postFixedType.concat();return e[Math.floor(e.length*Math.random())]},e.prototype.addRemainRcord=function(e){this._remainingRecord.push(e)},Object.defineProperty(e.prototype,"brickNum",{set:function(e){this._brickNum=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rebrickNum",{get:function(){return this._brickNum},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realBrickNo",{get:function(){return this._realBrickNum},enumerable:!1,configurable:!0}),e.prototype.setRefreshNo=function(e){if(this._refreshNo=e[0],this._refreshToltalNo=e[1],this._isEnd=!0,0!=this._refreshNo)if(1==this._refreshToltalNo){var t=this._refreshRecord.indexOf(this._refreshNo);this._refreshRecord.splice(t,1)}else 2==this._refreshToltalNo&&(t=this._refreshRecord.indexOf(this._refreshNo),this._refreshRecord.splice(t,1),t=this._refreshRecord.indexOf(this._refreshNo),this._refreshRecord.splice(t,1))},e.prototype.getRandomType=function(e){void 0===e&&(e=[]);for(var t=n.default.types.concat(),o=0;o<e.length;o++)t.splice(t.indexOf(e[o]),1);return t[Math.floor(t.length*Math.random())]},e.prototype.getKnownType=function(){var e=this._postBrick.concat(),t=e[Math.floor(e.length*Math.random())],o=e.indexOf(t);return this._postBrick.splice(o,1),t},e.prototype.initRefreshRecord=function(){this._refreshRecord=[],this._refreshRecord=this._remainingRecord.concat()},e.prototype.getRefreshType=function(e){var t=this._refreshRecord.concat();if(1==e&&1==this._isEnd&&0!=this._refreshNo&&0!=this._refreshToltalNo)return this._refreshToltalNo=this._refreshToltalNo-1,0==this._refreshToltalNo&&(this._isEnd=!1),this._refreshNo;if(0==t.length)return this._refreshToltalNo=0,this._isEnd=!1,this._refreshNo;var o=t[Math.floor(t.length*Math.random()/3)],i=t.indexOf(o);return this._refreshRecord.splice(i,1),o},e.prototype.getRandomNumInt=function(e,t){var o=t-e,i=Math.random();return e+Math.round(i*o)},e.prototype.getInitTypeMap=function(e,t,o){cc.log("getInitTypeMap:\u5c42\u6570\uff1a"+o+"\u884c\u6570\uff1a"+t+"\u5217\u6570\uff1a"+e);for(var i=[],a=0;a<o;a++){for(var n=[],r=0;r<e;r++){for(var s=[],l=0;l<t;l++)s.push(0);n.push(s)}i.push(n)}return i},e.prototype.deleteRecord=function(e){var t=this._remainingRecord.indexOf(e);this._remainingRecord.splice(t,1)},e.prototype.getremainingNo=function(){return this._remainingRecord.length},e.prototype.reducePattern=function(e){cc.log("\u5931\u6557\u964d\u4f4e\u96e3\u5ea6\u4fe1\u606f\uff1a"+r.Game.userData.failInfoData.failinfo);var t=i.TableHelper.GetFieldByIndex(a.eTable.eTabMap,e);if(cc.log(" typenp"+this._typeno+" id:"+t.id+"  brickNum: "+t.brickNum+"  typeNumMin:"+t.typeNumMin+" typeNumMax:"+t.typeNumMax+"  typeMaxNum:"+t.typeMaxNum),this._typeno=this.getRandomNumInt(t.typeNumMax,t.typeNumMin),this._typeMaxNum=t.typeMaxNum,e!=r.Game.userData.failInfoData.failinfo[0])return cc.log("\u6ca1\u6709\u5931\u8d25\u8bb0\u5f55\uff01"),!1;var o=Math.ceil(this.brickNum/this._typeMaxNum),n=i.TableHelper.GetFieldByIndex(a.eTable.eTabDifficulty,r.Game.userData.failInfoData.failinfo[1]);null==n?n=i.TableHelper.GetFieldByIndex(a.eTable.eTabDifficulty,20):cc.log("defeatedNum: "+n.defeatedNum+"typeReduce\uff1a  "+n.typeReduce);var s=this._typeno-n.typeReduce;return s<o&&(this._typeno=o,cc.log("\u6700\u5c0f\u6ee1\u8db3\u6570\u76ee\uff1a"+this._typeno)),s<5&&(this._typeno=5,cc.log("\u5f3a\u5236\u6ee1\u8db3\u6570\u76ee\uff1a"+this._typeno),!0)},e.prototype.genInitType=function(e){this._postBrick=[],this._remainingRecord=[],this._postType=[],this._postFixedType=[],this.reducePattern(e);var t,o=[];this._postType=[],this._postFixedType=[];for(var i=0;i<this._typeno;i++){var a=this.getRandomType(o);o.push(a),this._postType[a]=3,this._postFixedType.push(a)}for(var n=0;n<this._typeno;n++)if(this._postBrick.push(this._postFixedType[n]),this._postBrick.push(this._postFixedType[n]),this._postBrick.push(this._postFixedType[n]),this._postBrick.length>=this._brickNum){cc.log("\u5df2\u7ecf\u6ee1\u8db3\uff01");break}var r=0;if(0!=this._brickNum-3*this._typeno)for(;this._brickNum>this._postBrick.length;){var s=this.getRandomKnownType();if(this._postType[s]>=this._typeMaxNum?cc.log("\u6b64\u7c7b\u578b\u5df2\u7ecf\u8fbe\u5230\u6700\u5927\u663e\u793a\u6570:"+s):(this._postType[s]=this._postType[s]+3,this._postBrick.push(s),this._postBrick.push(s),this._postBrick.push(s)),(r+=1)>400)break}if(cc.log("this._postBrick:"+this._postBrick),0!=(t=this._brickNum%3)){var l=this._postBrick[0],c=this._postBrick.indexOf(l);this._postBrick.splice(c,1),c=this._postBrick.indexOf(l),this._postBrick.splice(c,1),c=this._postBrick.indexOf(l),this._postBrick.splice(c,1)}return cc.log("this._postBrick:"+this._postBrick),cc.log("this._postBrick length:"+this._postBrick.length),this._remainingRecord=this._postBrick.concat(),this._realBrickNum=this._remainingRecord.length,t},e.prototype.reAutoEliminateTile=function(e,t,o,i,a){for(var n=e,r=null,s=0,l=0;l<a;l++)for(var c=0;c<o;c++)for(var p=0;p<i;p++)if(null!=(r=n[l][c][p])&&0==r.isDestroy&&0==r.isMask()&&r.type==t)return s=1,r;if(0==s)for(l=0;l<a;l++)for(c=0;c<o;c++)for(p=0;p<i;p++)if(null!=(r=n[l][c][p])&&0==r.isDestroy&&r.type==t)return s=1,r;return r},e.prototype.reAutoRandEliminateTile=function(e,t,o,i){for(var a=e,n=null,r=[],s=[],l=0;l<i;l++)for(var c=0;c<t;c++)for(var p=0;p<o;p++)null!=(n=a[l][c][p])&&0==n.isDestroy&&0==n.isMask()&&(s.push(n),null==r[n.type]?r[n.type]=1:r[n.type]=r[n.type]+1);var u=0;for(l=0;l<r.length;l++)if(null!=r[l]&&r[l]>2){u=l;break}if(0==u)for(l=0;l<r.length;l++)if(null!=r[l]&&r[l]>1){u=l;break}if(0==u)for(l=0;l<r.length;l++)if(null!=r[l]&&1==r[l]){u=l;break}return u},e.instance=new e,e}();o.default=s,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../global/GameConfig":"GameConfig"}],GuideMapManager:[function(e,t,o){"use strict";cc._RF.push(t,"95a9aKt4QVHFIofxn1qby8n","GuideMapManager"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../global/GameConfig"),a=function(){function e(){this._posMap=[],this._posDisMap=[],this.width=null,this.height=null,this.beginX=null,this.beginY=null}return e.prototype.getPos=function(e,t){return"number"==typeof e?this._posMap[e][t]:this._posMap[e.x][e.y]},e.prototype.getDisPos=function(e,t){return"number"==typeof e?this._posDisMap[e][t]:this._posDisMap[e.x][e.y]},e.getInstance=function(){return e.instance},e.prototype.init=function(e,t){cc.log("GuideMapManager \u521d\u59cb\u5316\uff01"+this._posMap.length),this.generatePosMap(e,t),this.generateDisPosMap(e,t)},e.prototype.generatePosMap=function(e,t){this._posMap=[],this.width=2*i.default.padding+i.default.size*e+i.default.spacing*(e-1),this.height=2*i.default.padding+i.default.size*t+i.default.spacing*(t-1),this.beginX=-this.width/2+i.default.padding+i.default.size/2,this.beginY=this.height/2-i.default.padding-i.default.size/2,cc.log("beginX:"+this.beginX+"beginY:"+this.beginY);for(var o=0;o<e;o++){for(var a=[],n=this.beginX+o*(i.default.size+i.default.spacing),r=0;r<t;r++){var s=this.beginY-r*(i.default.size+i.default.spacing);a.push(cc.v2(n,s))}this._posMap.push(a)}},e.prototype.generateDisPosMap=function(e,t){this._posDisMap=[],this.width=2*i.default.padding+i.default.size*e+i.default.spacing*(e-1),this.height=2*i.default.padding+i.default.size*t+i.default.spacing*(t-1),this.beginX=-this.width/2+i.default.padding+i.default.size,this.beginY=this.height/2-i.default.padding-i.default.size;for(var o=0;o<e;o++){for(var a=[],n=this.beginX+o*(i.default.size+i.default.spacing),r=0;r<t;r++){var s=this.beginY-r*(i.default.size+i.default.spacing);a.push(cc.v2(n,s))}this._posDisMap.push(a)}},e.instance=new e,e}();o.default=a,cc._RF.pop()},{"../../global/GameConfig":"GameConfig"}],GuideWindow:[function(e,t,o){"use strict";cc._RF.push(t,"0bd98atyslOE76ZX4CaxvZL","GuideWindow"),Object.defineProperty(o,"__esModule",{value:!0}),o.GuideId=o.GuideFingerDir=void 0;var i,a=e("../../core/UI/WWindow"),n=e("../../Game"),r=e("../../core/util/MathUtil"),s=e("../UICenter"),l=e("../../core/global/Emitter"),c=e("../../global/Const"),p=e("../../App"),u=cc._decorator,d=u.ccclass,h=u.property;(function(e){e[e.Top=1]="Top",e[e.Buttom=2]="Buttom",e[e.Left=3]="Left",e[e.Right=4]="Right"})(i=o.GuideFingerDir||(o.GuideFingerDir={})),function(e){e[e.StartBtn=0]="StartBtn",e[e.EnterStartBtn=1]="EnterStartBtn",e[e.RedeemBtn=2]="RedeemBtn"}(o.GuideId||(o.GuideId={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maskNode=null,t.blackNode=null,t.fingerNode=null,t}return __extends(t,e),Object.defineProperty(t,"guideActive",{get:function(){return n.Game.uiMgr.getWindowActive("prefab/GuideWindow")},enumerable:!1,configurable:!0}),t.check=function(e,t,o){var i=n.Game.userData.guideData;i&&i.findIndex(function(t){return t==e})>=0||t.activeInHierarchy&&!this.guideActive&&(i?i.push(e):(i=[]).push(e),n.Game.userData.guideData=i,s.UICenter.openGuideWindow(t,o))},t.prototype.init=function(){e.prototype.init.call(this),l.Emitter.register(c.default.eAfterOrientationChanged,this.onOrientationChanged,this)},t.prototype.show=function(t,o){var i=this;e.prototype.show.call(this),t.once(cc.Node.EventType.TOUCH_END,function(){i.toBack()},this),this.curNode=t,this.curDir=o,this.fitGuideMask(t,o),this.onOrientationChanged()},t.prototype.onOrientationChanged=function(){var e=this;this.fingerNode.stopAllActions(),setTimeout(function(){e.fitGuideMask(e.curNode,e.curDir)},2e3*p.default.delta)},t.prototype.fitGuideMask=function(e,t){this.blackNode.width=cc.winSize.width/n.Game.uiMgr.uiRoot.scale+150,this.blackNode.height=cc.winSize.height/n.Game.uiMgr.uiRoot.scale+150,this.maskNode.width=e.width,this.maskNode.height=e.height;var o=e.parent.convertToWorldSpaceAR(e.position),i=this.node.convertToNodeSpaceAR(o);this.maskNode.position=i,this.blackNode.position=new cc.Vec3(-i.x,-i.y),this.fitFinger(i,t)},t.prototype.fitFinger=function(e,t){var o=0,a=cc.Vec2.ONE,n=e,s=new cc.Vec2(n.x,n.y);switch(t){case i.Top:o=180,a.x=-1,n.y+=.5*this.maskNode.height,s.y=n.y+42;break;case i.Buttom:o=0,n.y-=.5*this.maskNode.height,s.y=n.y-42;break;case i.Left:o=-90,n.x-=.5*this.maskNode.height,s.x=n.x-42;break;case i.Right:o=90,n.x+=.5*this.maskNode.height,s.x=n.x+42}this.fingerNode.angle=o,this.fingerNode.scaleX=a.x,this.fingerNode.scaleY=a.y,this.fingerNode.position=r.default.vec3(n);var l=cc.moveTo(.5,s),c=cc.moveTo(.5,n);this.fingerNode.runAction(cc.sequence(l,c).repeatForever())},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.fingerNode.stopAllActions()},__decorate([h(cc.Node)],t.prototype,"maskNode",void 0),__decorate([h(cc.Node)],t.prototype,"blackNode",void 0),__decorate([h(cc.Node)],t.prototype,"fingerNode",void 0),__decorate([d],t)}(a.default);o.default=f,cc._RF.pop()},{"../../App":"App","../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/util/MathUtil":"MathUtil","../../global/Const":"Const","../UICenter":"UICenter"}],I18N:[function(e,t,o){"use strict";cc._RF.push(t,"abf1671iaNKxK5cWG2/SCio","I18N"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=(i.property,e("./Emitter")),r=e("../../Game"),s=e("../../global/Const"),l=e("../util/ResUtil"),c=function(){function e(){}var t;return t=e,e.supportAtlas=function(e){return"ja"==e||"ko"==e},e.getLocalKey=function(e){if(!t.dataMap[e]){var o=e.split("-");1==o.length&&(o=e.split("_")),e=(e=o[0]).toLowerCase()}return(e=t.dataMap[e])||(e=t.defaultLU),e},e.getCountry=function(e){var t=e.split("-");return 1==t.length&&(t=e.split("_")),t.pop()},e.readProperty=function(e){for(var t={},o=0,i=e.split("\n");o<i.length;o++){var a=i[o];if("#"!=a.charAt(0)){var n=a.indexOf("=");if(-1!=n){var r=a.substr(0,n);r=r.replace(/[\s]+/g,"");var s=a.substring(n+1,a.length);s=s.trim(),t[r]=s}}}return t},e.get=function(e){return t.datas.hasOwnProperty(e)?t.datas[e]:t.defaultData[e]},e.getFont=function(){return t.font?t.font:this.defaultFont},e.getSpriteFrame=function(e){return t.atlas&&t.atlas.getSpriteFrame(e)||t.getDefaultFrame(e)},e.getDefaultFrame=function(e){return t.defaultAtlas?t.defaultAtlas.getSpriteFrame(e):null},e.loadProperty=function(e,o){e&&(t.defaultData=t.readProperty(e)),t.datas=o?t.readProperty(o):{}},e.initFont=function(e,o){e&&(t.defaultFont=e),t.font=o||null},e.initAtlas=function(e,o){e&&(t.defaultAtlas=e),t.atlas=o||null},e.prototype.languageChange=function(e){this.languageSwitch(e.node.name)},e.prototype.languageSwitch=function(e){r.Game.userData.language=e,r.Game.userData.updateData("l",r.Game.userData.language);var o=t.getLocalKey(e);o!=t.defaultLU?l.ResUtil.loadRes(o,l.eResType.I18n,function(e){t.loadProperty(null,e.text),t.supportAtlas(o)?l.ResUtil.loadRes(o,l.eResType.I18nAtlas,function(e){t.initAtlas(null,e),n.Emitter.fire(s.default.eLanguageChange)}):(t.initAtlas(null,null),n.Emitter.fire(s.default.eLanguageChange))}):(t.loadProperty(null,null),t.initAtlas(null,null),n.Emitter.fire(s.default.eLanguageChange))},e.isLocal=function(e){var o=r.Game.userData.language;return t.getLocalKey(o)==e},e.getExchangeRate=function(){var e=r.Game.userData.language;return t.getLocalKey(e),.01},e.getToFixedLength=function(){var e=r.Game.userData.language;return t.getLocalKey(e),2},e.dataMap={zh_CN:"zh_CN",zh:"zh_CN",en_US:"en_US",en:"en_US"},e.defaultLU="en_US",e.datas={},e.defaultData={},t=__decorate([a],e)}();o.default=c,cc._RF.pop()},{"../../Game":"Game","../../global/Const":"Const","../util/ResUtil":"ResUtil","./Emitter":"Emitter"}],IOSSDK:[function(e,t,o){"use strict";cc._RF.push(t,"7e923RpQGVDE4uTvB358yNe","IOSSDK"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../global/GameConfig"),a=e("./SDKConst"),n=cc._decorator,r=n.ccclass,s=(n.property,function(){function e(){window.iOSCallBack=this.SDKCallBack,window.iOSSelf=this}var t;return t=e,e.prototype.addPushMessage=function(e,t,o,i,a){jsb.reflection.callStaticMethod("AppHelper","addPushMessage:body:id:interval:repeat:",e,t,""+o,i,a)},e.prototype.setOrientation=function(e){jsb.reflection.callStaticMethod("AppHelper","setOrientation:",e)},e.prototype.logEvent=function(e,t){var o="";for(var i in t)""!=o&&(o+=","),o+=i+","+t[i];jsb.reflection.callStaticMethod("AppHelper","logEvent:value:",e,o)},e.prototype.getAFStatus=function(){return jsb.reflection.callStaticMethod("AppHelper","getAFStatus")},e.prototype.setAdUid=function(e){jsb.reflection.callStaticMethod("AppHelper","setUid:",e)},e.prototype.ADisLoaded=function(e){return void 0===e&&(e=a.default.AD_TYPE_INTERST),e==a.default.AD_TYPE_INTERST?jsb.reflection.callStaticMethod("AppHelper","isInterstitialReady"):e==a.default.AD_TYPE_REWARD?jsb.reflection.callStaticMethod("AppHelper","isRewardAdLoaded"):e==a.default.AD_TYPE_BANNER&&jsb.reflection.callStaticMethod("AppHelper","isBannerLoaded")},e.prototype.initAD=function(){},e.prototype.loadAD=function(e,t){void 0===t&&(t=a.default.AD_TYPE_INTERST),t==a.default.AD_TYPE_INTERST&&jsb.reflection.callStaticMethod("AppHelper","loadInterstitial")},e.prototype.showInterstitial=function(e,t,o,i){this.InterstitialCall={showStateCall:e,closeCall:t,thisObj:o},jsb.reflection.callStaticMethod("AppHelper","showInterstitial:",i)},e.prototype.showReward=function(e,t,o,i){this.ADCall={showStateCall:e,closeCall:t,thisObj:o},jsb.reflection.callStaticMethod("AppHelper","showRewardAD:",i)},e.prototype.displayBannerAD=function(e){jsb.reflection.callStaticMethod("AppHelper","displayBannerAD:",e)},e.prototype.hasBannerAD=function(){return!0},e.prototype.rewardAvailability=function(){return jsb.reflection.callStaticMethod("AppHelper","rewardAvailability")},e.prototype.SDKCallBack=function(e){console.log("sdkcallback param"+e);var t=e.type,o=e.value,i=window.iOSSelf;if("rewardComplete"==t){var a=i.ADCall,n=a.closeCall,r=a.thisObj;n&&n.call(r,o)}if("rewardShow"==t){var s=i.ADCall,l=s.showStateCall;r=s.thisObj,l&&l.call(r,o)}if("interstitialClosed"==t){var c=i.InterstitialCall;n=c.closeCall,r=c.thisObj,n&&n.call(r,o)}if("interstitialShow"==t){var p=i.InterstitialCall;l=p.showStateCall,r=p.thisObj,l&&l.call(r,o)}},e.prototype.getLocal=function(){return jsb.reflection.callStaticMethod("AppHelper","getPreferredLanguage")},e.prototype.getData=function(e,o,i){var a=cc.sys.localStorage.getItem(t.localStorageKey),n=a?JSON.parse(a):{};if(e){for(var r={},s=0,l=e;s<l.length;s++){var c=l[s];r[c]=n[c]}o.call(i,r)}else o.call(i,n)},e.prototype.setData=function(e){var o=cc.sys.localStorage.getItem(t.localStorageKey),i=o?JSON.parse(o):{};for(var a in e)i[a]=e[a];cc.sys.localStorage.setItem(t.localStorageKey,JSON.stringify(i))},e.prototype.showRateDialog=function(){jsb.reflection.callStaticMethod("AppHelper","rateOnMarket")},e.prototype.getIsRated=function(){return!1},e.prototype.getVersion=function(){return i.default.VERSION},e.prototype.smbCommand=function(){},e.localStorageKey="game_MD_1",t=__decorate([r],e)}());o.default=s,cc._RF.pop()},{"../global/GameConfig":"GameConfig","./SDKConst":"SDKConst"}],ISDK:[function(e,t,o){"use strict";cc._RF.push(t,"09bac88MbpKu4VGoSGuzmqO","ISDK"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator;i.ccclass,i.property,cc._RF.pop()},{}],ISPAYSDK:[function(e,t,o){"use strict";cc._RF.push(t,"fdfa9omZ61JB4+7In6NO96z","ISPAYSDK"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IWAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"5ab65M8WwZNBq0lTpIJWRue","IWAnimation"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ItemContent:[function(e,t,o){"use strict";cc._RF.push(t,"3bef9GOdbFLkbncDH+TZht7","ItemContent"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ItemGoldContent"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconFrames=[],t.icon=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"itemType",{get:function(){return 1},enumerable:!1,configurable:!0}),t.prototype.onSetContent=function(){this.icon.spriteFrame=this.getIcon()},t.prototype.getIcon=function(){var e=this.iconFrames[0];return this.mProp.propType>0&&this.mProp.propType-1<this.iconFrames.length&&(e=this.iconFrames[this.mProp.propType-1]),e},__decorate([r(cc.SpriteFrame)],t.prototype,"iconFrames",void 0),__decorate([r(cc.Sprite)],t.prototype,"icon",void 0),__decorate([n],t)}(i.default);o.default=s,cc._RF.pop()},{"./ItemGoldContent":"ItemGoldContent"}],ItemGoldContent:[function(e,t,o){"use strict";cc._RF.push(t,"1a27ed8zPJCJJ5afOXJXYxQ","ItemGoldContent"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=i.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.mProp=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"itemType",{get:function(){return 0},enumerable:!1,configurable:!0}),t.prototype.setContent=function(e){this.mProp=e,this.label.string="x"+e.propNum,this.onSetContent()},t.prototype.onSetContent=function(){},__decorate([n(cc.Label)],t.prototype,"label",void 0),__decorate([a],t)}(cc.Component);o.default=r,cc._RF.pop()},{}],KingGiftItemContent:[function(e,t,o){"use strict";cc._RF.push(t,"3933f24lwtK3LPrGk7G4Lq7","KingGiftItemContent"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=i.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.icon=null,t.iconNode=null,t}return __extends(t,e),t.prototype.setContent=function(e,t){this.label.string="+"+t,this.icon.spriteFrame=e,this.iconNode.scale=1},__decorate([n(cc.Label)],t.prototype,"label",void 0),__decorate([n(cc.Sprite)],t.prototype,"icon",void 0),__decorate([n(cc.Node)],t.prototype,"iconNode",void 0),__decorate([a],t)}(cc.Component);o.default=r,cc._RF.pop()},{}],Level3000Window:[function(e,t,o){"use strict";cc._RF.push(t,"496c3mWYoNJXZTOOAXYBNQh","Level3000Window"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/UI/WWindow"),a=e("../../Game"),n=e("./content/LevelContent"),r=e("../../global/GameConfig"),s=e("../../data/MapHelper"),l=e("../../plugin/UISuperScrollView/UISuperLayout"),c=e("../../core/global/I18N"),p=e("../UICenter"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTitle=null,t.firstLevel=null,t.totalStarLabel=null,t.layout=null,t.onEnterSucc=null,t.levelCount=0,t.mChapterId=0,t.chapterBegId=0,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.initLanguage()},t.prototype.show=function(t,o,i,a){e.prototype.show.call(this),this.onEnterSucc=a,this.mChapterId=t,this.levelCount=s.default.getChapterLevelCount(t),this.chapterBegId=s.default.getChapterMinId(this.mChapterId),this.totalStarLabel.string=o+"/"+i,this.layout.total(this.levelCount)},t.prototype.initLanguage=function(){this.labelTitle.string=c.default.get("L20081")},t.prototype.getStars=function(e){var t=0,o=a.Game.userData.starData;return e<o.levels.length&&(t=o.levels[e]),t},t.prototype.onRefreshItem=function(e,t){var o=t,i=a.Game.userData.starData.levels.length+1,s=this.chapterBegId+o,l=!r.default.TEST&&s>i,c=this.getStars(s-1),p=e.getComponent(n.default);p.setContent(o,l,c),p.onClick=this.onConentClick.bind(this)},t.prototype.onConentClick=function(e){var t=this,o=s.default.getChapterMinId(this.mChapterId)+e-1,i=this.getStars(o-1);p.UICenter.openEnterGameWindow(o,function(e){e&&(t.hide(),t.onEnterSucc&&t.onEnterSucc())},!1,"",i),a.Game.uiMgr.commonClick()},__decorate([h(cc.Label)],t.prototype,"labelTitle",void 0),__decorate([h(cc.Node)],t.prototype,"firstLevel",void 0),__decorate([h(cc.Label)],t.prototype,"totalStarLabel",void 0),__decorate([h(l.default)],t.prototype,"layout",void 0),__decorate([d],t)}(i.default);o.default=f,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../data/MapHelper":"MapHelper","../../global/GameConfig":"GameConfig","../../plugin/UISuperScrollView/UISuperLayout":"UISuperLayout","../UICenter":"UICenter","./content/LevelContent":"LevelContent"}],LevelContent:[function(e,t,o){"use strict";cc._RF.push(t,"f1e9dZEuOlAo6Ct2wR1mlUA","LevelContent"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../Game"),a=e("../../../global/AudioMgr"),n=cc._decorator,r=n.ccclass,s=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.indexLabel=null,t.diamondNode=null,t.lockNode=null,t.starBg=[],t.index=0,t.isLock=!1,t.StarCount=3,t.onClick=null,t}return __extends(t,e),t.prototype.onLoad=function(){i.Game.uiMgr.setIgnoreDefaultFont(this.indexLabel)},t.prototype.setContent=function(e,t,o){this.index=e+1,this.isLock=t,this.indexLabel.string=""+this.index,this.lockNode.active=t,this.indexLabel.node.active=!t;for(var i=0;i<this.starBg.length;i++)if(this.starBg[i].active=!t,!t){var a=this.starBg[i].getChildByName("star");a&&(a.active=i<o)}},t.prototype.onContentClick=function(){this.isLock?a.AudioMgr.playEffect("lock_grid_click"):this.onClick&&this.onClick(this.index,this.node)},__decorate([s(cc.Label)],t.prototype,"indexLabel",void 0),__decorate([s(cc.Node)],t.prototype,"diamondNode",void 0),__decorate([s(cc.Node)],t.prototype,"lockNode",void 0),__decorate([s(cc.Node)],t.prototype,"starBg",void 0),__decorate([r],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../Game":"Game","../../../global/AudioMgr":"AudioMgr"}],LoaderWindow:[function(e,t,o){"use strict";cc._RF.push(t,"9dc7050Yj9NZ6nj87aq5v9C","LoaderWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../core/UI/WWindow"),a=e("../Game"),n=e("../core/global/I18N"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loading=null,t.error=null,t.errorIcon=null,t.isError=!1,t}return __extends(t,e),t.showNow=function(e){void 0===e&&(e=!1),a.Game.uiMgr.showWindow("prefab/LoaderWindow",e)},t.hideNow=function(){a.Game.uiMgr.hideWindow("prefab/LoaderWindow")},t.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.isError&&e.toBack()},this)},t.prototype.show=function(t){if(e.prototype.show.call(this),this.isError=t,this.loading.active=!t,this.error.active=t,t){var o=n.default.getSpriteFrame(this.errorIcon.spriteFrame.name);o&&(this.errorIcon.spriteFrame=o)}},__decorate([l(cc.Node)],t.prototype,"loading",void 0),__decorate([l(cc.Node)],t.prototype,"error",void 0),__decorate([l(cc.Sprite)],t.prototype,"errorIcon",void 0),__decorate([s],t)}(i.default);o.default=c,cc._RF.pop()},{"../Game":"Game","../core/UI/WWindow":"WWindow","../core/global/I18N":"I18N"}],LoadingWindow:[function(e,t,o){"use strict";cc._RF.push(t,"07faeZQ5cpEpoM1qlQ9FR60","LoadingWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../global/DataManager"),a=e("../../sdk/LogEvent"),n=e("../../Game"),r=e("../../sdk/MibData"),s=cc._decorator,l=s.ccclass,c=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressText=null,t.progress=null,t.logo=null,t.progressValue=0,t.time=0,t.logDot=0,t.progressValueInt=0,t}return __extends(t,e),t.prototype.onLoad=function(){a.default.loading(0,this.time,n.Game.userData.userType),this.node.setSiblingIndex(99999)},t.prototype.start=function(){var e=this;cc.sys.os==cc.sys.OS_ANDROID?setTimeout(function(){e.hideNativeSplash(),i.default.startLoad()},100):i.default.startLoad()},t.prototype.hideNativeSplash=function(){},t.prototype.update=function(e){if(this.time+=e,this.progressValue=i.default.getProgress(),this.progressValueInt=Math.ceil(100*this.progressValue),this.progressText.string=this.progressValueInt+"%",this.progress.progress=this.progressValue,this.logDot<10&&a.default.log(a.default.ACTION_LOADING_BEGIN),this.logDot+20<=this.progressValueInt&&(this.logDot+=20,this.logDot>90)){a.default.loading(this.logDot,this.time,n.Game.userData.userType);var t=new r.ForeEvent;t.eventTargetId="2",t.time=(1e3*this.time).toFixed(4),a.default.log(a.default.ACTION_LOADING_END),a.default.log(a.default.ACTION_GAME_START)}},__decorate([c({type:cc.Label,tooltip:"\u52a0\u8f7d\u8fdb\u5ea6"})],t.prototype,"progressText",void 0),__decorate([c({type:cc.ProgressBar,tooltip:"\u52a0\u8f7d\u8fdb\u5ea6"})],t.prototype,"progress",void 0),__decorate([c(cc.Sprite)],t.prototype,"logo",void 0),__decorate([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../global/DataManager":"DataManager","../../sdk/LogEvent":"LogEvent","../../sdk/MibData":"MibData"}],LogEvent:[function(e,t,o){"use strict";cc._RF.push(t,"d0593wb7TVP+agUQFpasApL","LogEvent"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../global/GameConfig"),a=e("../Game"),n=e("./MibData"),r=e("../core/util/StrUtil"),s=e("./SDKConst"),l=cc._decorator.ccclass,c=function(){function e(){}var t;return t=e,e.loading=function(){},e.login=function(){},e.error=function(e,o,a,n,r){i.default.SDK.logEvent(t.ERROR,{msg:e,url:o,line:a,pos:n,stack:r.stack})},e.dot=function(e){t.log(e)},e.dotInMol=function(e,o){o?t.log(e,{value:o}):t.log(e,{})},e.dotValue=function(e,o){t.log(e,{value:o})},e.log=function(e,t,o){if(i.default.SDK.logEvent(e,t,o),t){var a="";for(var n in t)""!=a&&(a+=","),a+=n+","+t[n];console.log("logEvent:"+e+","+a)}else console.log("logEvent:"+e)},e.logAF=function(e,t){i.default.SDK.logEvent(e,t),console.log("logAF eventName:",e,"params:",t)},e.dotPropLog=function(e,o,i,a,r){var s=new n.PropEvent;s.countTotal=i.toString(),s.missionId=a.toString(),s.itemType=e.toString(),s.sourceType=r.toString(),s.Count=o.toString(),t.log(t.ACTION_MODULE_CHECK,t.dot_prop_get,s)},e.dotVirtualGain=function(e,o,i,a,r){var s=new n.GetVirtualCurrency;s.missionId=e.toString(),s.number=o.toString(),s.sourceType=i.toString(),s.virtualCurrencyTotal=a.toString(),s.virtualCurrencyType=r.toString(),t.log(t.ACTION_MODULE_CHECK,t.dot_gain_get,s)},e.dotVirtualGainUse=function(e,o,i,a,r,s,l,c,p){var u=new n.VirtualCurrencyConsume;u.itemNumber=e.toString(),u.itemPrice=o.toString(),u.itemType=i.toString(),u.missionId=a.toString(),u.number=r.toString(),u.sourceSubType=s.toString(),u.sourceType=l.toString(),u.virtualCurrencyTotal=c.toString(),u.virtualCurrencyType=p.toString(),t.log(t.ACTION_MODULE_CHECK,t.dot_gain_use,u)},e.dotRechargeScenarios=function(e){var o=new n.RechargeScenarios;o.missionId=a.Game.userData.dotData.currentLevel.toString(),o.eventTargetId=e.toString(),t.log(t.ACTION_MODULE_CHECK,t.dot_rechargeScenarios_event,o)},e.dotAdPv=function(e){var o=new n.AdPv;o.missionId=a.Game.userData.dotData.currentLevel.toString(),this.dot_ad_uuid="ad"+r.default.getUuid(),o.eventAdId="{'eventadid':'"+this.dot_ad_uuid+"'}",o.eventTargetId=e.toString(),t.log(t.ACTION_MODULE_CHECK,t.dot_ad_rv_start,o)},e.dotAdRewardClick=function(e){var o=new n.AdClick;o.missionId=a.Game.userData.dotData.currentLevel.toString(),o.eventAdId="{'eventadid':'"+this.dot_ad_uuid+"'}",o.eventTargetId=e.toString(),o.eventTargetType=e.toString(),o.eventTargetdesc=s.default.AD_TYPE_REWARD,t.log(t.ACTION_MODULE_CHECK,t.dot_ad_click,o)},e.dotAdInterstClick=function(e){var o=new n.AdClick;o.missionId=a.Game.userData.dotData.currentLevel.toString(),o.eventAdId="{'eventadid':'"+this.dot_ad_uuid+"'}",o.eventTargetId=e.toString(),o.eventTargetType=e.toString(),o.eventTargetdesc=s.default.AD_TYPE_INTERST,t.log(t.ACTION_MODULE_CHECK,t.dot_ad_click,o)},e.dot_random_start="random_start",e.dot_winning_start="winning_start",e.dot_daily_start="daily_start",e.dot_replay_start="replay_start",e.dot_daily_cancel="daily_cancel",e.dot_nousefulmove_show="nousefulmove_show",e.dot_time="time",e.dot_moves="moves",e.dot_success_show="success_show",e.dot_hint_click="hint_click",e.dot_undo_click="undo_click",e.dot_card_click="card_click",e.dot_card_change="card_change",e.dot_table_click="table_click",e.dot_table_change="table_change",e.dot_settings_click="settings_click",e.dot_ad_rv_start="role_view",e.dot_ad_rv_complete="ad_rv_complete",e.dot_ad_is_show="ad_is_show",e.dot_ad_click="click_event",e.dot_loading_app="client.event",e.dot_prop_use="itemUse",e.dot_prop_get="itemGet",e.dot_gain_use="virtualcurrency.consume",e.dot_gain_get="virtualcurrency.purchase",e.dot_lv_start="role.missionstart",e.dot_lv_end="role.missionend",e.dot_novice_guide="new_guide",e.dot_pay_request="click_recharge",e.dot_pay_finished="role.recharge",e.dot_addcoin_event="piggy_get",e.dot_pigbank_ad="piggy_ad",e.dot_rechargeScenarios_event="role_view_recharge",e.dot_keep_start="role_log",e.dot_keep_goin="role_log",e.dot_keep_missid="role_log",e.dot_user_rating="rate_event",e.KEY_APPKEY="appkey",e.KEY_SESSION="session",e.KEY_PARAM1="param1",e.KEY_PARAM2="param2",e.KEY_ACTION="action",e.EVENT_CUST="game_custom",e.ACTION_APP_START="app_start",e.ACTION_LOADING_BEGIN="loading_begin",e.ACTION_LOADING_END="loading_end",e.ACTION_LOGIN_UI="login_ui",e.ACTION_LOGIN_CLICK="login_click",e.ACTION_LOGIN_RESULT="login_result",e.ACTION_CREATE_ROLE="create_role",e.ACTION_GAME_START="game_start",e.ACTION_TUTORIAL_BEGIN="tutorial_begin",e.ACTION_TUTORIAL_END="tutorial_end",e.ACTION_TUTORIAL_REWARD="tutorial_reward",e.ACTION_MODULE_CHECK="module_check",e.ACTION_PLAY_MISSION="play_mission",e.ACTION_LEVEL_BEGIN="level_begin",e.ACTION_LEVEL_END="level_end",e.ACTION_LEVEL_REWARD="level_reward",e.dot_ad_uuid="47AAA7DA-C5D5-0AC5-A03A",e.LOADING="client.event",e.LOGIN="client.event",e.ERROR="ERROR",e.dot_click_tip="click_tip",e.dot_click_back="click_back",e.dot_click_classic="click_classic",e.dot_click_arachde="click_arachde",e.dot_Purchase_50="Purchase50",e.dot_Purchase_100="Purchase100",t=__decorate([l],e)}();o.default=c,cc._RF.pop()},{"../Game":"Game","../core/util/StrUtil":"StrUtil","../global/GameConfig":"GameConfig","./MibData":"MibData","./SDKConst":"SDKConst"}],MainHomePage:[function(e,t,o){"use strict";cc._RF.push(t,"d9fddPzgzJLma6LZ/t46N+/","MainHomePage"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../Game"),a=e("../../../core/global/Emitter"),n=e("../../UICenter"),r=e("../../../sdk/LogEvent"),s=e("../../../global/Const"),l=e("../../../global/GameConfig"),c=e("../../AnimationUtil"),p=e("../../../App"),u=e("../../../sdk/SDKConst"),d=e("../../../game/BoxOpenSystem"),h=e("../../../game/type/Enum"),f=e("./../main/MainPage"),g=e("../../../core/util/MathUtil"),y=e("../../../core/global/I18N"),m=e("../../../data/ShopHelper"),v=e("../../../sdk/MibData"),_=e("../../../core/rili/DaliyHelper"),b=cc._decorator,T=b.ccclass,C=b.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelStars=null,t.iconStar=null,t.starProgress=null,t.startBtnNode=null,t.beginnerGiftNode=null,t.boxNode=null,t.startBtnLabel=null,t.chapterSprite=null,t.roleSprite=null,t.labelGifts=null,t.labelSpin=null,t.dailyNode=null,t.bonusRedTip=null,t.dailyRedTip=null,t.dailyLockNode=null,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.initLanguage(),a.Emitter.register(s.default.eLanguageChange,this.initLanguage,this),a.Emitter.register(s.default.eOnBeginnerPurchased,this.initGeginnerGiftBtn,this),a.Emitter.register(s.default.eOnShowRL,this.showRl,this),a.Emitter.register(s.default.eOnBonusTipChange,this.bonusRedTipChange,this),a.Emitter.register(s.default.eOnDailyTipChange,this.dailyRedTipChange,this)},t.prototype.show=function(t,o){this.mResult=o,e.prototype.show.call(this,t),this.showCollectStars(),this.initChapterView(),r.default.dotAdPv(u.default.AD_PLAY_POS_SHOP),setTimeout(this.delayShowAni.bind(this),1e3*p.default.delta);var a=i.Game.userData;this.dailyNode.active=a.lvRwd.This>=l.default.OpenDailyLevel,this.dailyLockNode.active=a.lvRwd.This<l.default.OpenDailyLevel;var n=i.Game.userData.bonusData.SpinTimes<l.default.BonusFreeTime;this.bonusRedTipChange(n);var s=a.lvRwd.This>=l.default.OpenDailyLevel&&0==this.currentDailyChallengeWin();this.dailyRedTipChange(s)},t.prototype.delayShowAni=function(){var e=this;if(this.mResult){var t=function(){};if(this.mResult.level&&(t=function(){var t=i.Game.userData;n.UICenter.openEnterGameWindow(t.lvRwd.This,function(t){t&&e.mMainWindow.hide()},!1)}),this.mResult.star){this.mMainWindow.stopEventOn();var o=this.mResult.level;c.default.starsFly(this.node,this.startBtnNode,this.iconStar,this.mResult.star,1,function(){e.mResult.star--,e.showCollectStars()},function(){},function(){i.Game.userData.starData.total>=l.default.CollectStarTarget?e.openStarChest(function(){o&&t()}):o&&t(),e.mResult=null,e.mMainWindow.stopEventOff()})}else this.mResult.level&&this.onEnterGame(this.mResult.level),this.mResult=null}},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.initLanguage=function(){this.labelGifts.string=y.default.get("L31001"),this.labelSpin.string=y.default.get("L10009")},t.prototype.onArcadeClick=function(){n.UICenter.openMapWindow(this.mMainWindow),r.default.logAF(r.default.dot_click_arachde)},t.prototype.onBonusClick=function(){n.UICenter.openBonusWindow(null,function(){n.UICenter.openStrengthWindow(!0)})},t.prototype.onGiftClick=function(){var e=this;n.UICenter.openStarGiftWindow(function(){e.onStartClick()})},t.prototype.showCollectStars=function(){var e=i.Game.userData.starData.total;this.mResult&&this.mResult.star>0&&(e-=this.mResult.star),this.starProgress.progress=e/l.default.CollectStarTarget,this.labelStars.string=e+"/"+l.default.CollectStarTarget},t.prototype.initGeginnerGiftBtn=function(){var e=i.Game.userData.shopData;this.beginnerGiftNode.active=e.buyIds.findIndex(function(e){return e==m.default.BeginnerGiftId})<0},t.prototype.initChapterView=function(){var e=i.Game.userData;this.startBtnLabel.string=y.default.get("L30005")+" "+e.lvRwd.This},t.prototype.onEnterGame=function(e){i.Game.gameMgr.startArcade(e),this.mMainWindow.hide()},t.prototype.onStartClick=function(){var e=this,t=i.Game.userData;n.UICenter.openEnterGameWindow(t.lvRwd.This,function(t){t&&e.mMainWindow.hide()},!1)},t.prototype.onAdClick=function(){var e=this;i.Game.sdkPipeline.showReward(function(t){t&&e.watchComplete()},this,u.default.AD_PLAY_POS_SHOP)},t.prototype.watchComplete=function(){var e=l.default.ShopWatchReward,t=[new d.Prop(h.PropType.PropGold,e)];n.UICenter.openGainItemWindow(t,function(){},!1,h.ItemFromType.FromBonus)},t.prototype.giftChestAnimate=function(e){cc.tween(this.boxNode).to(.1,{scaleX:1.2,scaleY:.8}).to(.1,{scaleX:.9,scaleY:1.1}).to(.2,{scaleX:1.2,scaleY:.8}).to(.2,{scaleX:1,scaleY:1}).call(e).start()},t.prototype.onVipClick=function(){n.UICenter.openVipWindow()},t.prototype.onSignClick=function(){},t.prototype.onChangeBgClick=function(){},t.prototype.onBeginnerGiftClick=function(){(new v.NoviceGuide).eventTargetId="1",r.default.log(r.default.ACTION_TUTORIAL_REWARD),r.default.dotRechargeScenarios(4),n.UICenter.openBeginnerGiftWindow()},t.prototype.getProps=function(){var e=l.default.GiftBoxRandomTimes[0],t=l.default.GiftBoxRandomTimes[1]+1,o=g.default.randomRange(e,t);return d.default.getPropList(o)},t.prototype.gainProp=function(e,t){for(var o=i.Game.userData.goldData,a=i.Game.userData.lvRwd.This,n=0,s=e;n<s.length;n++){var l=s[n],c=t?2*l.propNum:l.propNum;switch(l.propType){case h.PropType.PropGold:o.gold+=c,r.default.dotVirtualGain(a,c,4,o.gold,1);break;case h.PropType.PropUndo:var p=c;o.propUndo+=p,r.default.dotPropLog(h.PropType.PropUndo,p,o.propUndo,a,4);break;case h.PropType.PropAuto:var u=c;o.propAuto+=u,r.default.dotPropLog(h.PropType.PropAuto,l.propNum,o.propAuto,a,4);break;case h.PropType.PropRefresh:var d=c;o.propRefresh+=d,r.default.dotPropLog(h.PropType.PropRefresh,d,o.propRefresh,a,4);break;default:console.log("[],propType error",l.propType)}}i.Game.userData.goldData=o},t.prototype.openStarChest=function(e){var t=this,o=i.Game.userData.starData;o.total-=l.default.CollectStarTarget,i.Game.userData.starData=o,this.showCollectStars();var a=this.getProps();n.UICenter.openGainItemWindow(a,function(e){t.gainProp(a,e)},!0,h.ItemFromType.FromChest,e)},t.prototype.onSelectPage=function(e,t){var o=this;1==Number(t)&&n.UICenter.openDailyWin(function(e){e&&o.mMainWindow.hide()})},t.prototype.onPigbankClick=function(){n.UICenter.openPigBankWindow(!0)},t.prototype.onShopClick=function(){n.UICenter.openMainShopWindow()},t.prototype.showRl=function(){var e=this;n.UICenter.openDailyWin(function(t){t&&e.mMainWindow.hide()})},t.prototype.bonusRedTipChange=function(e){this.bonusRedTip.active=e},t.prototype.dailyRedTipChange=function(e){this.dailyRedTip.active=e},t.prototype.currentDailyChallengeWin=function(){var e=new Date,t=e.getFullYear(),o=e.getMonth(),i=e.getDate();return _.default.getDaliyDayData(t,o,i)[0]>0},t.prototype.onDailyClick=function(){var e=this;i.Game.userData.lvRwd.This<l.default.OpenDailyLevel||n.UICenter.openDailyWin(function(t){t&&e.mMainWindow.hide()})},__decorate([C(cc.Label)],t.prototype,"labelStars",void 0),__decorate([C(cc.Node)],t.prototype,"iconStar",void 0),__decorate([C(cc.ProgressBar)],t.prototype,"starProgress",void 0),__decorate([C(cc.Node)],t.prototype,"startBtnNode",void 0),__decorate([C(cc.Node)],t.prototype,"beginnerGiftNode",void 0),__decorate([C(cc.Node)],t.prototype,"boxNode",void 0),__decorate([C(cc.Label)],t.prototype,"startBtnLabel",void 0),__decorate([C(cc.Sprite)],t.prototype,"chapterSprite",void 0),__decorate([C(cc.Sprite)],t.prototype,"roleSprite",void 0),__decorate([C(cc.Label)],t.prototype,"labelGifts",void 0),__decorate([C(cc.Label)],t.prototype,"labelSpin",void 0),__decorate([C(cc.Node)],t.prototype,"dailyNode",void 0),__decorate([C(cc.Node)],t.prototype,"bonusRedTip",void 0),__decorate([C(cc.Node)],t.prototype,"dailyRedTip",void 0),__decorate([C(cc.Node)],t.prototype,"dailyLockNode",void 0),__decorate([T],t)}(f.default);o.default=S,cc._RF.pop()},{"../../../App":"App","../../../Game":"Game","../../../core/global/Emitter":"Emitter","../../../core/global/I18N":"I18N","../../../core/rili/DaliyHelper":"DaliyHelper","../../../core/util/MathUtil":"MathUtil","../../../data/ShopHelper":"ShopHelper","../../../game/BoxOpenSystem":"BoxOpenSystem","../../../game/type/Enum":"Enum","../../../global/Const":"Const","../../../global/GameConfig":"GameConfig","../../../sdk/LogEvent":"LogEvent","../../../sdk/MibData":"MibData","../../../sdk/SDKConst":"SDKConst","../../AnimationUtil":"AnimationUtil","../../UICenter":"UICenter","./../main/MainPage":"MainPage"}],MainPage:[function(e,t,o){"use strict";cc._RF.push(t,"5e705yFaM9PgJ2Cg+trUlWA","MainPage"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/UI/UIRootFit"),a=e("../../../core/UI/WNode"),n=e("../../../Game"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fitBgs=[],t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this);var t=n.Game.uiMgr.uiRoot.getComponent(i.default);if(t){var o=this.mMainWindow.getComponent(cc.Widget);this.node.width*=1/t.scaleFactor;for(var a=0,r=this.fitBgs;a<r.length;a++){var s=r[a];s.width*=1/t.scaleFactor,s.height*=1/t.scaleFactor,s.height<cc.winSize.height&&(s.height=cc.winSize.height),s.y=(o.top-o.bottom)/2}}},t.prototype.show=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];this.mMainWindow=t[0],e.prototype.show.call(this)},__decorate([l(cc.Node)],t.prototype,"fitBgs",void 0),__decorate([s],t)}(a.default);o.default=c,cc._RF.pop()},{"../../../Game":"Game","../../../core/UI/UIRootFit":"UIRootFit","../../../core/UI/WNode":"WNode"}],MainShopPage:[function(e,t,o){"use strict";cc._RF.push(t,"a8bb5KzRXBAzZEtW16rhksB","MainShopPage"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/Emitter"),a=e("../../../global/Const"),n=e("../shop/ShopComp"),r=e("./MainPage"),s=cc._decorator,l=s.ccclass,c=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shopComp=null,t}return __extends(t,e),t.prototype.init=function(){var t=this;this.shopComp.shopWindowType=1,this.shopComp.onBuySucc=this.onBuySucc.bind(this),i.Emitter.register(a.default.eOnBeginnerPurchased,function(e){1!=e&&t.onBuySucc()},this),e.prototype.init.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.shopComp.refreshItemsNoTab()},t.prototype.onBuySucc=function(){this.shopComp.refreshItemsNoTab()},__decorate([c(n.default)],t.prototype,"shopComp",void 0),__decorate([l],t)}(r.default);o.default=p,cc._RF.pop()},{"../../../core/global/Emitter":"Emitter","../../../global/Const":"Const","../shop/ShopComp":"ShopComp","./MainPage":"MainPage"}],MainShopWindow:[function(e,t,o){"use strict";cc._RF.push(t,"6e0f3VQFxdLQpUknn+CYaI5","MainShopWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/UI/WWindow"),n=e("../../Game"),r=e("../../game/type/Enum"),s=e("../../global/Const"),l=e("./shop/ShopComp"),c=cc._decorator,p=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shopComp=null,t.lab_money=null,t}return __extends(t,e),t.prototype.init=function(){var t=this;this.shopComp.shopWindowType=1,this.shopComp.onBuySucc=this.onBuySucc.bind(this),i.Emitter.register(s.default.eOnBeginnerPurchased,function(e){1!=e&&t.onBuySucc()},this),i.Emitter.register(s.default.eGoldDataChanged,this.goldChange,this),i.Emitter.register("rewardedAdLoadState",function(e){t.shopComp.refreshAdCoinItem(e)},this),e.prototype.init.call(this)},t.prototype.show=function(){e.prototype.show.call(this),this.shopComp.refreshItemsTab(r.ShopType.CoinsShop);var t=n.Game.userData.goldData;this.lab_money.string=""+t.gold},t.prototype.onBuySucc=function(){this.shopComp.refreshItemsTab(r.ShopType.CoinsShop)},t.prototype.goldChange=function(){var e=n.Game.userData.goldData;this.lab_money.string=""+e.gold},__decorate([u(l.default)],t.prototype,"shopComp",void 0),__decorate([u(cc.Label)],t.prototype,"lab_money",void 0),__decorate([p],t)}(a.default);o.default=d,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../game/type/Enum":"Enum","../../global/Const":"Const","./shop/ShopComp":"ShopComp"}],MainToggleItem:[function(e,t,o){"use strict";cc._RF.push(t,"a9a5djgVFZAe5rWkrtye6GZ","MainToggleItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/UI/UIRootFit"),a=e("../../../Game"),n=e("../../../game/type/Enum"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.MainToggleType.None,t.toggle=null,t.background=null,t.label=null,t.selectPos=87,t.selectSize=332,t.unSelectSize=182,t.moveTm=.1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=a.Game.uiMgr.uiRoot.getComponent(i.default);e&&(this.selectSize*=1/e.scaleFactor,this.unSelectSize*=1/e.scaleFactor),this.toggle=this.getComponent(cc.Toggle),this.background=this.node.getChildByName("Background"),this.label=this.background.getChildByName("Label").getComponent(cc.Label);var t=new cc.Component.EventHandler;t.target=this.node,t.component="MainToggleItem",t.handler="onChecked",this.toggle.checkEvents.push(t),this.updateSize(),this.onChecked()},t.prototype.updateSize=function(){this.toggle.isChecked?this.node.width=this.selectSize:this.node.width=this.unSelectSize},t.prototype.onChecked=function(){var e=this;cc.Tween.stopAllByTarget(this.background),this.toggle.isChecked?(this.node.width=this.selectSize,this.label.node.active=!0,cc.tween(this.background).to(this.moveTm,{y:this.selectPos},{easing:"cubicOut"}).start()):(this.node.width=this.unSelectSize,cc.tween(this.background).to(this.moveTm,{y:0},{easing:"cubicOut"}).call(function(){e.label.node.active=!1}).start())},__decorate([l({type:cc.Enum(n.MainToggleType)})],t.prototype,"type",void 0),__decorate([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../Game":"Game","../../../core/UI/UIRootFit":"UIRootFit","../../../game/type/Enum":"Enum"}],MainToggles:[function(e,t,o){"use strict";cc._RF.push(t,"c2607h7TQFAiowHE79jWajH","MainToggles"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/I18N"),a=e("../../../core/UI/UIRootFit"),n=e("../../../Game"),r=e("../../../sdk/LogEvent"),s=e("./MainToggleItem"),l=cc._decorator,c=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleItems=[],t.selected=null,t.layout=null,t.labelShop=null,t.labelEvent=null,t.labelHome=null,t.labelVS=null,t.labelRank=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=n.Game.uiMgr.uiRoot.getComponent(a.default);e&&(this.selected.width*=1/e.scaleFactor),this.toggleItems=this.getComponentsInChildren(s.default)},t.prototype.start=function(){var e=this;this.layout.updateLayout();var t=this.toggleItems.find(function(e){return e.toggle.isChecked});setTimeout(function(){e.selected.x=t.node.x},30),this.initLanguage()},t.prototype.initLanguage=function(){this.labelShop.string=i.default.get("L30002"),this.labelEvent.string=i.default.get("L40002"),this.labelHome.string=i.default.get("L40034"),this.labelVS.string=i.default.get("L40003"),this.labelRank.string=i.default.get("L40004")},t.prototype.onContainerClick=function(e){1==e.getComponent(s.default).type&&r.default.dotRechargeScenarios(1),this.onPageClick&&this.onPageClick(e.getComponent(s.default).type),this.onSwitchToggle(e)},t.prototype.onSwitch=function(e){var t=this.toggleItems[e-1];t.toggle.check(),t.onChecked(),this.onSwitchToggle(t.toggle)},t.prototype.onSwitchToggle=function(e){for(var t=0,o=this.toggleItems;t<o.length;t++)(n=o[t]).updateSize();this.layout.updateLayout();for(var i=0,a=this.toggleItems;i<a.length;i++){var n;(n=a[i]).node!=e.node&&n.onChecked()}cc.tween(this.selected).to(.5,{x:e.node.x},{easing:"cubicOut"}).start()},__decorate([p(cc.Node)],t.prototype,"selected",void 0),__decorate([p(cc.Layout)],t.prototype,"layout",void 0),__decorate([p(cc.Label)],t.prototype,"labelShop",void 0),__decorate([p(cc.Label)],t.prototype,"labelEvent",void 0),__decorate([p(cc.Label)],t.prototype,"labelHome",void 0),__decorate([p(cc.Label)],t.prototype,"labelVS",void 0),__decorate([p(cc.Label)],t.prototype,"labelRank",void 0),__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Game":"Game","../../../core/UI/UIRootFit":"UIRootFit","../../../core/global/I18N":"I18N","../../../sdk/LogEvent":"LogEvent","./MainToggleItem":"MainToggleItem"}],MainWindow:[function(e,t,o){"use strict";cc._RF.push(t,"e6c2cbWyBJPupNgfFYR3+F8","MainWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/Emitter"),a=e("../../../core/UI/UIRootFit"),n=e("../../../core/UI/WWindow"),r=e("../../../Game"),s=e("../../../game/type/Enum"),l=e("../../../global/Const"),c=e("../../UICenter"),p=e("./MainHomePage"),u=e("./MainPage"),d=e("./MainToggles"),h=cc._decorator,f=h.ccclass,g=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pagesNode=null,t.pageWidth=1180,t.mainToggles=null,t.pages=[],t.homePage=null,t.removeAdNode=null,t.currentPage=null,t.currentType=s.MainToggleType.Home,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this);var t=r.Game.uiMgr.uiRoot.getComponent(a.default);t&&(this.pageWidth*=1/t.scaleFactor,this.pagesNode.getComponent(cc.Layout).spacingX*=1/t.scaleFactor),this.mainToggles.onPageClick=this.onSwitchPage.bind(this);for(var o=0,n=this.pages;o<n.length;o++)n[o].show(this);i.Emitter.register(l.default.eHideRemoveAd,this.hideRemoveAdNode,this)},t.prototype.show=function(t,o,i){this.mShowFinish=o,e.prototype.show.call(this,null,t),this.homePage.show(this,i),this.updateCurrentPage(s.MainToggleType.Home)},t.prototype.onShow=function(){e.prototype.onShow.call(this),this.mShowFinish&&this.mShowFinish(),c.UICenter.openStrengthWindow(!0,!0)},t.prototype.hide=function(){e.prototype.hide.call(this),c.UICenter.closeStrengthWindow()},t.prototype.onSettingClick=function(){c.UICenter.openSettingWin()},t.prototype.updateCurrentPage=function(e){this.currentType=e,this.currentPage=this.pages[e-1],this.centerPage(e)},t.prototype.onSwitchPage=function(e){this.currentType!==e&&(this.pages[e-1],this.updateCurrentPage(e))},t.prototype.centerPage=function(e){cc.tween(this.pagesNode).to(.5,{x:this.pageWidth*(3-e)},{easing:"cubicOut"}).start()},t.prototype.onRemoveAdClick=function(){c.UICenter.openRemoveAdWindow()},t.prototype.hideRemoveAdNode=function(){this.removeAdNode.active=!1},__decorate([g(cc.Node)],t.prototype,"pagesNode",void 0),__decorate([g],t.prototype,"pageWidth",void 0),__decorate([g(d.default)],t.prototype,"mainToggles",void 0),__decorate([g(u.default)],t.prototype,"pages",void 0),__decorate([g(p.default)],t.prototype,"homePage",void 0),__decorate([g(cc.Node)],t.prototype,"removeAdNode",void 0),__decorate([f],t)}(n.default);o.default=y,cc._RF.pop()},{"../../../Game":"Game","../../../core/UI/UIRootFit":"UIRootFit","../../../core/UI/WWindow":"WWindow","../../../core/global/Emitter":"Emitter","../../../game/type/Enum":"Enum","../../../global/Const":"Const","../../UICenter":"UICenter","./MainHomePage":"MainHomePage","./MainPage":"MainPage","./MainToggles":"MainToggles"}],MapContent:[function(e,t,o){"use strict";cc._RF.push(t,"6e2d3fD+YZE17ASE8mFt8UD","MapContent"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/I18N"),a=e("../../../core/UI/WNode"),n=e("../../../core/util/ResUtil"),r=e("../../../core/util/StrUtil"),s=e("../../../data/MapHelper"),l=e("../../../global/AudioMgr"),c=cc._decorator,p=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.count=null,t.starNode=null,t.labelChapter=null,t.frame=null,t.line=null,t.star=null,t.flagNode=null,t.lockNode=null,t.flagIcon=null,t.flagFrame=null,t.chapterId=0,t.isLock=!1,t.currStars=0,t.totalStars=0,t.onClick=null,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.frame=this.node.getChildByName("iconFrame").getComponent(cc.Sprite),this.line=this.node.getChildByName("line").getComponent(cc.Sprite),this.star=this.starNode.getChildByName("star").getComponent(cc.Sprite),this.flagNode=this.node.getChildByName("flag"),this.lockNode=this.node.getChildByName("lock"),this.flagIcon=this.flagNode.getChildByName("icon").getComponent(cc.Sprite),this.flagFrame=this.flagNode.getChildByName("frame").getComponent(cc.Sprite)},t.prototype.setContent=function(e,t,o){var a=this;this.chapterId=e,this.isLock=t,this.currStars=t?0:s.default.getCurrStars(this.chapterId),this.setLock(t),this.line.node.active=!o,this.totalStars=s.default.getTotalStars(this.chapterId),this.count.string=this.currStars+"/"+this.totalStars,this.labelChapter.string=r.default.stringFormat(i.default.get("L40011"),e),n.ResUtil.loadRes(s.default.getCName(e),n.eResType.Texture,function(e){return a.flagIcon.spriteFrame=e})},t.prototype.setLock=function(e){this.lockNode.active=e,this.count.node.color=e?o.grayColor:o.normalColor,this.labelChapter.node.color=e?o.grayColor:o.normalColor},t.prototype.setMat=function(e){this.frame.setMaterial(0,e),this.line.setMaterial(0,e),this.star.setMaterial(0,e),this.flagIcon.setMaterial(0,e),this.flagFrame.setMaterial(0,e)},t.prototype.onContentClick=function(){this.isLock?l.AudioMgr.playEffect("lock_grid_click"):this.onClick&&this.onClick(this.chapterId,this.currStars,this.totalStars)},t.normalColor=new cc.Color(139,60,38,255),t.grayColor=new cc.Color(128,128,128,255),__decorate([u(cc.Label)],t.prototype,"count",void 0),__decorate([u(cc.Node)],t.prototype,"starNode",void 0),__decorate([u(cc.Label)],t.prototype,"labelChapter",void 0),o=__decorate([p],t)}(a.default);o.default=d,cc._RF.pop()},{"../../../core/UI/WNode":"WNode","../../../core/global/I18N":"I18N","../../../core/util/ResUtil":"ResUtil","../../../core/util/StrUtil":"StrUtil","../../../data/MapHelper":"MapHelper","../../../global/AudioMgr":"AudioMgr"}],MapHelper:[function(e,t,o){"use strict";cc._RF.push(t,"a651eESNE5G6IWjjk2n7LVu","MapHelper"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../core/Table/Table"),a=e("../core/Table/TableHelper"),n=e("../Game"),r=function(){function e(){}return e.getCName=function(e){for(var t in this.CNAME)if(e<this.CNAME[t])return"map/flag_"+t},e.getRoleName=function(e){for(var t in this.CNAME)if(e<this.CNAME[t])return"map/renwu_"+t},e.getMapIcon=function(e){var t="",o=0,i=0;for(var a in this.CNAME){if(e<=this.CNAME[a]){t=a,i=e-o;break}o=this.CNAME[a]}return e>17&&(i=1),"map/home_"+t+i},e.getCurrChapterId=function(e){var t=0,o=a.TableHelper.GetFieldByIndex(i.eTable.eTabMap,e-1);return o&&(t=o.chapter),t},e.getCurrChapterLevelId=function(e){var t=0,o=a.TableHelper.GetFieldByIndex(i.eTable.eTabMap,e-1);return o&&(t=o.Checkpoint),t},e.getChapterInfo=function(){var e=n.Game.userData.starData.levels.length+1;return this.getCurrChapterId(e)+"-"+this.getCurrChapterLevelId(e)},e.getChapterMinId=function(e){for(var t=0,o=a.TableHelper.GetCount(i.eTable.eTabMap),n=0;n<o;n++){var r=a.TableHelper.GetFieldByIndex(i.eTable.eTabMap,n);if(r.chapter==e&&1==r.Checkpoint){t=r.GetID();break}}return t},e.getChapterLevelCount=function(e){for(var t=0,o=a.TableHelper.GetCount(i.eTable.eTabMap),n=0;n<o;n++)a.TableHelper.GetFieldByIndex(i.eTable.eTabMap,n).chapter==e&&t++;return t},e.getChapterIdByLevelId=function(e){var t=0,o=a.TableHelper.GetFieldByIndex(i.eTable.eTabMap,e-1);return o&&(t=o.chapter),t},e.getTotalStars=function(e){for(var t=0,o=a.TableHelper.GetCount(i.eTable.eTabMap),n=0;n<o;n++)a.TableHelper.GetFieldByIndex(i.eTable.eTabMap,n).chapter==e&&(t+=3);return t},e.getCurrStars=function(e){for(var t=0,o=n.Game.userData.starData,r=a.TableHelper.GetCount(i.eTable.eTabMap),s=0;s<r;s++){var l=a.TableHelper.GetFieldByIndex(i.eTable.eTabMap,s);if(l.chapter==e){var c=l.GetID()-1;if(!(c<o.levels.length))break;t+=o.levels[c]}}return t},e.maxChapterCount=40,e.CNAME={CN:6,JP:11,IT:14,FR:16,IN:40},e}();o.default=r,cc._RF.pop()},{"../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper"}],MapManager:[function(e,t,o){"use strict";cc._RF.push(t,"c13e1yERQlGtr+pqd2zgwIO","MapManager"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../global/GameConfig"),a=function(){function e(){this._posMap=[],this._posDisMap=[],this.width=null,this.height=null,this.beginX=null,this.beginY=null}return e.prototype.getPos=function(e,t){return"number"==typeof e?this._posMap[e][t]:this._posMap[e.x][e.y]},e.prototype.getDisPos=function(e,t){return"number"==typeof e?this._posDisMap[e][t]:this._posDisMap[e.x][e.y]},e.getInstance=function(){return e.instance},e.prototype.init=function(){cc.log("MapManager \u521d\u59cb\u5316\uff01"+this._posMap.length),this.generatePosMap(),this.generateDisPosMap()},e.prototype.generatePosMap=function(){this._posMap=[],this.width=2*i.default.padding+i.default.size*i.default.col+i.default.spacing*(i.default.col-1),this.height=2*i.default.padding+i.default.size*i.default.row+i.default.spacing*(i.default.row-1),this.beginX=-this.width/2+i.default.padding+i.default.size/2,this.beginY=this.height/2-i.default.padding-i.default.size/2,cc.log("beginX:"+this.beginX+"beginY:"+this.beginY);for(var e=0;e<i.default.col;e++){for(var t=[],o=this.beginX+e*(i.default.size+i.default.spacing),a=0;a<i.default.row;a++){var n=this.beginY-a*(i.default.size+i.default.spacing);t.push(cc.v2(o,n))}this._posMap.push(t)}},e.prototype.generateDisPosMap=function(){this._posDisMap=[],this.width=2*i.default.padding+i.default.size*i.default.col+i.default.spacing*(i.default.col-1),this.height=2*i.default.padding+i.default.size*i.default.row+i.default.spacing*(i.default.row-1),this.beginX=-this.width/2+i.default.padding+i.default.size,this.beginY=this.height/2-i.default.padding-i.default.size;for(var e=0;e<i.default.col;e++){for(var t=[],o=this.beginX+e*(i.default.size+i.default.spacing),a=0;a<i.default.row;a++){var n=this.beginY-a*(i.default.size+i.default.spacing);t.push(cc.v2(o,n))}this._posDisMap.push(t)}},e.instance=new e,e}();o.default=a,cc._RF.pop()},{"../../global/GameConfig":"GameConfig"}],MapWindow:[function(e,t,o){"use strict";cc._RF.push(t,"8f873cAMFxD87jdocMQRiN8","MapWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/UI/WWindow"),a=e("../../data/MapHelper"),n=e("../../Game"),r=e("../../global/GameConfig"),s=e("../../plugin/UISuperScrollView/UISuperLayout"),l=e("../UICenter"),c=e("./content/MapContent"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.normalMat=null,t.grayMat=null,t.chapterInfo=null,t.levelStars=null,t.superLayout=null,t.mCurrentChapterId=0,t}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t);var o=n.Game.userData.starData.levels.length+1;this.mCurrentChapterId=a.default.getCurrChapterId(o),this.showChapterInfo(),this.showLevelStars(),this.superLayout.total(20)},t.prototype.onRefreshItem=function(e,t){var o=e.getChildByName("item1").getComponent(c.default),i=e.getChildByName("item2").getComponent(c.default);this.initContent(o,2*t),this.initContent(i,2*t+1)},t.prototype.initContent=function(e,t){var o=n.Game.userData.starData.levels.length+1,i=t+1,s=!r.default.TEST&&this.isLockChapter(i,o);e.setMat(s?this.grayMat:this.normalMat),e.setContent(i,s,t==a.default.maxChapterCount-1),e.onClick=this.onConentClick.bind(this)},t.prototype.onCurLevelClick=function(){var e=a.default.getCurrStars(this.mCurrentChapterId),t=a.default.getTotalStars(this.mCurrentChapterId);this.onConentClick(this.mCurrentChapterId,e,t)},t.prototype.onConentClick=function(e,t,o){var i=this;l.UICenter.openLevel3000Window(e,t,o,function(){i.hide()})},t.prototype.isLockChapter=function(e,t){var o=a.default.getChapterMinId(e);return!(o&&o<=t)},t.prototype.showChapterInfo=function(){this.chapterInfo.string=a.default.getChapterInfo()},t.prototype.showLevelStars=function(){for(var e=n.Game.userData.starData,t=0,o=0;o<e.levels.length;o++)t+=e.levels[o];this.levelStars.string=""+t},__decorate([d(cc.Material)],t.prototype,"normalMat",void 0),__decorate([d(cc.Material)],t.prototype,"grayMat",void 0),__decorate([d(cc.Label)],t.prototype,"chapterInfo",void 0),__decorate([d(cc.Label)],t.prototype,"levelStars",void 0),__decorate([d(s.default)],t.prototype,"superLayout",void 0),__decorate([u],t)}(i.default);o.default=h,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../data/MapHelper":"MapHelper","../../global/GameConfig":"GameConfig","../../plugin/UISuperScrollView/UISuperLayout":"UISuperLayout","../UICenter":"UICenter","./content/MapContent":"MapContent"}],MathUtil:[function(e,t,o){"use strict";cc._RF.push(t,"fe90a+QE4NC6aP2o+wsueeg","MathUtil"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.clamp=function(e,t,o){return e<t?e=t:e>o&&(e=o),e},e.clamp01=function(e){return e<0?e=0:e>1&&(e=1),e},e.randomRange=function(e,t){var o=t-e;return e+Math.floor(Math.random()*o)},e.vec3=function(e,t){return e instanceof cc.Vec2?new cc.Vec3(e.x,e.y,0):new cc.Vec3(e,t,0)},e.vec2=function(e){return e instanceof cc.Vec2?e:new cc.Vec2(e.x,e.y)},e.deg2Rad=Math.PI/180,e.rad2Deg=180/Math.PI,e}();o.default=i,cc._RF.pop()},{}],MibData:[function(e,t,o){"use strict";cc._RF.push(t,"41646QcpVhJars2QlqtpYEE","MibData"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdClick=o.AdPv=o.StatArchiving=o.CoinArchiving=o.LevelArchiving=o.RechargeScenarios=o.PigBankAd=o.PigBankCoinAdd=o.UserRating=o.RechargeRequest=o.RolePayFinish=o.ArchiveInformation=o.NoviceGuide=o.LevelActivityEnd=o.LevelActivityStart=o.VirtualCurrencyConsume=o.GetVirtualCurrency=o.PropEvent=o.ForeEvent=void 0;o.ForeEvent=function(){this.eventTargetId="",this.time=""};o.PropEvent=function(){this.missionId="",this.itemType="",this.sourceType="",this.Count="",this.countTotal=""};o.GetVirtualCurrency=function(){this.missionId="",this.number="",this.virtualCurrencyType="",this.virtualCurrencyTotal="",this.sourceType=""};o.VirtualCurrencyConsume=function(){this.missionId="",this.number="",this.sourceType="",this.sourceSubType="0",this.itemType="",this.itemNumber="",this.itemPrice="",this.virtualCurrencyType="",this.virtualCurrencyTotal=""};o.LevelActivityStart=function(){this.missionFlag="enter",this.missionId="",this.missionName="",this.missionType="1",this.ishorizontalscreen="NO"};o.LevelActivityEnd=function(){this.missionFlag="success",this.missionId="",this.missionName="",this.missionType="1",this.missiongScore="",this.time="",this.cntStep="",this.star="",this.starTotal="",this.ishorizontalscreen="NO"};o.NoviceGuide=function(){this.eventTargetId="2"};o.ArchiveInformation=function(){this.type="",this.profile=""};o.RolePayFinish=function(){this.missionid="",this.currency="",this.money="",this.tradeNo="",this.gameTradeNo="",this.channelTradeNo="",this.ProductId="",this.PurchaseScene=""};o.RechargeRequest=function(){this.missionid="",this.ProductId="",this.PurchaseScene=""};o.UserRating=function(){this.missionid="",this.rate=""};o.PigBankCoinAdd=function(){this.missionId="",this.number="",this.virtualCurrencyTotal=""};o.PigBankAd=function(){this.missionId="",this.number="",this.count=""};o.RechargeScenarios=function(){this.missionId="",this.eventTargetId=""};o.LevelArchiving=function(){this.type="missionid",this.missionId=""};o.CoinArchiving=function(){this.type="money",this.number="",this.name="1"};o.StatArchiving=function(){this.type="star",this.number=""};o.AdPv=function(){this.missionId="",this.eventAdId="",this.eventTargetId=""};o.AdClick=function(){this.missionId="",this.eventTargetId="",this.eventTargetType="",this.eventTargetdesc="",this.eventAdId=""},cc._RF.pop()},{}],Orientation:[function(e,t,o){"use strict";cc._RF.push(t,"b65f3bo1BxGc7DwkTS5VXc7","Orientation"),Object.defineProperty(o,"__esModule",{value:!0}),o.OrientationType=void 0;var i=e("../global/Emitter"),a=e("../../global/Const"),n=cc._decorator,r=n.ccclass;n.property,function(e){e[e.Auto=0]="Auto",e[e.Portrait=1]="Portrait",e[e.Landscape=2]="Landscape"}(o.OrientationType||(o.OrientationType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mCanvas=null,t.mIsPortrait=!0,t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"canvas",{get:function(){return this.mCanvas&&this.mCanvas.isValid||(this.mCanvas=this.getComponent(cc.Canvas)),this.mCanvas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPortrait",{get:function(){return this.mIsPortrait},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;o.current=this,this.updateOrientation(),cc.view.setResizeCallback(function(){e.updateOrientation()})},t.prototype.update=function(){},t.prototype.updateOrientation=function(){var e=!0,t=cc.view.getFrameSize();t.width/t.height>1&&(e=!1),this.mIsPortrait!=e&&(this.mIsPortrait=e,this.canvas.fitWidth=e,this.canvas.fitHeight=!e,this.canvas.designResolution=e?cc.size(o.designResolution.width,o.designResolution.height):cc.size(o.designResolution.height,o.designResolution.width),i.Emitter.fire(a.default.ePreOrientationChanged,e),i.Emitter.fire(a.default.eOrientationChanged,e),i.Emitter.fire(a.default.eAfterOrientationChanged,e))},t.designResolution=new cc.Size(750,1334),t.current=null,o=__decorate([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../global/Const":"Const","../global/Emitter":"Emitter"}],PEDictionary:[function(e,t,o){"use strict";cc._RF.push(t,"cf766kVkDxDqY9NvoMWOhZk","PEDictionary"),Object.defineProperty(o,"__esModule",{value:!0}),o.PEDictionary=void 0;var i=function(){function e(e){void 0===e&&(e=!1),this.mKeys=[],this.mValues=[],this.mIsCache=e}return Object.defineProperty(e.prototype,"count",{get:function(){return this.mKeys.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this.mKeys},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this.mValues},enumerable:!1,configurable:!0}),e.prototype.clear=function(){if(this.mIsCache)for(var e=0,t=this.mKeys;e<t.length;e++)delete this[t[e]];this.mKeys=[],this.mValues=[]},e.prototype.add=function(e,t){if(!this.containsKey(e))return this.mIsCache&&(this[e]=t),this.mKeys.push(e),this.mValues.push(t);console.error("The same key in dictionary! key="+e)},e.prototype.remove=function(e){var t=this.mKeys.indexOf(e,0);-1!==t&&(this.mKeys.splice(t,1),this.mValues.splice(t,1),this.mIsCache&&delete this[e])},e.prototype.setDicValue=function(e,t){var o=this.mKeys.indexOf(e,0);return o>=0&&(this.mKeys[o]=e,this.mValues[o]=t,this.mIsCache&&(this[e]=t),!0)},e.prototype.tryGetValue=function(e){var t=this.mKeys.indexOf(e,0);return t>=0?this.mValues[t]:null},e.prototype.containsKey=function(e){return this.mKeys.indexOf(e,0)>=0},e}();o.PEDictionary=i,cc._RF.pop()},{}],PigBankWindow:[function(e,t,o){"use strict";cc._RF.push(t,"3c98fdp7oNIWKf9v3UBJPdY","PigBankWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/global/I18N"),n=e("../../core/Table/Table"),r=e("../../core/Table/TableHelper"),s=e("../../core/UI/Toast"),l=e("../../core/UI/WWindow"),c=e("../../data/ShopHelper"),p=e("../../Game"),u=e("../../global/Const"),d=e("../../global/GameConfig"),h=e("../../sdk/LogEvent"),f=e("../../sdk/MibData"),g=e("../../sdk/SDKConst"),y=e("../UICenter"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelCoins=null,t.labelWatchTimes=null,t.progress=null,t.desc=null,t.buttonWatch=null,t.mIsLobby=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),this.initLabelCost(),i.Emitter.register(u.default.eOnChangePigData,this.refreshData,this),i.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(t){e.prototype.show.call(this),this.refreshData(),this.buttonWatch.interactable=d.default.SDK.rewardAvailability(),h.default.dotAdPv(g.default.AD_PLAY_POS_PIG),this.mIsLobby=t;var o=t;y.UICenter.openStrengthWindow(this.mIsLobby,o)},t.prototype.refreshData=function(){var e=p.Game.userData.pigData;this.labelCoins.string=e.pigCoin+"/"+d.default.PigMaxCoins;var t=e.pigCoin/d.default.PigMaxCoins;this.progress.progress=t,this.refreshWatchTimes()},t.prototype.refreshWatchTimes=function(){var e=p.Game.userData.pigData;this.labelWatchTimes.string=e.adNo+"/"+d.default.PigWatchAdCount},t.prototype.initLabelCost=function(){},t.prototype.getCostValueById=function(e){return"$"+r.TableHelper.GetField(n.eTable.eTabShop,e).payid},t.prototype.onShow=function(){e.prototype.onShow.call(this)},t.prototype.initLanguage=function(){this.desc.string=a.default.get("L40111")},t.prototype.hide=function(){e.prototype.hide.call(this),y.UICenter.closeStrengthWindow(),this.mIsLobby&&y.UICenter.openStrengthWindow(!0,!0)},t.prototype.checkFull=function(){return!(p.Game.userData.pigData.pigCoin<d.default.PigMinCoins&&(s.default.showWith(a.default.get("L40114")),1))},t.prototype.resetPigData=function(e){var t=p.Game.userData.pigData,o=p.Game.userData.goldData;o.gold+=t.pigCoin*e,p.Game.userData.goldData=o,t.pigCoin=0,t.adNo=0,p.Game.userData.pigData=t,i.Emitter.fire(u.default.eOnChangePigData),this.refreshData()},t.prototype.onWatchClick=function(){var e=this;this.checkFull()&&p.Game.sdkPipeline.showReward(function(t){if(t){var o=p.Game.userData.pigData;o.adNo+=1,p.Game.userData.pigData=o;var i=new f.PigBankAd;i.missionId=p.Game.userData.dotData.currentLevel.toString(),i.count=o.adNo.toString(),i.number=o.pigCoin.toString(),h.default.log(h.default.dot_pigbank_ad,i),e.refreshWatchTimes(),o.adNo>=d.default.PigWatchAdCount&&e.resetPigData(1)}},this,g.default.AD_PLAY_POS_PIG)},t.prototype.onBuyClick=function(){var e=this;this.checkFull()&&p.Game.sdkPipeline.purchaseByShopId(c.default.PigMultiple1Id,2,function(t){c.default.getInstance().pigDataChange(c.default.PigMultiple1Id,t),e.refreshData()})},t.prototype.onBuyThreeClick=function(){var e=this;this.checkFull()&&p.Game.sdkPipeline.purchaseByShopId(c.default.PigMultiple3Id,2,function(t){c.default.getInstance().pigDataChange(c.default.PigMultiple3Id,t),e.refreshData()})},t.prototype.onBuyFiveClick=function(){var e=this;this.checkFull()&&p.Game.sdkPipeline.purchaseByShopId(c.default.PigMultiple5Id,2,function(t){c.default.getInstance().pigDataChange(c.default.PigMultiple5Id,t),e.refreshData()})},t.prototype.refreshAdBtn=function(e){this.buttonWatch.interactable=e},__decorate([_(cc.Label)],t.prototype,"labelCoins",void 0),__decorate([_(cc.Label)],t.prototype,"labelWatchTimes",void 0),__decorate([_({type:cc.ProgressBar,tooltip:"\u5b58\u94b1\u7f50\u91d1\u5e01\u6570"})],t.prototype,"progress",void 0),__decorate([_(cc.RichText)],t.prototype,"desc",void 0),__decorate([_(cc.Button)],t.prototype,"buttonWatch",void 0),__decorate([v],t)}(l.default);o.default=b,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/Toast":"Toast","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../data/ShopHelper":"ShopHelper","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/MibData":"MibData","../../sdk/SDKConst":"SDKConst","../UICenter":"UICenter"}],PlaneWindow:[function(e,t,o){"use strict";cc._RF.push(t,"028fe436fNEpr42zsR8jryT","PlaneWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/global/I18N"),n=e("../../core/Table/Table"),r=e("../../core/Table/TableHelper"),s=e("../../core/UI/WWindow"),l=e("../../Game"),c=e("../../game/BoxOpenSystem"),p=e("../../game/type/Enum"),u=e("../../global/GameConfig"),d=e("../../sdk/LogEvent"),h=e("../../sdk/SDKConst"),f=e("../UICenter"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.labelTitle=null,t.labelDesc=null,t.coinsRange=null,t.btnAd=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),i.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(t){e.prototype.show.call(this),this.mIsReward=!1,this.onComplete=t,this.showCoinRange(),this.btnAd.interactable=u.default.SDK.rewardAvailability(),d.default.dotAdPv(h.default.AD_PLAY_POS_TREASUREBOX)},t.prototype.initLanguage=function(){this.label.string=a.default.get("L40041"),this.labelTitle.string=a.default.get("L40121"),this.labelDesc.string=a.default.get("L40122")},t.prototype.onFreeClaimClick=function(){var e=this;l.Game.sdkPipeline.showReward(function(t){if(t){e.mIsReward=!0,e.toBack();var o=c.default.getPropList(1);f.UICenter.openGainItemWindow(o,function(){e.gainProp(o)},!1,p.ItemFromType.FromChest)}},this,h.default.AD_PLAY_POS_TREASUREBOX)},t.prototype.toBack=function(){e.prototype.toBack.call(this),this.onComplete&&this.onComplete(this.mIsReward)},t.prototype.gainProp=function(e){for(var t=l.Game.userData.goldData,o=l.Game.userData.dotData.currentLevel,i=0,a=e;i<a.length;i++){var n=a[i];switch(n.propType){case p.PropType.PropGold:t.gold+=n.propNum,d.default.dotVirtualGain(o,n.propNum,5,t.gold,1);break;case p.PropType.PropUndo:t.propUndo+=n.propNum,d.default.dotPropLog(p.PropType.PropUndo,n.propNum,t.propUndo,o,5);break;case p.PropType.PropAuto:t.propAuto+=n.propNum,d.default.dotPropLog(p.PropType.PropAuto,n.propNum,t.propAuto,o,5);break;case p.PropType.PropRefresh:t.propRefresh+=n.propNum,d.default.dotPropLog(p.PropType.PropRefresh,n.propNum,t.propRefresh,o,5);break;default:console.log("[],propType error",n.propType)}}l.Game.userData.goldData=t},t.prototype.getBoxMinCoin=function(){for(var e=0,t=r.TableHelper.GetCount(n.eTable.eTabBox),o=0;o<t;o++){var i=r.TableHelper.GetFieldByIndex(n.eTable.eTabBox,o);i.type==p.PropType.PropGold&&(0==e?e=i.num:e>i.num&&(e=i.num))}return e},t.prototype.getBoxMaxCoin=function(){for(var e=0,t=r.TableHelper.GetCount(n.eTable.eTabBox),o=0;o<t;o++){var i=r.TableHelper.GetFieldByIndex(n.eTable.eTabBox,o);i.type==p.PropType.PropGold&&e<i.num&&(e=i.num)}return e},t.prototype.showCoinRange=function(){var e=this.getBoxMinCoin(),t=this.getBoxMaxCoin();this.coinsRange.string=e+"~"+t},t.prototype.refreshAdBtn=function(e){this.btnAd.interactable=e},__decorate([m(cc.Label)],t.prototype,"label",void 0),__decorate([m(cc.Label)],t.prototype,"labelTitle",void 0),__decorate([m(cc.Label)],t.prototype,"labelDesc",void 0),__decorate([m(cc.Label)],t.prototype,"coinsRange",void 0),__decorate([m(cc.Button)],t.prototype,"btnAd",void 0),__decorate([y],t)}(s.default);o.default=v,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../game/BoxOpenSystem":"BoxOpenSystem","../../game/type/Enum":"Enum","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst","../UICenter":"UICenter"}],PolygonMask:[function(e,t,o){"use strict";cc._RF.push(t,"08757zMxQZIM6sr2/Vp0Yxf","PolygonMask"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node._oldHitTest=this.node._hitTest.bind(this.node),this.node._hitTest=this.polygonHitTest.bind(this.node)},t.prototype.polygonHitTest=function(e,t){var o=this.getComponent(cc.PolygonCollider);return o?(e=this.convertToNodeSpaceAR(e),cc.Intersection.pointInPolygon(e,o.points)):this._oldHitTest(e,t)},__decorate([a],t)}(cc.Mask));o.default=n,cc._RF.pop()},{}],RaceFailWindow:[function(e,t,o){"use strict";cc._RF.push(t,"d90fcNNNZRD5Y8mtKn2mTh+","RaceFailWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../global/I18N"),a=e("../UI/Toast"),n=e("../UI/WWindow"),r=e("../../Game"),s=e("../../game/manager/BottomManager"),l=e("../../game/manager/TileManager"),c=e("../../game/util/GameUtil"),p=e("../../global/AudioMgr"),u=e("../../global/GameConfig"),d=e("../../sdk/LogEvent"),h=e("../../sdk/SDKConst"),f=e("../../view/UICenter"),g=e("./DaliyHelper"),y=e("../global/Emitter"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.replayLabel=null,t.labelReviveDesc=null,t.labelReviveCost=null,t.btnReviveCoin=null,t.btnReviveAd=null,t.labelLevel=null,t.labelReveviAd=null,t.proBar=null,t.labeBfb=null,t.labelTip=null,t.labProgress=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),y.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(){e.prototype.show.call(this),this.ShowReviveBtn(),this.ShowChapterInfo(),this.labelReviveCost.string=""+u.default.ReviveCost,p.AudioMgr.playEffect("result_fail"),this.initBar();var t=u.default.SDK.rewardAvailability();this.refreshAdBtn(t),d.default.dotAdPv(h.default.AD_PAY_POS_RESURRECTION)},t.prototype.onShow=function(){e.prototype.onShow.call(this),f.UICenter.openStrengthWindow()},t.prototype.initLanguage=function(){this.replayLabel.string=i.default.get("L40033"),this.labelReveviAd.string=i.default.get("L40141"),this.labelReviveDesc.string=i.default.get("L40142"),this.labelTip.string=i.default.get("L50010"),this.labProgress.string=i.default.get("L50017")},t.prototype.initBar=function(){var e=c.default.getInstance().realBrickNo,t=e-c.default.getInstance().getremainingNo()-s.default.getInstance().getIndex();console.log("\u65b9\u5757\u603b\u6570\uff1a"+e),console.log("\u5269\u4f59\uff1a"+c.default.getInstance().getremainingNo()),console.log("\u5e95\u90e8\u65b9\u5757\uff1a"+s.default.getInstance().getIndex());var o=t/e;console.log("\u5269\u4f59\u6bd4\u4f8b\uff1a"+o);var i=Math.ceil(100*o);this.proBar.progress=o,this.labeBfb.string=i+"%"},t.prototype.onCloseClick=function(){r.Game.gameMgr.restoreGrid(),this.hide(),r.Game.gameMgr.backToMainOpenRili(!0,0)},t.prototype.onRestartClick=function(){cc.log("onRestartClick"),this.hide(),r.Game.gameMgr.restoreGrid();var e=g.default.getDaliyDayLevelNo(r.Game.userData.currtyDay),t=g.default.getChangeDate();f.UICenter.openEnterGameWindow(e,function(e){e||r.Game.gameMgr.backToMainOpenRili(!0,0)},!0,t)},t.prototype.hide=function(){e.prototype.hide.call(this),f.UICenter.closeStrengthWindow()},t.prototype.onRevive=function(){r.Game.gameMgr.restoreGrid();for(var e=0;e<3;e++)l.default.getInstance().undoOperation();setTimeout(function(){l.default.getInstance().refreshTile(),l.default.getInstance().updateGridCount()},300)},t.prototype.onReviveCoinClick=function(){var e=r.Game.userData.goldData;if(e.gold<u.default.ReviveCost)return a.default.showWith(i.default.get("L858")),void f.UICenter.openShopWindow();e.gold-=u.default.ReviveCost,r.Game.userData.goldData=e;var t=r.Game.userData.dotData.currentLevel;d.default.dotVirtualGainUse(1,u.default.ReviveCost,1,t,u.default.ReviveCost,0,2,e.gold,1),this.hide(),this.onRevive()},t.prototype.onReviveAdClick=function(){var e=this;r.Game.sdkPipeline.showReward(function(t){t&&(e.hide(),e.onRevive())},this,h.default.AD_PAY_POS_RESURRECTION)},t.prototype.ShowReviveBtn=function(){this.btnReviveCoin.active=!1,this.btnReviveAd.active=!0},t.prototype.ShowChapterInfo=function(){this.labelLevel.string=g.default.getChangeDate()},t.prototype.refreshAdBtn=function(e){if(this.btnReviveAd.active){var t=this.btnReviveAd.getComponent(cc.Button);t&&(t.interactable=e)}},__decorate([_(cc.Label)],t.prototype,"replayLabel",void 0),__decorate([_(cc.Label)],t.prototype,"labelReviveDesc",void 0),__decorate([_(cc.Label)],t.prototype,"labelReviveCost",void 0),__decorate([_(cc.Node)],t.prototype,"btnReviveCoin",void 0),__decorate([_(cc.Node)],t.prototype,"btnReviveAd",void 0),__decorate([_(cc.Label)],t.prototype,"labelLevel",void 0),__decorate([_(cc.Label)],t.prototype,"labelReveviAd",void 0),__decorate([_(cc.ProgressBar)],t.prototype,"proBar",void 0),__decorate([_(cc.Label)],t.prototype,"labeBfb",void 0),__decorate([_(cc.Label)],t.prototype,"labelTip",void 0),__decorate([_(cc.Label)],t.prototype,"labProgress",void 0),__decorate([v],t)}(n.default);o.default=b,cc._RF.pop()},{"../../Game":"Game","../../game/manager/BottomManager":"BottomManager","../../game/manager/TileManager":"TileManager","../../game/util/GameUtil":"GameUtil","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst","../../view/UICenter":"UICenter","../UI/Toast":"Toast","../UI/WWindow":"WWindow","../global/Emitter":"Emitter","../global/I18N":"I18N","./DaliyHelper":"DaliyHelper"}],RaceWinWindow:[function(e,t,o){"use strict";cc._RF.push(t,"f77feMfip5NRo9IvUJujPfz","RaceWinWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../global/I18N"),a=e("../Table/Table"),n=e("../Table/TableHelper"),r=e("../UI/WWindow"),s=e("../../Game"),l=e("../../game/BoxOpenSystem"),c=e("../../game/type/Enum"),p=e("../../global/AudioMgr"),u=e("../../global/GameConfig"),d=e("../../sdk/LogEvent"),h=e("../../sdk/SDKConst"),f=e("../../view/UICenter"),g=e("./DaliyHelper"),y=e("../util/MathUtil"),m=e("../global/Emitter"),v=e("../../global/Const"),_=cc._decorator,b=_.ccclass,T=_.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.starNodes=[],t.starlights=[],t.starParticles=[],t.labelHome=null,t.labelNext=null,t.btnCain=[],t.labelOpen=[],t.adNodes=[],t.chestNodes=[],t.lab_claimtip=null,t.returnBtnNode=null,t.replayBtnNode=null,t.labelFrees=[],t.giftno=0,t.giftRecord=[-1,-1,-1],t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),m.Emitter.register("rewardedAdLoadState",this.refreshAdBtnByAdStatus,this)},t.prototype.show=function(t){e.prototype.show.call(this),this.label.string=g.default.getChangeDate(),this.refreshStarNodes(t),this.saveStarData(t),p.AudioMgr.playEffect("result_win"),this.updateServerUser(),this.initGiftSpr(),this.giftRecord=[-1,-1,-1];for(var o=0;o<this.starParticles.length;o++)this.starParticles[o].active=!1;s.Game.userData.raceData;var i=s.Game.userData.currtyDay,a=i.getFullYear(),n=i.getMonth(),r=i.getDate();g.default.getDaliyDayData(a,n,r),d.default.dotAdPv(h.default.AD_PLAY_POS_SHOP),this.giftno=0,this.resetBtnAdState(),this.returnBtnNode.active=!1,this.replayBtnNode.active=!1;var l=new Date;l.getFullYear()==a&&l.getMonth()==n&&l.getDate()==r&&m.Emitter.fire(v.default.eOnDailyTipChange,!1)},t.prototype.initLanguage=function(){this.labelHome.string=i.default.get("L50020"),this.labelNext.string=i.default.get("L40033"),this.lab_claimtip.string=i.default.get("L50009");for(var e=0;e<this.labelOpen.length;e++){var t=this.labelOpen[e].getComponent(cc.Label);t&&(t.string=i.default.get("L50016"))}for(var o=0;o<this.labelFrees.length;o++)this.labelFrees[o].string=i.default.get("L50018")},t.prototype.updateGiftSpr=function(e){this.btnCain[e-1].active=!1,this.labelOpen[e-1].active=!0},t.prototype.initGiftSpr=function(){this.giftno=0;for(var e=0;e<this.chestNodes.length;e++){this.btnCain[e].active=!0,this.labelOpen[e].active=!1;var t=this.chestNodes[e].getComponent(cc.Animation);t&&t.play("chestClose")}},t.prototype.onCloseClick=function(){this.toBack()},t.prototype.updateServerUser=function(){},t.prototype.onNextlevelClick=function(){this.hide(),s.Game.gameMgr.restoreGrid();var e=g.default.getDaliyDayLevelNo(s.Game.userData.currtyDay),t=s.Game.userData.currtyDay,o=g.default.getChangeDate(),i=g.default.getDaliyDayData(t.getFullYear(),t.getMonth(),t.getDate()),a=4!=i[0]?i[0]:0;f.UICenter.openEnterGameWindow(e,function(e){e||s.Game.gameMgr.backToMainOpenRili(!0,0)},!0,o,a)},t.prototype.refreshStarNodes=function(e){e>this.starNodes.length&&(e=this.starNodes.length);for(var t=0;t<this.starNodes.length;t++)this.starNodes[t].active=t<e,this.starlights[t].active=t<e},t.prototype.saveStarData=function(e){var t=s.Game.userData.raceData,o=s.Game.userData.currtyDay,i=o.getFullYear(),a=o.getMonth(),n=o.getDate(),r=g.default.getDaliyDayData(i,a,n),l=s.Game.userData.raceRecord;l||(l=[0,0]);var c=l[0];return 0==r[1]&&(7==l[1]&&(c=0,l[1]=0),u.default.rlthree>c&&(c=Number(c)+1,l[0]=c,s.Game.userData.raceRecord=l)),r[1]=Number(r[1])+1,r[0]=0==e?4:e,t[i][a][n]=r,s.Game.userData.raceData=t,cc.log(s.Game.userData.raceData),0},t.prototype.onTrySkinClick=function(){},t.prototype.onQuitClick=function(){s.Game.gameMgr.restoreGrid(),this.hide(),s.Game.gameMgr.backToMainOpenRili(!0,0)},t.prototype.onObtainGift=function(e,t){var o=this;if(0==this.giftno){this.btnCain[t-1].active=!1,this.labelOpen[t-1].active=!0,this.giftno+=1;var i=this.chestNodes[t-1].getComponent(cc.Animation);i&&i.play("chestOpen"),this.refreshBtnAdState(t-1);var a=this.getChestProp(this.giftno-1);this.giftRecord[t-1]=a.propType;var n=[a];f.UICenter.openGainItemWindow(n,function(){o.onGainItem(a)},!1,c.ItemFromType.FromBonus),this.returnBtnNode.active=!0,this.replayBtnNode.active=!0}else this.giftno+=1,s.Game.sdkPipeline.showReward(function(e){if(e){o.updateGiftSpr(t);var i=o.chestNodes[t-1].getComponent(cc.Animation);i&&i.play("chestOpen");var a=o.getChestProp(o.giftno-1);o.giftRecord[t-1]=a.propType;var n=[a];f.UICenter.openGainItemWindow(n,function(){o.onGainItem(a)},!1,c.ItemFromType.FromBonus)}},this,h.default.AD_PLAY_POS_RACE)},t.prototype.refreshBtnAdState=function(e){for(var t=0;t<this.adNodes.length;t++)t!=e&&(this.adNodes[t].active=!0,this.btnCain[t].getComponent(cc.Button).interactable=u.default.SDK.rewardAvailability())},t.prototype.resetBtnAdState=function(){for(var e=0;e<this.adNodes.length;e++)this.adNodes[e].active=!1,this.btnCain[e].getComponent(cc.Button).interactable=!0},t.prototype.refreshAdBtnByAdStatus=function(e){for(var t=0;t<this.btnCain.length;t++)0!=this.adNodes[t].active&&(this.btnCain[t].getComponent(cc.Button).interactable=e)},t.prototype.getChestProp=function(e){cc.log("\u672c\u5730\u5b58\u50a8\u4fe1\u606f\uff1a"+this.giftRecord);var t=new l.Prop(c.PropType.PropGold,1);if(0==e)for(var o=0;o<20&&((t=l.default.getPropRandomOneTime()).propType==this.giftRecord[0]||t.propType==this.giftRecord[1]||t.propType==this.giftRecord[2]);o++);else for(var i=0;i<20;i++){var r=this.getRandomIndex(),s=n.TableHelper.GetFieldByIndex(a.eTable.eTabRotaryTable,r);if(t.propType=s.type,t.propNum=s.number,t.propType!=this.giftRecord[0]&&t.propType!=this.giftRecord[1]&&t.propType!=this.giftRecord[2])break}return t},t.prototype.getRandomIndex=function(){var e=n.TableHelper.GetCount(a.eTable.eTabRotaryTable);return y.default.randomRange(0,e-1)},t.prototype.onGainItem=function(e){var t=s.Game.userData.goldData;e.propType==c.PropType.PropGold?t.gold+=e.propNum:e.propType==c.PropType.PropUndo?t.propUndo+=e.propNum:e.propType==c.PropType.PropAuto?t.propAuto+=e.propNum:e.propType==c.PropType.PropRefresh&&(t.propRefresh+=e.propNum),s.Game.userData.goldData=t},t.prototype.playStarsSoundEffect=function(e){if(1==e&&this.starNodes[0].active)p.AudioMgr.playEffect("result_success_star_1"),this.starParticles[0].active=!0,(t=this.starParticles[0].getComponent(cc.ParticleSystem))&&t.resetSystem();else if(2==e&&this.starNodes[1].active)p.AudioMgr.playEffect("result_success_star_2"),this.starParticles[1].active=!0,(t=this.starParticles[1].getComponent(cc.ParticleSystem))&&t.resetSystem();else if(3==e&&this.starNodes[2].active){var t;p.AudioMgr.playEffect("result_success_star_3"),this.starParticles[2].active=!0,(t=this.starParticles[2].getComponent(cc.ParticleSystem))&&t.resetSystem()}},__decorate([T(cc.Label)],t.prototype,"label",void 0),__decorate([T(cc.Node)],t.prototype,"starNodes",void 0),__decorate([T(cc.Node)],t.prototype,"starlights",void 0),__decorate([T(cc.Node)],t.prototype,"starParticles",void 0),__decorate([T(cc.Label)],t.prototype,"labelHome",void 0),__decorate([T(cc.Label)],t.prototype,"labelNext",void 0),__decorate([T(cc.Node)],t.prototype,"btnCain",void 0),__decorate([T(cc.Node)],t.prototype,"labelOpen",void 0),__decorate([T(cc.Node)],t.prototype,"adNodes",void 0),__decorate([T(cc.Node)],t.prototype,"chestNodes",void 0),__decorate([T(cc.Label)],t.prototype,"lab_claimtip",void 0),__decorate([T(cc.Node)],t.prototype,"returnBtnNode",void 0),__decorate([T(cc.Node)],t.prototype,"replayBtnNode",void 0),__decorate([T(cc.Label)],t.prototype,"labelFrees",void 0),__decorate([b],t)}(r.default);o.default=C,cc._RF.pop()},{"../../Game":"Game","../../game/BoxOpenSystem":"BoxOpenSystem","../../game/type/Enum":"Enum","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst","../../view/UICenter":"UICenter","../Table/Table":"Table","../Table/TableHelper":"TableHelper","../UI/WWindow":"WWindow","../global/Emitter":"Emitter","../global/I18N":"I18N","../util/MathUtil":"MathUtil","./DaliyHelper":"DaliyHelper"}],RateWindow:[function(e,t,o){"use strict";cc._RF.push(t,"1d5bd+OEYJOWruvvsNxkJph","RateWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/UI/WWindow"),a=e("../../core/global/I18N"),n=e("../../global/GameConfig"),r=e("../../sdk/MibData"),s=e("../../Game"),l=e("../../sdk/LogEvent"),c=cc._decorator,p=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgNode=null,t.toggles=[],t.buttonNode=null,t.rateLabel=null,t.noLabel=null,t.submitLabel=null,t.initToggle=!1,t.starClicked=!1,t.checkIndex=0,t}return __extends(t,e),t.prototype.show=function(){e.prototype.show.call(this),this.buttonNode.active=!1,this.bgNode.height=550,this.starClicked=!1,this.checkIndex=0,this.initToggle=!0;for(var t=0;t<this.toggles.length;t++)this.toggles[t].uncheck();this.initToggle=!1,this.initLanguage()},t.prototype.initLanguage=function(){this.rateLabel.string=a.default.get("L10013"),this.submitLabel.string=a.default.get("L10014"),this.noLabel.string=a.default.get("L10015")},t.prototype.onToggleClick=function(e,t){if(!this.initToggle){this.initToggle=!0,console.log(t),this.checkIndex=t;for(var o=0;o<=t;o++)this.toggles[o].check();for(;o<this.toggles.length;o++)this.toggles[o].uncheck();this.starClicked||(this.starClicked=!0,this.buttonNode.active=!0,this.bgNode.height=850),this.initToggle=!1}},t.prototype.onConfirmClick=function(){this.checkIndex==this.toggles.length-1&&(n.default.SDK.showRateDialog(),console.log("open market!"));var e=new r.UserRating;e.missionid=s.Game.userData.lvRwd.This.toString(),e.rate=this.checkIndex.toString(),l.default.log(l.default.dot_user_rating,e),this.toBack()},__decorate([u(cc.Node)],t.prototype,"bgNode",void 0),__decorate([u(cc.Toggle)],t.prototype,"toggles",void 0),__decorate([u(cc.Node)],t.prototype,"buttonNode",void 0),__decorate([u(cc.Label)],t.prototype,"rateLabel",void 0),__decorate([u(cc.Label)],t.prototype,"noLabel",void 0),__decorate([u(cc.Label)],t.prototype,"submitLabel",void 0),__decorate([p],t)}(i.default);o.default=d,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/MibData":"MibData"}],RemoveAdWindow:[function(e,t,o){"use strict";cc._RF.push(t,"86576Xxy+VOC5xi1qJaFh0j","RemoveAdWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/I18N"),a=e("../../core/Table/Table"),n=e("../../core/Table/TableHelper"),r=e("../../core/UI/WWindow"),s=e("../../data/ShopHelper"),l=e("../../Game"),c=e("../../game/type/Enum"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lab_title=null,t.lab_tip=null,t.lab_guide=null,t.lab_buy=null,t.lab_restore=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage()},t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.initLanguage=function(){this.lab_title.string=i.default.get("L40006"),this.lab_tip.string=i.default.get("L50002"),this.lab_guide.string=i.default.get("L50003"),this.lab_buy.string=i.default.get("L40124"),this.lab_restore.string=i.default.get("L50001")},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onBuyClick=function(){var e=this,t=n.TableHelper.GetField(a.eTable.eTabShop,s.default.RemoveAdId);t&&l.Game.sdkPipeline.purchaseByShopId(t.id,c.PayScene.InLobbyShop,function(o){s.default.getInstance().shopDataChange(t,o,c.PayScene.InLobbyShop),e.hide()})},t.prototype.onRestoreClick=function(){l.Game.sdkPipeline.suppleMent()},__decorate([d(cc.Label)],t.prototype,"lab_title",void 0),__decorate([d(cc.Label)],t.prototype,"lab_tip",void 0),__decorate([d(cc.Label)],t.prototype,"lab_guide",void 0),__decorate([d(cc.Label)],t.prototype,"lab_buy",void 0),__decorate([d(cc.Label)],t.prototype,"lab_restore",void 0),__decorate([u],t)}(r.default);o.default=h,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../data/ShopHelper":"ShopHelper","../../game/type/Enum":"Enum"}],ResUtil:[function(e,t,o){"use strict";var i;cc._RF.push(t,"eaa26KMYgRO7IyhPWX0OxAo","ResUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.ResUtil=o.eResType=void 0,function(e){e[e.UIPrefab=0]="UIPrefab",e[e.Audio=1]="Audio",e[e.Texture=2]="Texture",e[e.I18n=3]="I18n",e[e.Atlas=4]="Atlas",e[e.I18nAtlas=5]="I18nAtlas",e[e.font=6]="font"}(i=o.eResType||(o.eResType={}));var a=function(){function e(){}return e.MakeResUrl=function(e,t){switch(t){case i.UIPrefab:e="prefab/"+e;break;case i.Audio:e="sound/"+e;break;case i.Texture:e="texture/"+e;break;case i.I18n:e="i18n/"+e;break;case i.Atlas:e="atlas/"+e;break;case i.I18nAtlas:e="atlas/i18n/"+e;break;case i.font:e="font/"+e;break;default:console.error("MakeUrl UnKnow Type ="+t+" resName="+e)}return e},e.loadRes=function(t,o,a,n){if(t){var r=cc.Asset;switch(o){case i.UIPrefab:r=cc.Prefab;break;case i.Audio:r=cc.AudioClip;break;case i.Texture:r=cc.SpriteFrame;break;case i.I18n:r=cc.TextAsset;break;case i.Atlas:case i.I18nAtlas:r=cc.SpriteAtlas;break;case i.font:r=cc.Font;break;default:return void console.warn("loadRes UnKnow Url ="+t+", Type ="+o)}var s=e.MakeResUrl(t,o);cc.resources.load(s,r,function(e,o){if(null!=e)return console.warn("loadRes error! path=",t,s,e),void(n&&n());a(o)})}else console.warn("loadRes error! resUrl is"+t)},e}();o.ResUtil=a,cc._RF.pop()},{}],RotateForever:[function(e,t,o){"use strict";cc._RF.push(t,"c3725lpfUlJF6rQ8EUhQ6Lr","RotateForever"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=i.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=16,t}return __extends(t,e),t.prototype.update=function(e){this.node.angle-=360*e/this.speed},__decorate([n],t.prototype,"speed",void 0),__decorate([a],t)}(cc.Component);o.default=r,cc._RF.pop()},{}],SDKConst:[function(e,t,o){"use strict";cc._RF.push(t,"fb6ccUDOMhFNrpekwHbVWRV","SDKConst"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=(i.property,function(){function e(){}return e.AD_STATUS_LOADING="loading",e.AD_STATUS_LOADED="loaded",e.AD_STATUS_ERROR="error",e.AD_STATUS_PLAYING="playing",e.AD_STATUS_PLAYEND="playend",e.AD_STATUS_PLAY_ERROR="playError",e.AD_STATUS_INIT="init",e.AD_TYPE_REWARD="Reward",e.AD_TYPE_INTERST="Interst",e.AD_TYPE_BANNER="Banner",e.AD_PLAY_POS_SETTING=2,e.AD_PLAY_POS_DALIY=4,e.AD_PLAY_POS_FINAL=5,e.AD_PLAY_POS_BUY_GOLD=6,e.AD_PLAY_POS_BUY_MAGIC=7,e.AD_PLAY_POS_BUY_STH=8,e.AD_PLAY_POS_SHOP=1,e.AD_PLAY_POS_PIG=2,e.AD_PLAY_POS_GIFTBOX=3,e.AD_PAY_POS_RESURRECTION=4,e.AD_PLAY_POS_BONUS=5,e.AD_PLAY_POS_TREASUREBOX=6,e.AD_PLAY_POS_START=7,e.AD_PLAY_POS_RUN_BACK=9,e.AD_PLAY_POS_RACE=10,e.AD_PLAY_POS_END_GAME=11,__decorate([a],e)}());o.default=n,cc._RF.pop()},{}],SdkPipeline:[function(e,t,o){"use strict";cc._RF.push(t,"9fce3O6INJP87K+RwHIev/A","SdkPipeline"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../global/GameConfig"),a=e("./SDKConst"),n=e("../Game"),r=e("../App"),s=e("../core/UI/Toast"),l=e("../core/global/I18N"),c=e("../core/Table/TableHelper"),p=e("../core/Table/Table"),u=e("../view/LoaderWindow"),d=e("../data/ShopHelper"),h=e("./MibData"),f=e("./LogEvent"),g=e("../global/AudioMgr"),y=function(){function e(){this.adCloseTime=0,this.mAdOpening=!1,this.lastGamePlayTime=0}return Object.defineProperty(e.prototype,"adOpening",{get:function(){return this.mAdOpening},set:function(e){this.mAdOpening=e,e?(r.default.instance.cacheAdOpend=e,g.AudioMgr.pauseBgm()):g.AudioMgr.resumeBgm()},enumerable:!1,configurable:!0}),e.prototype.onGameStart=function(){this.lastGamePlayTime=Date.now()},e.prototype.loadAD=function(){i.default.SDK.loadAD("",a.default.AD_TYPE_INTERST)},e.prototype.isShowAd=function(){return!(i.default.TEST||n.Game.userData.shopData.removeAds>0)},e.prototype.showGameInterstitial=function(e,t,o){var i=this;t<=5?o&&o():this.lastGamePlayTime>0&&Date.now()-this.lastGamePlayTime<3e4?o&&o():this.showInterstialAd(function(e){e&&(i.lastGamePlayTime=Date.now())},e,o)},e.prototype.showInterstitial=function(e,t,o){var i=this;t<=5?o&&o():this.lastGamePlayTime>0&&Date.now()-this.lastGamePlayTime<3e4?o&&o():this.showInterstialAd(function(e){e&&(i.lastGamePlayTime=Date.now())},e,o)},e.prototype.showInterstialAd=function(e,t,o){var n=this;if(this.adOpening)return console.log("[SdkPipeline],showInterstialAd,other ad is open"),void(o&&o());if(Date.now()-this.adCloseTime<2e3)return console.log("[SdkPipeline],showInterstialAd,do not play ad after rewardAd"),void(o&&o());if(console.log("start showInterstialAd"),f.default.dotAdPv(t),this.isShowAd()){var s="{'eventadid':'"+f.default.dot_ad_uuid+"'}";this.subAdType(s),i.default.SDK.ADisLoaded(a.default.AD_TYPE_INTERST)?(r.default.isPause=!0,i.default.SDK.showInterstitial(function(i){i?(n.adOpening=!0,f.default.dotAdInterstClick(t),console.log("*****king dotAdInterstClick:"+s)):(r.default.isPause=!1,o&&o(),n.adOpening=!1),e(i),console.log("*****king showInterstialState state="+i)},function(){r.default.isPause=!1,o&&o(),n.adOpening=!1,console.log("*****king interstialColse")},this,t)):o&&o()}else o&&o()},e.prototype.showReward=function(e,t,o){var n=this;if(this.adOpening)e&&e.call(t,!1);else{var c="{'eventadid':'"+f.default.dot_ad_uuid+"'}";if(this.subAdType(c),!i.default.SDK.ADisLoaded(a.default.AD_TYPE_REWARD))return s.default.showWith(l.default.get("L20101")),void(e&&e.call(t,!1));r.default.isPause=!0,this.lastGamePlayTime=Date.now(),i.default.SDK.showReward(function(e){e?(n.adOpening=!0,f.default.dotAdRewardClick(o),console.log("*****king dotAdRewardClick:"+c)):(r.default.isPause=!1,n.adOpening=!1)},function(o){r.default.isPause=!1,n.adCloseTime=Date.now(),e&&e.call(t,o),n.adOpening=!1,console.log("[SdkPipeline],AdReward close")},t,o)}},e.prototype.showBanner=function(e){i.default.SDK.displayBannerAD(e)},e.prototype.showRateDialog=function(){i.default.SDK.getIsRated()||n.Game.uiMgr.showWindow("prefab/RateWindow")},e.prototype.purchaseByShopId=function(e,t,o){var i=c.TableHelper.GetField(p.eTable.eTabShop,e);if(i){var a;a=cc.sys.os===cc.sys.OS_IOS?i.iosPayId:(cc.sys.os,cc.sys.OS_ANDROID,i.androidPayId);var r=new h.RechargeRequest;r.missionid=n.Game.userData.dotData.currentLevel.toString(),r.ProductId=i.id.toString(),r.PurchaseScene=t.toString(),f.default.log(f.default.dot_pay_request,r),this.purchase(a,t,o)}},e.prototype.purchase=function(e,t,o){i.default.PAYSDK.PayisLoaded()?(u.default.showNow(),i.default.PAYSDK.purchase(e,t,function(e,t){u.default.hideNow(),0==t||"0"==t?o(e):s.default.showWith(l.default.get("L40170"))})):s.default.showWith(l.default.get("L40171"))},e.prototype.suppleMent=function(){cc.sys.os===cc.sys.OS_ANDROID&&i.default.PAYSDK.suppleMent(function(e,t,o){0==o||"0"==o?d.default.getInstance().doMoneyBuy(e,t):s.default.showWith(l.default.get("L40170"))})},e.prototype.smbiUuid=function(e){cc.sys.os===cc.sys.OS_ANDROID&&i.default.SDK.smbCommand("setUID",e)},e.prototype.smbPayFinsih=function(e){cc.sys.os===cc.sys.OS_ANDROID&&i.default.SDK.smbCommand("payfinish",e)},e.prototype.subAdType=function(e){cc.sys.os===cc.sys.OS_ANDROID&&i.default.SDK.smbCommand("adtype",e)},e}();o.default=y,cc._RF.pop()},{"../App":"App","../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/UI/Toast":"Toast","../core/global/I18N":"I18N","../data/ShopHelper":"ShopHelper","../global/AudioMgr":"AudioMgr","../global/GameConfig":"GameConfig","../view/LoaderWindow":"LoaderWindow","./LogEvent":"LogEvent","./MibData":"MibData","./SDKConst":"SDKConst"}],SettingWindow:[function(e,t,o){"use strict";cc._RF.push(t,"867a2VvRydLbK75gwFftqKm","SettingWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/I18N"),a=e("../../core/UI/WWindow"),n=e("../../Game"),r=e("../../global/AudioMgr"),s=e("../../global/GameConfig"),l=e("../../sdk/SDKConst"),c=e("../UICenter"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicLock=null,t.musicEffectLock=null,t.labelVersion=null,t.labelTitle=null,t.labelMusic=null,t.labelEffect=null,t.labelPolicy=null,t.labelTerms=null,t.labelOnOffMusic=[],t.labelOnOffEffect=[],t.isInit=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),n.Game.uiMgr.setIgnoreDefaultAudio(this.musicLock),n.Game.uiMgr.setIgnoreDefaultAudio(this.musicEffectLock),this.labelVersion.string="V "+s.default.SDK.getVersion()},t.prototype.show=function(){this.isInit=!0,this.musicLock.isChecked=!r.AudioMgr.musicLock,this.musicEffectLock.isChecked=!r.AudioMgr.effectLock,this.isInit=!1,e.prototype.show.call(this)},t.prototype.initLanguage=function(){this.labelTitle.string=i.default.get("L40131"),this.labelMusic.string=i.default.get("L40132"),this.labelEffect.string=i.default.get("L40133"),this.labelPolicy.string=i.default.get("L40134"),this.labelTerms.string=i.default.get("L40135"),2==this.labelOnOffMusic.length&&(this.labelOnOffMusic[0].string=i.default.get("L205"),this.labelOnOffMusic[1].string=i.default.get("L204")),2==this.labelOnOffEffect.length&&(this.labelOnOffEffect[0].string=i.default.get("L205"),this.labelOnOffEffect[1].string=i.default.get("L204"))},t.prototype.onMusicClick=function(){this.isInit||(r.AudioMgr.musicLock=!this.musicLock.isChecked,r.AudioMgr.playEffect("setting_slide"))},t.prototype.onMusicEffectClick=function(){this.isInit||(r.AudioMgr.effectLock=!this.musicEffectLock.isChecked,r.AudioMgr.playEffect("setting_slide"))},t.prototype.hide=function(){e.prototype.hide.call(this);var t=n.Game.userData;n.Game.sdkPipeline.showGameInterstitial(l.default.AD_PLAY_POS_SETTING,t.lvRwd.This,function(){})},t.prototype.onGuideClick=function(){c.UICenter.openGuideKingWindow()},t.prototype.onRateClick=function(){n.Game.sdkPipeline.showRateDialog()},t.prototype.onPolicyClick=function(){},t.prototype.onTermsUseClick=function(){},__decorate([d({type:cc.Toggle,tooltip:"\u97f3\u4e50\u5f00\u5173"})],t.prototype,"musicLock",void 0),__decorate([d({type:cc.Toggle,tooltip:"\u97f3\u6548\u5f00\u5173"})],t.prototype,"musicEffectLock",void 0),__decorate([d(cc.Label)],t.prototype,"labelVersion",void 0),__decorate([d(cc.Label)],t.prototype,"labelTitle",void 0),__decorate([d(cc.Label)],t.prototype,"labelMusic",void 0),__decorate([d(cc.Label)],t.prototype,"labelEffect",void 0),__decorate([d(cc.Label)],t.prototype,"labelPolicy",void 0),__decorate([d(cc.Label)],t.prototype,"labelTerms",void 0),__decorate([d(cc.Label)],t.prototype,"labelOnOffMusic",void 0),__decorate([d(cc.Label)],t.prototype,"labelOnOffEffect",void 0),__decorate([u],t)}(a.default);o.default=h,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","../../sdk/SDKConst":"SDKConst","../UICenter":"UICenter"}],ShoItemMore:[function(e,t,o){"use strict";cc._RF.push(t,"2217ao7M05BP5rIsHS34Ill","ShoItemMore"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/I18N"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.label.string=i.default.get("L40007")},t.prototype.onContentClick=function(){this.action&&this.action(this.node,this.type)},t.prototype.setContent=function(e,t){this.type=e,this.action=t},__decorate([r(cc.Label)],t.prototype,"label",void 0),__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../core/global/I18N":"I18N"}],ShopComp:[function(e,t,o){"use strict";cc._RF.push(t,"f831f90lbFMcKYnuc0pEowM","ShopComp"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/I18N"),a=e("../../../core/Table/Table"),n=e("../../../core/Table/TableHelper"),r=e("../../../core/UI/Toast"),s=e("../../../data/ShopHelper"),l=e("../../../Game"),c=e("../../../game/type/Enum"),p=e("../../../global/GameConfig"),u=e("../../../sdk/LogEvent"),d=e("./ShoItemMore"),h=e("./ShopItemAdCoins"),f=e("./ShopItemComp"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t.suit=null,t.ads=null,t.pig=null,t.title=null,t.more=null,t.adCoins=null,t.itemParent=null,t.shopWindowType=0,t.tabType=1,t.shopItemPool=[],t.currentItems=[],t.titleNode=null,t.moreOptions=[],t.adCoinsNode=null,t.shopMoreClicked=!1,t.goldMoreClicked=!1,t}var o;return __extends(t,e),o=t,t.prototype.refreshItemsTab=function(e){this.tabType=e,this.clearItems();for(var t=n.TableHelper.GetCount(a.eTable.eTabShop),i=0;i<t;i++){var r=n.TableHelper.GetFieldByIndex(a.eTable.eTabShop,i);if(this.tabType==r.type&&o.canShowByPurchase(r))if(r.type!=c.ShopType.CoinsShop||0!=r.payid){var s=this.getShopItemType(r);(u=this.getItemFormPools(s,r.id)).setContent(r),this.currentItems.push(u),u.node.setParent(this.itemParent)}else this.showAdCoinsItem()}for(var l=0,p=this.currentItems;l<p.length;l++){var u;(u=p[l]).onClick=this.onConentClick.bind(this)}},t.prototype.refreshItemsNoTab=function(){var e=this;this.clearItems();var t=n.TableHelper.FindAll(a.eTable.eTabShop,function(t){return t.type==c.ShopType.MoneyShop&&(e.shopMoreClicked||1==t.show)&&o.canShowByPurchase(t)});this.createItems(t),this.shopMoreClicked||this.createMoreOption(c.ShopType.MoneyShop),this.titleNode?(this.titleNode.active=!0,this.titleNode.parent=this.itemParent):(this.titleNode=cc.instantiate(this.title),this.titleNode.parent=this.itemParent);var i=n.TableHelper.FindAll(a.eTable.eTabShop,function(t){return t.type==c.ShopType.CoinsShop&&(e.goldMoreClicked||1==t.show)});this.createItems(i),this.goldMoreClicked||this.createMoreOption(c.ShopType.CoinsShop);for(var r=0,s=this.currentItems;r<s.length;r++)s[r].onClick=this.onConentClick.bind(this)},t.canShowByPurchase=function(e){return e.type!=c.ShopType.MoneyShop||e.repeatable>0||!(l.Game.userData.shopData.buyIds.findIndex(function(t){return t==e.id})>=0)},t.prototype.createItems=function(e){for(var t=0;t<e.length;t++){var o=e[t],i=this.getShopItemType(o),a=this.getItemFormPools(i,o.id);a.setContent(o),this.currentItems.push(a),a.node.setParent(this.itemParent)}},t.prototype.createMoreOption=function(e){var t=cc.instantiate(this.more);t.getComponent(d.default).setContent(e,this.onMoreOptionClick.bind(this)),t.parent=this.itemParent,this.moreOptions.push(t)},t.prototype.onMoreOptionClick=function(e,t){e.active=!1,t==c.ShopType.CoinsShop?this.goldMoreClicked=!0:this.shopMoreClicked=!0,this.refreshItemsNoTab()},t.prototype.clearItems=function(){this.titleNode&&(this.titleNode.active=!1,this.titleNode.removeFromParent(!1));for(var e=0,t=this.moreOptions;e<t.length;e++){var o=t[e];o&&o.destroy()}this.moreOptions=[];for(var i=0,a=this.currentItems;i<a.length;i++){var n=a[i];this.shopItemPool.push(n),n.node.removeFromParent(!1)}this.currentItems=[],this.adCoinsNode&&(this.adCoinsNode.active=!1,this.adCoinsNode.removeFromParent(!1))},t.prototype.getItemFormPools=function(e,t){var o=null,i=this.shopItemPool.findIndex(function(o){return o.itemType==e||o.itemType==t});return-1!=i?(o=this.shopItemPool[i],this.shopItemPool.splice(i,1)):o=(101==t?cc.instantiate(this.pig):107==t?cc.instantiate(this.ads):2==e?cc.instantiate(this.suit):cc.instantiate(this.item)).getComponent(f.default),o},t.prototype.getShopItemType=function(e){for(var t=0,o=0;o<4;o++)e["num"+(o+1)]>0&&t++;return t<=1?101==e.id||107==e.id?e.id:c.ShopItemType.NormalItem:c.ShopItemType.SuitItem},t.prototype.onConentClick=function(e){e.type==c.ShopType.MoneyShop?this.doMoneyBuy(e):this.doCoinBuy(e)},t.getFildValueByType=function(e,t){for(var o=0;o<5;o++)if(e["type"+(o+1)]===t)return e["num"+(o+1)];return 0},t.prototype.doCoinBuy=function(e){var t=l.Game.userData.goldData;if(t.gold<e.payid)r.default.showWith(i.default.get("L858"));else{var a=l.Game.userData.dotData.currentLevel;t.gold-=e.payid;var n=o.getFildValueByType(e,c.PropType.PropUndo),s=o.getFildValueByType(e,c.PropType.PropAuto),p=o.getFildValueByType(e,c.PropType.PropRefresh);t.propUndo+=n,t.propAuto+=s,t.propRefresh+=p,l.Game.userData.goldData=t,n>0&&(u.default.dotPropLog(c.PropType.PropUndo,n,t.propUndo,a,1),u.default.dotVirtualGainUse(n,e.payid/n,e.type1,a,e.payid,0,1,t.gold,1)),s>0&&(u.default.dotPropLog(c.PropType.PropAuto,s,t.propAuto,a,1),u.default.dotVirtualGainUse(s,e.payid/s,e.type1,a,e.payid,0,1,t.gold,1)),p>0&&(u.default.dotPropLog(c.PropType.PropRefresh,p,t.propRefresh,a,1),u.default.dotVirtualGainUse(p,e.payid/p,e.type1,a,e.payid,0,1,t.gold,1)),this.onBuySucc&&this.onBuySucc()}},t.prototype.doMoneyBuy=function(e){var t,o=this;t=0==this.shopWindowType?3:1,l.Game.sdkPipeline.purchaseByShopId(e.id,t,function(i){s.default.getInstance().shopDataChange(e,i,t),o.onBuySucc&&o.onBuySucc()})},t.prototype.showAdCoinsItem=function(){this.adCoinsNode?(this.adCoinsNode.active=!0,this.adCoinsNode.parent=this.itemParent):(this.adCoinsNode=cc.instantiate(this.adCoins),this.adCoinsNode.parent=this.itemParent);var e=p.default.SDK.rewardAvailability();this.refreshAdCoinItem(e)},t.prototype.refreshAdCoinItem=function(e){if(this.adCoinsNode){var t=this.adCoinsNode.getComponent(h.default);t&&t.refreshAdBtn(e)}},__decorate([m(cc.Prefab)],t.prototype,"item",void 0),__decorate([m(cc.Prefab)],t.prototype,"suit",void 0),__decorate([m(cc.Prefab)],t.prototype,"ads",void 0),__decorate([m(cc.Prefab)],t.prototype,"pig",void 0),__decorate([m(cc.Prefab)],t.prototype,"title",void 0),__decorate([m(cc.Prefab)],t.prototype,"more",void 0),__decorate([m(cc.Prefab)],t.prototype,"adCoins",void 0),__decorate([m(cc.Node)],t.prototype,"itemParent",void 0),o=__decorate([y],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../Game":"Game","../../../core/Table/Table":"Table","../../../core/Table/TableHelper":"TableHelper","../../../core/UI/Toast":"Toast","../../../core/global/I18N":"I18N","../../../data/ShopHelper":"ShopHelper","../../../game/type/Enum":"Enum","../../../global/GameConfig":"GameConfig","../../../sdk/LogEvent":"LogEvent","./ShoItemMore":"ShoItemMore","./ShopItemAdCoins":"ShopItemAdCoins","./ShopItemComp":"ShopItemComp"}],ShopHelper:[function(e,t,o){"use strict";cc._RF.push(t,"298f1BUUPRHq7GO4HbrKCVo","ShopHelper"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../core/Table/TableHelper"),a=e("../core/Table/Table"),n=e("../Game"),r=e("../game/type/Enum"),s=e("../core/global/Emitter"),l=e("../global/Const"),c=e("../sdk/MibData"),p=e("../sdk/LogEvent"),u=e("../core/util/MathUtil"),d=e("../game/BoxOpenSystem"),h=function(){function e(){}return e.getInstance=function(){return e.instance},e.prototype.getFildValueByType=function(e,t){for(var o=0;o<5;o++)if(e["type"+(o+1)]===t)return e["num"+(o+1)];return 0},e.prototype.pigDataChange=function(e,t){console.log("*****king shopDataChange\uff1a*****orderId:"+t);var o=i.TableHelper.Find(a.eTable.eTabShop,function(t){return t.id==e}),r=n.Game.userData.pigData,u=n.Game.userData.goldData,d=0;201==e?d=r.pigCoin:202==e?d=3*r.pigCoin:203==e&&(d=5*r.pigCoin),u.gold+=d,n.Game.userData.goldData=u,r.pigCoin=0,r.adNo=0,n.Game.userData.pigData=r,s.Emitter.fire(l.default.eOnChangePigData);var h=new c.RolePayFinish;h.ProductId=o.id.toString(),h.PurchaseScene="2",h.missionid=n.Game.userData.dotData.currentLevel.toString(),h.money=o.payid.toString(),h.tradeNo=t,h.gameTradeNo=t,h.channelTradeNo=t,h.currency="USD",p.default.log(p.default.dot_pay_finished,h);var f=h.currency+","+h.money+","+h.tradeNo+","+h.ProductId+","+h.PurchaseScene+","+h.missionid;n.Game.sdkPipeline.smbPayFinsih(f)},e.prototype.shopDataChange=function(t,o,i){console.log("*****king shopDataChange\uff1a*****orderId:"+o+" purchaseScene:"+i);var a=n.Game.userData.goldData;a.gold+=this.getFildValueByType(t,r.PropType.PropGold),a.propUndo+=this.getFildValueByType(t,r.PropType.PropUndo),a.propAuto+=this.getFildValueByType(t,r.PropType.PropAuto),a.propRefresh+=this.getFildValueByType(t,r.PropType.PropRefresh);var u=this.getFildValueByType(t,r.PropType.PropRemoveAds),d=n.Game.userData.shopData;d.removeAds=u,d.buyIds.findIndex(function(e){return e==t.id})<0&&d.buyIds.push(t.id),n.Game.userData.goldData=a,n.Game.userData.shopData=d,t.id==e.BeginnerGiftId&&s.Emitter.fire(l.default.eOnBeginnerPurchased,0),t.id==e.RemoveAdId&&s.Emitter.fire(l.default.eHideRemoveAd);var h=new c.RolePayFinish;h.ProductId=t.id.toString(),h.PurchaseScene=i.toString(),h.missionid=n.Game.userData.dotData.currentLevel.toString(),h.money=t.payid.toString(),h.tradeNo=o,h.gameTradeNo=o,h.channelTradeNo=o,h.currency="USD",p.default.log(p.default.dot_pay_finished,h);var f=h.currency+","+h.money+","+h.tradeNo+","+h.ProductId+","+h.PurchaseScene+","+h.missionid;n.Game.sdkPipeline.smbPayFinsih(f)},e.prototype.doMoneyBuy=function(e,t){var o=i.TableHelper.Find(a.eTable.eTabShop,function(t){return t.androidPayId==e});if(null!=o){var n=o.GetID();console.log("*****king \u8865\u5355\u6267\u884c\uff1a"+e+"*****orderId:"+t),201==n||202==n||203==n?this.pigDataChange(n,t):102==n?this.shopDataChange(o,t,4):204==n?this.gainSuperSpinData(o,t):this.shopDataChange(o,t,1)}},e.prototype.gainSuperSpinData=function(e,t){console.log("*****king gainSuperSpinData: *****orderId:"+t);var o=this.getRandomIndex(),s=i.TableHelper.GetFieldByIndex(a.eTable.eTabSuperRotary,o);if(s){var l=new d.Prop(s.type,s.number);this.onGainItem(l);var u=new c.RolePayFinish;u.ProductId=e.id.toString(),u.PurchaseScene=r.PayScene.InSuperSpin.toString(),u.missionid=n.Game.userData.dotData.currentLevel.toString(),u.money=e.payid.toString(),u.tradeNo=t,u.gameTradeNo=t,u.channelTradeNo=t,u.currency="USD",p.default.log(p.default.dot_pay_finished,u);var h=u.currency+","+u.money+","+u.tradeNo+","+u.ProductId+","+u.PurchaseScene+","+u.missionid;n.Game.sdkPipeline.smbPayFinsih(h)}},e.prototype.getRandomIndex=function(){for(var e=0,t=i.TableHelper.GetCount(a.eTable.eTabSuperRotary),o=[],n=0;n<t;n++){var r=i.TableHelper.GetFieldByIndex(a.eTable.eTabSuperRotary,n);o.push(r.weight)}for(var s=0,l=0;l<o.length;l++)s+=o[l];for(var c=u.default.randomRange(1,s+1),p=0;p<o.length;p++)if((c-=o[p])<=0){e=p;break}return e},e.prototype.onGainItem=function(e){var t=n.Game.userData.goldData;e.propType==r.PropType.PropGold?t.gold+=e.propNum:e.propType==r.PropType.PropUndo?t.propUndo+=e.propNum:e.propType==r.PropType.PropAuto?t.propAuto+=e.propNum:e.propType==r.PropType.PropRefresh&&(t.propRefresh+=e.propNum),n.Game.userData.goldData=t},e.BeginnerGiftId=102,e.PigMultiple1Id=201,e.PigMultiple3Id=202,e.PigMultiple5Id=203,e.RemoveAdId=107,e.SuperBonusId=204,e.instance=new e,e}();o.default=h,cc._RF.pop()},{"../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/global/Emitter":"Emitter","../core/util/MathUtil":"MathUtil","../game/BoxOpenSystem":"BoxOpenSystem","../game/type/Enum":"Enum","../global/Const":"Const","../sdk/LogEvent":"LogEvent","../sdk/MibData":"MibData"}],ShopItemAdCoins:[function(e,t,o){"use strict";cc._RF.push(t,"199f9WKD6ZCC6h7IdoTc1NM","ShopItemAdCoins"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../Game"),a=e("../../../game/BoxOpenSystem"),n=e("../../../game/type/Enum"),r=e("../../../global/GameConfig"),s=e("../../../sdk/SDKConst"),l=e("../../UICenter"),c=cc._decorator,p=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnAd=null,t}return __extends(t,e),t.prototype.onContentClick=function(){i.Game.sdkPipeline.showReward(function(e){if(e){var t=[new a.Prop(n.PropType.PropGold,r.default.ShopWatchReward)];l.UICenter.openGainItemWindow(t,function(){var e=i.Game.userData.goldData;e.gold+=r.default.ShopWatchReward,i.Game.userData.goldData=e},!1,n.ItemFromType.FromBonus)}},this,s.default.AD_PLAY_POS_BUY_GOLD)},t.prototype.refreshAdBtn=function(e){this.btnAd.interactable=e},__decorate([u(cc.Button)],t.prototype,"btnAd",void 0),__decorate([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../Game":"Game","../../../game/BoxOpenSystem":"BoxOpenSystem","../../../game/type/Enum":"Enum","../../../global/GameConfig":"GameConfig","../../../sdk/SDKConst":"SDKConst","../../UICenter":"UICenter"}],ShopItemAds:[function(e,t,o){"use strict";cc._RF.push(t,"67f95PyPYZM6I2weuhl60aA","ShopItemAds"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/I18N"),a=e("./ShopItemComp"),n=cc._decorator,r=n.ccclass,s=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"itemType",{get:function(){return 107},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.label.string=i.default.get("L40006")},__decorate([s(cc.Label)],t.prototype,"label",void 0),__decorate([r],t)}(a.default);o.default=l,cc._RF.pop()},{"../../../core/global/I18N":"I18N","./ShopItemComp":"ShopItemComp"}],ShopItemComp:[function(e,t,o){"use strict";cc._RF.push(t,"a0a09TQb4FKkJLcxETD9Zty","ShopItemComp"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/UI/WNode"),a=e("../../../game/type/Enum"),n=e("./ShopComp"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.costNum=null,t.costIcon=null,t.field=null,t.onClick=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"itemType",{get:function(){return 0},enumerable:!1,configurable:!0}),t.prototype.setContent=function(t){e.prototype.show.call(this),this.field=t,this.onSetContent(),this.setCostInfo()},t.prototype.onSetContent=function(){},t.prototype.getFildValueByType=function(e,t){return n.default.getFildValueByType(e,t)},t.prototype.setCostInfo=function(){this.field.type==a.ShopType.MoneyShop?(this.costIcon.active=!1,this.costNum.node.x=0,this.costNum.string="$"+this.field.payid):(this.costIcon.active=!0,this.costNum.node.x=25,this.costNum.string=""+this.field.payid)},t.prototype.onContentClick=function(){this.onClick&&this.onClick(this.field,this.node)},__decorate([l(cc.Label)],t.prototype,"costNum",void 0),__decorate([l(cc.Node)],t.prototype,"costIcon",void 0),__decorate([s],t)}(i.default);o.default=c,cc._RF.pop()},{"../../../core/UI/WNode":"WNode","../../../game/type/Enum":"Enum","./ShopComp":"ShopComp"}],ShopItemIcon:[function(e,t,o){"use strict";cc._RF.push(t,"e49aeXelzhAups2qEow+9AE","ShopItemIcon"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/UI/WNode"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconSp=null,t.propNum=null,t}return __extends(t,e),t.prototype.setContent=function(e,t){this.iconSp.spriteFrame=e,this.propNum.string=t},__decorate([r(cc.Sprite)],t.prototype,"iconSp",void 0),__decorate([r(cc.Label)],t.prototype,"propNum",void 0),__decorate([n],t)}(i.default);o.default=s,cc._RF.pop()},{"../../../core/UI/WNode":"WNode"}],ShopItemPig:[function(e,t,o){"use strict";cc._RF.push(t,"12728R6a9xPNZJH5u+Dg+wp","ShopItemPig"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/Emitter"),a=e("../../../core/global/I18N"),n=e("../../../core/UI/Toast"),r=e("../../../Game"),s=e("../../../global/Const"),l=e("../../../global/GameConfig"),c=e("./ShopItemComp"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelCoin=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"itemType",{get:function(){return 101},enumerable:!1,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),i.Emitter.register(s.default.ePigDataChanged,this.onSetContent,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),i.Emitter.remove(s.default.ePigDataChanged,this.onSetContent,this)},t.prototype.onSetContent=function(){e.prototype.onSetContent.call(this);var t=r.Game.userData.pigData;this.labelCoin.string=""+t.pigCoin},t.prototype.onContentClick=function(){r.Game.userData.pigData.pigCoin<l.default.PigMinCoins?n.default.showWith(a.default.get("L40114")):e.prototype.onContentClick.call(this)},__decorate([d(cc.Label)],t.prototype,"labelCoin",void 0),__decorate([u],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../Game":"Game","../../../core/UI/Toast":"Toast","../../../core/global/Emitter":"Emitter","../../../core/global/I18N":"I18N","../../../global/Const":"Const","../../../global/GameConfig":"GameConfig","./ShopItemComp":"ShopItemComp"}],ShopItemSuit:[function(e,t,o){"use strict";cc._RF.push(t,"4a24bf+CDhAdrtJbiPMZZ3s","ShopItemSuit"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/I18N"),a=e("../../../game/type/Enum"),n=e("./ShopItemComp"),r=e("./ShopItemIcon"),s=cc._decorator,l=s.ccclass,c=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconFrames=[],t.bgFrames=[],t.bgSprite=null,t.noAdNode=null,t.saleLabel=null,t.iconComps=[],t.labelPackName=null,t.labelAd=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"itemType",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.getIcon=function(e){return this.iconFrames[e]},t.prototype.getBgSprite=function(e){return this.bgFrames.find(function(t){return t.name==="icon_shop_"+e})},t.prototype.onSetContent=function(){for(var e=0,t=0,o=0;o<this.iconComps.length;o++)(e=this.getFildValueByType(this.field,o))>0&&(this.iconComps[t].setActive(!0),this.iconComps[t].setContent(this.getIcon(o),e),this.field.type==a.ShopType.MoneyShop?this.costNum.string="$"+this.field.payid:this.costNum.string=""+this.field.payid,t++);for(o=t;o<this.iconComps.length;o++)this.iconComps[t].setActive(!1);this.bgSprite&&(this.bgSprite.spriteFrame=this.getBgSprite(this.field.id)),this.enableAd(),this.enableSale(),this.setPackName(),this.labelAd&&(this.labelAd.string=i.default.get("L40166"))},t.prototype.enableAd=function(){var e=this.getFildValueByType(this.field,4);this.noAdNode.active=e>0,this.bgSprite&&(this.noAdNode.active=!1)},t.prototype.enableSale=function(){switch(this.saleLabel.node.parent.active=!0,this.field.id){case 102:this.saleLabel.node.parent.active=!1;break;case 103:this.saleLabel.string="+25%";break;case 104:this.saleLabel.string="+35%";break;case 105:this.saleLabel.string="+50%";break;case 106:this.saleLabel.string="+100%"}},t.prototype.setPackName=function(){var e=this.field.item,t=i.default.get(e);t&&(this.labelPackName.string=t)},__decorate([c(cc.SpriteFrame)],t.prototype,"iconFrames",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"bgFrames",void 0),__decorate([c(cc.Sprite)],t.prototype,"bgSprite",void 0),__decorate([c(cc.Node)],t.prototype,"noAdNode",void 0),__decorate([c(cc.Label)],t.prototype,"saleLabel",void 0),__decorate([c(r.default)],t.prototype,"iconComps",void 0),__decorate([c(cc.Label)],t.prototype,"labelPackName",void 0),__decorate([c(cc.Label)],t.prototype,"labelAd",void 0),__decorate([l],t)}(n.default);o.default=p,cc._RF.pop()},{"../../../core/global/I18N":"I18N","../../../game/type/Enum":"Enum","./ShopItemComp":"ShopItemComp","./ShopItemIcon":"ShopItemIcon"}],ShopItemTitle:[function(e,t,o){"use strict";cc._RF.push(t,"1dc73dk2eRF0ZWOQDP2XQaf","ShopItemTitle"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/I18N"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.label.string=i.default.get("L40005")},__decorate([r(cc.Label)],t.prototype,"label",void 0),__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../core/global/I18N":"I18N"}],ShopItem:[function(e,t,o){"use strict";cc._RF.push(t,"2edf7PMXgpK0ZBrsrgDu9cl","ShopItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ShopItemComp"),a=e("./ShopItemIcon"),n=cc._decorator,r=n.ccclass,s=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconComp=null,t.goldIconComp=null,t.iconFrames=[],t}return __extends(t,e),Object.defineProperty(t.prototype,"itemType",{get:function(){return 1},enumerable:!1,configurable:!0}),t.prototype.onSetContent=function(){for(var e=0,t=0;t<4;t++)if((e=this.getFildValueByType(this.field,t))>0)return void(t>0?(this.iconComp.setContent(this.getIcon(t),e),this.iconComp.setActive(!0),this.goldIconComp.setActive(!1)):(this.goldIconComp.setContent(this.getGoldIcon(e),e),this.iconComp.setActive(!1),this.goldIconComp.setActive(!0)))},t.prototype.getIcon=function(e){return this.iconFrames[e]},t.prototype.getGoldIcon=function(e){return 5e3==e?this.iconFrames[6]:2e3==e?this.iconFrames[5]:this.iconFrames[4]},__decorate([s(a.default)],t.prototype,"iconComp",void 0),__decorate([s(a.default)],t.prototype,"goldIconComp",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"iconFrames",void 0),__decorate([r],t)}(i.default);o.default=l,cc._RF.pop()},{"./ShopItemComp":"ShopItemComp","./ShopItemIcon":"ShopItemIcon"}],ShopWindow:[function(e,t,o){"use strict";cc._RF.push(t,"fc32fD4arRO1KslNZobvuMl","ShopWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/global/I18N"),n=e("../../core/UI/WWindow"),r=e("../../Game"),s=e("../../game/type/Enum"),l=e("../../global/Const"),c=e("../UICenter"),p=e("./shop/ShopComp"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shopComp=null,t.shopToggle=null,t.coinsToggle=null,t.label=null,t.labelShop=null,t.labelCoin=null,t.labelCoinNum=null,t.tabType=s.ShopType.CoinsShop,t.mHasBuy=!1,t.mFromType=0,t}return __extends(t,e),t.prototype.init=function(){var t=this;e.prototype.init.call(this),this.shopComp.onBuySucc=this.onBuySucc.bind(this),i.Emitter.register(l.default.eGoldDataChanged,this.goldChange,this),i.Emitter.register("",function(e){t.shopComp.refreshAdCoinItem(e)},this)},t.prototype.show=function(t,o){e.prototype.show.call(this),this.tabType=t,1==this.tabType?this.shopToggle.check():this.coinsToggle.check(),this.initLanguage(),this.shopComp.refreshItemsTab(this.tabType),this.mHasBuy=!1,this.mFromType=o,this.goldChange()},t.prototype.initLanguage=function(){this.label.string=a.default.get("L30002"),this.labelShop.string=a.default.get("L30002"),this.labelCoin.string=a.default.get("L40005")},t.prototype.onBuySucc=function(){this.shopComp.refreshItemsTab(this.tabType),this.mHasBuy=!0},t.prototype.ChangePage=function(e,t){this.tabType=Number(t),this.shopComp.refreshItemsTab(this.tabType)},t.prototype.hide=function(){e.prototype.hide.call(this),!this.mHasBuy&&this.mFromType>0&&c.UICenter.openFreePropWindow(this.mFromType)},t.prototype.goldChange=function(){var e=r.Game.userData.goldData;this.labelCoinNum.string=""+e.gold},__decorate([h(p.default)],t.prototype,"shopComp",void 0),__decorate([h(cc.Toggle)],t.prototype,"shopToggle",void 0),__decorate([h(cc.Toggle)],t.prototype,"coinsToggle",void 0),__decorate([h(cc.Label)],t.prototype,"label",void 0),__decorate([h(cc.Label)],t.prototype,"labelShop",void 0),__decorate([h(cc.Label)],t.prototype,"labelCoin",void 0),__decorate([h(cc.Label)],t.prototype,"labelCoinNum",void 0),__decorate([d],t)}(n.default);o.default=f,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../game/type/Enum":"Enum","../../global/Const":"Const","../UICenter":"UICenter","./shop/ShopComp":"ShopComp"}],SignInContent:[function(e,t,o){"use strict";cc._RF.push(t,"877a6WEXxZIopP759Wq9GV0","SignInContent"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../core/global/I18N"),a=e("../../../core/util/StrUtil"),n=cc._decorator,r=n.ccclass,s=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelDay=null,t.labelCoins=null,t.nodeCoins=null,t.nodeHasSign=null,t}return __extends(t,e),t.prototype.setContent=function(e,t,o){this.labelDay.string=a.default.stringFormat(i.default.get("L40001"),e),this.labelCoins.string=String(o),this.nodeCoins.active=!t,this.nodeHasSign.active=t},t.prototype.refreshHasSign=function(){this.nodeCoins.active=!1,this.nodeHasSign.active=!0},__decorate([s(cc.Label)],t.prototype,"labelDay",void 0),__decorate([s(cc.Label)],t.prototype,"labelCoins",void 0),__decorate([s(cc.Node)],t.prototype,"nodeCoins",void 0),__decorate([s(cc.Node)],t.prototype,"nodeHasSign",void 0),__decorate([r],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../core/global/I18N":"I18N","../../../core/util/StrUtil":"StrUtil"}],StageView:[function(e,t,o){"use strict";cc._RF.push(t,"87568Ea2hNM9qQbQcfZ8BVR","StageView"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../core/global/Emitter"),a=e("../core/global/I18N"),n=e("../global/Const"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.labelBuyGrid=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;i.Emitter.register(n.default.eChangeGameBG,this.setBg,this),this.node.on(cc.Node.EventType.TOUCH_END,function(t){t.target,e.node}),this.initLanguage()},t.prototype.reset=function(){},t.prototype.setBg=function(e){this.bg.spriteFrame=e},t.prototype.initLanguage=function(){this.labelBuyGrid.string=a.default.get("L40124")},__decorate([l(cc.Sprite)],t.prototype,"bg",void 0),__decorate([l(cc.Label)],t.prototype,"labelBuyGrid",void 0),__decorate([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../core/global/Emitter":"Emitter","../core/global/I18N":"I18N","../global/Const":"Const"}],StageWindow:[function(e,t,o){"use strict";cc._RF.push(t,"8b972QMTJVG+axI6gvylH/6","StageWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/UI/WWindow"),a=e("../../Game"),n=e("../../global/AudioMgr"),r=e("../../core/global/I18N"),s=e("../UICenter"),l=e("../../global/GameConfig"),c=e("../../core/global/Emitter"),p=e("../../global/Const"),u=e("../../core/util/MathUtil"),d=e("../../core/Table/Table"),h=e("../../core/Table/TableHelper"),f=e("../../core/util/StrUtil"),g=e("../../game/type/Enum"),y=e("../../sdk/LogEvent"),m=e("../AnimationUtil"),v=e("../../sdk/MibData"),_=e("../../core/rili/DaliyHelper"),b=cc._decorator,T=b.ccclass,C=b.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.menuArea=null,t.levelLabel=null,t.menuButtons=[],t.stars=[],t.proBar=null,t.menuLabel=[],t.state=[],t.assistMenu=null,t.treasureBoxNode=null,t.iconUndo=null,t.iconAuto=null,t.iconRefresh=null,t.pigBankLabel=null,t.bgNums=[],t.propIcons=[],t.lockIcons=[],t.coinAniNode=null,t.coinAniIconNode=null,t.coinAniStartNode=null,t.mUndoCount=1,t}return __extends(t,e),t.prototype.start=function(){this.initUI(),this.reset(),this.enableUndo(1),this.hide()},t.prototype.reset=function(){},t.prototype.initUI=function(){this.initLanguage(),this.advertScheduleOnce(),this.menusChange(0,a.Game.userData.goldData.propUndo),this.menusChange(1,a.Game.userData.goldData.propAuto),this.menusChange(2,a.Game.userData.goldData.propRefresh);var e=a.Game.userData.pigData;this.pigBankLabel.string=""+e.pigCoin,this.assistMenu.active=l.default.TEST,c.Emitter.register(p.default.eOnStartGame,this.onStartGame,this),c.Emitter.register(p.default.eOnGameReady,this.onGameReady,this),c.Emitter.register(p.default.eOnGameEnd,this.onGameEnd,this),c.Emitter.register(p.default.eLanguageChange,this.initLanguage,this),c.Emitter.register(p.default.eGoldDataChanged,this.goldChange,this),c.Emitter.register(p.default.eOnChangePigData,this.resetPigCoin,this)},t.prototype.onStartGame=function(e){if(cc.log("\u6e38\u620f\u5f00\u5c40\uff01"),this.enableMenus(!1),this.menuArea.active=!0,l.default.isChallenge)this.levelLabel.string=_.default.getChangeDate();else{var t=h.TableHelper.GetField(d.eTable.eTabMap,e);if(t){var o=t.chapter+" - "+t.Checkpoint;this.levelLabel.string=f.default.stringFormat(r.default.get("L10025"),o)}}this.showProps()},t.prototype.onGameReady=function(){this.enableMenus(!0,!1),this.enableUndo(this.mUndoCount)},t.prototype.onGameEnd=function(){this.enableMenus(!1),this.activeBonusBtn(!1)},t.prototype.initLanguage=function(){},t.prototype.enableMenus=function(e,t){void 0===t&&(t=!0);for(var o=0;o<this.menuButtons.length;o++)this.menuButtons[o].interactable=e},t.prototype.enableUndo=function(e){this.mUndoCount=e,this.menuButtons[0].interactable=e>0},t.prototype.onNextLevelClick=function(){a.Game.gameMgr.nextArcade();var e=h.TableHelper.GetField(d.eTable.eTabMap,a.Game.gameMgr.arcadelevel);if(e){var t=e.chapter+" - "+e.Checkpoint;this.levelLabel.string=f.default.stringFormat(r.default.get("L10025"),t)}},t.prototype.onPrevLevelClick=function(){a.Game.gameMgr.prevLevel();var e=h.TableHelper.GetField(d.eTable.eTabMap,a.Game.gameMgr.arcadelevel);if(e){var t=e.chapter+" - "+e.Checkpoint;this.levelLabel.string=f.default.stringFormat(r.default.get("L10025"),t)}},t.prototype.onGameClick=function(){cc.log("\u5237\u65b0\u6309\u94ae"),this.lockIcons[2].active||a.Game.gameMgr.refreshTile()},t.prototype.onTipsClick=function(){this.lockIcons[1].active||a.Game.gameMgr.autoEliminate()},t.prototype.onUndoClick=function(){cc.log("\u56de\u9000\u6309\u94ae\uff01"),this.lockIcons[0].active||a.Game.gameMgr.undoOperation()},t.prototype.onBonusClick=function(){s.UICenter.openBonusWindow()},t.prototype.onSuspendClick=function(){s.UICenter.openSuspendWindow()},t.prototype.activeBonusBtn=function(e,t){void 0===t&&(t=!0)},t.prototype.refreshStars=function(e,t){e>this.stars.length&&(e=this.stars.length);for(var o=0;o<this.stars.length;o++)t>10&&(0==this.stars[o].active&&o<e==1&&cc.log("\u64ad\u653e\u589e\u52a0\u661f\u661f\u97f3\u4e50"),1==this.stars[o].active&&o<e==0&&n.AudioMgr.playEffect("kill_time")),this.stars[o].active=o<e;t<=l.default.MinStarTime?this.proBar.progress=1-.25/l.default.MinStarTime*t:l.default.MinStarTime<t&&t<=l.default.BetweenStarTime?this.proBar.progress=.75-.25/(l.default.BetweenStarTime-l.default.MinStarTime)*(t-l.default.MinStarTime):l.default.BetweenStarTime<t&&t<=l.default.MaxStarTime?this.proBar.progress=.5-.25/(l.default.MaxStarTime-l.default.BetweenStarTime)*(t-l.default.BetweenStarTime):t<=l.default.LastTime&&(this.proBar.progress=.25-.25/(l.default.LastTime-l.default.MaxStarTime)*(t-l.default.MaxStarTime))},t.prototype.menusChange=function(e,t){this.menuLabel[e].node.active=t>0,this.state[e].active=t<=0,t=t>l.default.PropShowLimit?l.default.PropShowLimit:t,this.menuLabel[e].string=String(t)},t.prototype.advertScheduleOnce=function(){this.scheduleOnce(this.advertAppear,l.default.advertTime)},t.prototype.advertDisappear=function(){this.menuButtons[3].node.active=!1,cc.tween(this.treasureBoxNode).stop(),this.treasureBoxNode.angle=0},t.prototype.advertAppear=function(){this.menuButtons[3].node.active=!0,this.treasureBoxAnimate()},t.prototype.choiceAdvert=function(){var e=this;cc.log("\u70b9\u51fb\u6253\u5f00\u5e7f\u544a\uff01"),s.UICenter.openPlaneWindow(function(t){t&&(e.advertDisappear(),e.advertScheduleOnce())})},t.prototype.goldChange=function(){this.menusChange(0,a.Game.userData.goldData.propUndo),this.menusChange(1,a.Game.userData.goldData.propAuto),this.menusChange(2,a.Game.userData.goldData.propRefresh)},t.prototype.addPigCoin=function(){var e=this,t=u.default.randomRange(l.default.randomMinCoin,l.default.randomMaxCoin),o=a.Game.userData.pigData;o.pigCoin,m.default.bezierFly(this.coinAniNode,this.coinAniStartNode,this.coinAniIconNode,t,1,function(t){o.pigCoin+=t,o.pigCoin>=1500&&(o.pigCoin=1500),e.pigBankLabel.string=""+o.pigCoin},function(e){if(n.AudioMgr.playEffect("gold"),e){a.Game.userData.pigData=o;var i=new v.PigBankCoinAdd;i.missionId=a.Game.userData.dotData.currentLevel.toString(),i.virtualCurrencyTotal=o.pigCoin.toString(),i.number=t.toString(),y.default.log(y.default.dot_addcoin_event,i)}})},t.prototype.resetPigCoin=function(){var e=a.Game.userData.pigData;this.pigBankLabel.string=""+e.pigCoin},t.prototype.treasureBoxAnimate=function(){var e=cc.tween().to(.1,{angle:20}).to(.1,{angle:-20}).to(.1,{angle:10}).to(.1,{angle:-10}).to(.1,{angle:5}).to(.5,{angle:0}).to(4,{angle:0}),t=cc.tween().repeatForever(e);cc.tween(this.treasureBoxNode).then(t).start()},t.prototype.onVipClick=function(){},t.prototype.onPigBankClick=function(){s.UICenter.openPigBankWindow(!1),y.default.dotRechargeScenarios(2)},t.prototype.unlockProps=function(e,t){var o=0;return t==g.PropType.PropUndo?o=l.default.GuideLevel[2]+1:t==g.PropType.PropAuto?o=l.default.GuideLevel[1]+1:t==g.PropType.PropRefresh&&(o=l.default.GuideLevel[3]+1),e>=o},t.prototype.showProps=function(){for(var e=a.Game.userData.lvRwd.This,t=0;t<this.propIcons.length;t++){var o=t+1,i=this.unlockProps(e,o);this.propIcons[t].active=i,this.lockIcons[t].active=!i,this.bgNums[t].active=i}},__decorate([C({type:cc.Node,tooltip:"\u83dc\u5355\u533a"})],t.prototype,"menuArea",void 0),__decorate([C({type:cc.Label,tooltip:"\u5173\u5361"})],t.prototype,"levelLabel",void 0),__decorate([C(cc.Button)],t.prototype,"menuButtons",void 0),__decorate([C(cc.Node)],t.prototype,"stars",void 0),__decorate([C(cc.ProgressBar)],t.prototype,"proBar",void 0),__decorate([C({type:cc.Label})],t.prototype,"menuLabel",void 0),__decorate([C(cc.Node)],t.prototype,"state",void 0),__decorate([C(cc.Node)],t.prototype,"assistMenu",void 0),__decorate([C(cc.Node)],t.prototype,"treasureBoxNode",void 0),__decorate([C(cc.Node)],t.prototype,"iconUndo",void 0),__decorate([C(cc.Node)],t.prototype,"iconAuto",void 0),__decorate([C(cc.Node)],t.prototype,"iconRefresh",void 0),__decorate([C(cc.Label)],t.prototype,"pigBankLabel",void 0),__decorate([C(cc.Node)],t.prototype,"bgNums",void 0),__decorate([C(cc.Node)],t.prototype,"propIcons",void 0),__decorate([C(cc.Node)],t.prototype,"lockIcons",void 0),__decorate([C(cc.Node)],t.prototype,"coinAniNode",void 0),__decorate([C(cc.Node)],t.prototype,"coinAniIconNode",void 0),__decorate([C(cc.Node)],t.prototype,"coinAniStartNode",void 0),__decorate([T],t)}(i.default);o.default=S,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/rili/DaliyHelper":"DaliyHelper","../../core/util/MathUtil":"MathUtil","../../core/util/StrUtil":"StrUtil","../../game/type/Enum":"Enum","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/MibData":"MibData","../AnimationUtil":"AnimationUtil","../UICenter":"UICenter"}],Stage:[function(e,t,o){"use strict";cc._RF.push(t,"98fe2j1JS5AxKgGqq5Mu83e","Stage"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(e){this.mView=null,this.mIsPlaying=!1,this.mIsInit=!1,this.mView=e}return Object.defineProperty(e.prototype,"view",{get:function(){return this.mView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.mIsPlaying},enumerable:!1,configurable:!0}),e.prototype.startGame=function(e){e()},e.prototype.reset=function(){this.mIsPlaying=!1},e.prototype.init=function(){return!this.mIsInit&&(this.mIsInit=!0,!0)},e}();o.default=i,cc._RF.pop()},{}],StarGiftWindow:[function(e,t,o){"use strict";cc._RF.push(t,"7c6d50rHQFCO6QtpJF00XRT","StarGiftWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/I18N"),a=e("../../core/UI/WWindow"),n=e("../../core/util/StrUtil"),r=e("../../Game"),s=e("../../global/GameConfig"),l=cc._decorator,c=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContinue=null,t.richTextDesc=null,t.labelStarNumber=null,t.labelTitle=null,t}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this),this.onContinue=t,this.initLanguage();var o=r.Game.userData.starData;this.labelStarNumber.string=o.total+"/"+s.default.CollectStarTarget},t.prototype.initLanguage=function(){this.richTextDesc.string=n.default.stringFormat(i.default.get("L20051"),s.default.CollectStarTarget),this.labelContinue.string=i.default.get("L20052"),this.labelTitle.string=i.default.get("L30003")},t.prototype.onContinueClick=function(){this.hide(),this.onContinue&&this.onContinue()},__decorate([p(cc.Label)],t.prototype,"labelContinue",void 0),__decorate([p(cc.RichText)],t.prototype,"richTextDesc",void 0),__decorate([p(cc.Label)],t.prototype,"labelStarNumber",void 0),__decorate([p(cc.Label)],t.prototype,"labelTitle",void 0),__decorate([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../global/GameConfig":"GameConfig"}],StrUtil:[function(e,t,o){"use strict";cc._RF.push(t,"babffDQKiFLh4YDuGiRVVhS","StrUtil"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return Object.defineProperty(e,"empty",{get:function(){return""},enumerable:!1,configurable:!0}),e.isNullOrEmpty=function(e){return null==e||null==e||""==e},e.getFileName=function(e){var t=e.indexOf("?"),o=e;return t>0&&(o=e.slice(0,t)),(t=o.lastIndexOf("/"))<=0?o:o.slice(t+1,o.length)},e.isNetUrl=function(e){return!this.isNullOrEmpty(e)&&"http"==e.slice(0,4)},e.prefixInteger=function(e,t){return(Array(t).join("0")+e).slice(-t)},e.stringFormat=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(!e)return e;for(var i=0;i<t.length;i++)if(null!=t[i]){var a=new RegExp("({)"+i+"(})","g");e=e.replace(a,t[i])}return e},e.rpad=function(e,t,o){for(o=o.charAt(0),e||(e=o);e.length<t;)e+=o;return e},e.lpad=function(e,t,o){for(o=o.charAt(0),e||(e=o);e.length<t;)e=o+e;return e},e.startWith=function(e,t){return!(!e||!t||e.length<t.length)&&e.substr(0,t.length)==t},e.endWith=function(e,t){return!(!e||!t||e.length<t.length)&&e.substr(e.length-t.length)==t},e.getRichIcon=function(e,t,o){return void 0===t&&(t=30),void 0===o&&(o="center"),"<img src='"+e+"' height="+t+" align="+o+" />"},e.getUuid=function(){return Date.now()+"-xxxx-xxxx-4xxx-yxxx-xxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}).toUpperCase()},e}();o.default=i,cc._RF.pop()},{}],StrengthWindow:[function(e,t,o){"use strict";cc._RF.push(t,"7e31673GEJCmI8DNCqrgLj0","StrengthWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/UI/WWindow"),a=e("../../Game"),n=e("../../core/global/Emitter"),r=e("../../global/Const"),s=e("../UICenter"),l=e("../AnimationUtil"),c=e("../../global/AudioMgr"),p=e("../../game/BoxOpenSystem"),u=e("../../game/type/Enum"),d=e("../../core/UI/DialogBox"),h=e("../../core/global/I18N"),f=e("../../global/GameConfig"),g=e("../../sdk/SDKConst"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emptyNode=null,t.labelGold=null,t.goldNode=null,t.goldIcon=null,t.isLobby=!1,t.mShowMainShop=!1,t.mShowShop=!0,t}var o;return __extends(t,e),o=t,t.animateGold=function(e,t,i,n){var r=a.Game.uiMgr.getWindow("prefab/StrengthWindow");r instanceof o&&r.animateGold(e,t,i,n)},t.animateProp=function(e,t,i){var n=a.Game.uiMgr.getWindow("prefab/StrengthWindow");n instanceof o&&n.animateProps(e,t,i)},t.prototype.onLoad=function(){n.Emitter.register(r.default.eGoldDataChanged,this.goldChange,this)},t.prototype.show=function(t,o,i){e.prototype.show.call(this),this.isLobby=t,this.emptyNode.active=t,this.goldChange(),this.mShowMainShop=o,this.mShowShop=i},t.prototype.goldChange=function(){var e=a.Game.userData.goldData;this.labelGold.string=""+e.gold},t.prototype.animateGold=function(e,t,o,i){var n=this,r=a.Game.userData.goldData;l.default.bezierFly(this.node,e,this.goldIcon,t,o,function(e){r.gold+=e,n.labelGold.string=""+r.gold},function(e){c.AudioMgr.playEffect("gold"),e&&(a.Game.userData.goldData=r)},i)},t.prototype.animateProps=function(e,t,o){var i=this,n=a.Game.userData.goldData,r=null;t.propType==u.PropType.PropUndo?r=a.Game.gameMgr.stageUI.iconUndo:t.propType==u.PropType.PropAuto?r=a.Game.gameMgr.stageUI.iconAuto:t.propType==u.PropType.PropRefresh?r=a.Game.gameMgr.stageUI.iconRefresh:t.propType==u.PropType.PropGold&&(r=this.goldIcon);var s=1;t.propNum>10&&(s=Math.floor(t.propNum/10)),l.default.bezierFly(this.node,e,r,t.propNum,s,function(e){t.propType==u.PropType.PropGold?(n.gold+=e,i.labelGold.string=""+n.gold):(t.propType==u.PropType.PropUndo?n.propUndo+=e:t.propType==u.PropType.PropAuto?n.propAuto+=e:t.propType==u.PropType.PropRefresh&&(n.propRefresh+=e),a.Game.userData.goldData=n)},function(e){t.propType==u.PropType.PropGold&&c.AudioMgr.playEffect("gold"),e&&(a.Game.userData.goldData=n)},o)},t.prototype.onGoldClick=function(){var e=this;if(this.mShowShop){var t=new d.DialogBoxData;t.initWith(d.eDialogButtonType.CONFIRM|d.eDialogButtonType.CANCEL,h.default.get("L860"),"",h.default.get("L40041")),t.callback=function(t){t==d.eDialogButtonType.CONFIRM&&a.Game.sdkPipeline.showReward(function(e){if(e){var t=[new p.Prop(u.PropType.PropGold,f.default.ShopWatchReward)];s.UICenter.openGainItemWindow(t,function(){var e=a.Game.userData.goldData;e.gold+=f.default.ShopWatchReward,a.Game.userData.goldData=e},!1,u.ItemFromType.FromBonus)}},e,g.default.AD_PLAY_POS_BUY_GOLD)},d.default.showWith(t)}},__decorate([v(cc.Node)],t.prototype,"emptyNode",void 0),__decorate([v(cc.Label)],t.prototype,"labelGold",void 0),__decorate([v(cc.Node)],t.prototype,"goldNode",void 0),__decorate([v(cc.Node)],t.prototype,"goldIcon",void 0),o=__decorate([m],t)}(i.default);o.default=_,cc._RF.pop()},{"../../Game":"Game","../../core/UI/DialogBox":"DialogBox","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../game/BoxOpenSystem":"BoxOpenSystem","../../game/type/Enum":"Enum","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../../sdk/SDKConst":"SDKConst","../AnimationUtil":"AnimationUtil","../UICenter":"UICenter"}],SuperBonusWindow:[function(e,t,o){"use strict";cc._RF.push(t,"d885b21bc5NV4x7H9lBVhHd","SuperBonusWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/UI/WWindow"),a=e("../../Game"),n=e("../../core/global/Emitter"),r=e("../../sdk/SDKConst"),s=e("../../global/AudioMgr"),l=e("../../global/Const"),c=e("../UICenter"),p=e("../../game/BoxOpenSystem"),u=e("../../game/type/Enum"),d=e("../../core/Table/TableHelper"),h=e("../../core/Table/Table"),f=e("../../core/util/MathUtil"),g=e("./StrengthWindow"),y=e("../../sdk/MibData"),m=e("../../sdk/LogEvent"),v=e("../../data/ShopHelper"),_=cc._decorator,b=_.ccclass,T=_.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bonusNode=null,t.btnBack=null,t.btnSpin=null,t.labelPay=null,t.state=!1,t.onClose=null,t.purchaseScene=1,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.initLanguage(),n.Emitter.register(l.default.eLanguageChange,this.initLanguage,this)},t.prototype.show=function(t,o){e.prototype.show.call(this,t),m.default.dotAdPv(r.default.AD_PLAY_POS_BONUS),this.onClose=o,this.setBonusState(!0),this.setBtnsState(!0),c.UICenter.openStrengthWindow()},t.prototype.hide=function(){e.prototype.hide.call(this),c.UICenter.openBonusWindow(null,function(){c.UICenter.openStrengthWindow(!0,!0)})},t.prototype.onHide=function(){c.UICenter.closeStrengthWindow(),this.onClose&&(this.onClose(),this.onClose=null),e.prototype.onHide.call(this)},t.prototype.initLanguage=function(){var e=d.TableHelper.GetField(h.eTable.eTabShop,v.default.SuperBonusId);e&&(this.labelPay.string="$"+e.payid)},t.prototype.setBonusState=function(e){this.state=!e,e&&(this.bonusNode.angle=0)},t.prototype.setBtnsState=function(e){this.btnBack.interactable=e,this.btnSpin.interactable=e},t.prototype.run=function(e){var t=360-45*e;cc.tween(this.bonusNode).to(8,{angle:-2160-t},{easing:"quintOut"}).start(),cc.tween(this.bonusNode).delay(7).call(this.onRunFinished.bind(this,e)).start(),s.AudioMgr.playEffect("bonus_spin")},t.prototype.onRunFinished=function(e){var t=this;this.setBonusState(!1);var o=d.TableHelper.GetFieldByIndex(h.eTable.eTabSuperRotary,e);if(o){var i=[];i.push(new p.Prop(o.type,o.number)),c.UICenter.openGainItemWindow(i,this.onGainItem.bind(this,i),!1,u.ItemFromType.FromBonus),setTimeout(function(){t.setBtnsState(!0)},300)}else this.setBtnsState(!0)},t.prototype.onRunClick=function(){var e=this,t=d.TableHelper.GetField(h.eTable.eTabShop,v.default.SuperBonusId);t&&a.Game.sdkPipeline.purchaseByShopId(t.id,this.purchaseScene,function(o){if(v.default.getInstance().shopDataChange(t,o,e.purchaseScene),!e.state){e.setBtnsState(!1);var i=e.getRandomIndex();e.run(i)}})},t.prototype.onGainItem=function(e){var t=this,o=a.Game.userData.lvRwd.This;this.setBtnsState(!1);for(var i=function(e){if(e.propType==u.PropType.PropGold){var i=e.propNum<10?1:Math.floor(e.propNum/10);g.default.animateGold(n.node,e.propNum,i,function(){t.setBonusState(!0),t.setBtnsState(!0),cc.log("\u8f49\u76e4\u589e\u52a0\u91d1\u5e63\uff01"),m.default.dotVirtualGain(o,e.propNum,2,a.Game.userData.goldData.gold,1)})}else{new y.PropEvent;var r=a.Game.userData.goldData;e.propType==u.PropType.PropUndo?(r.propUndo+=e.propNum,m.default.dotPropLog(u.PropType.PropUndo,e.propNum,r.propUndo,o,2)):e.propType==u.PropType.PropAuto?(r.propAuto+=e.propNum,m.default.dotPropLog(u.PropType.PropAuto,e.propNum,r.propAuto,o,2)):e.propType==u.PropType.PropRefresh&&(r.propRefresh+=e.propNum,m.default.dotPropLog(u.PropType.PropRefresh,e.propNum,r.propRefresh,o,2)),a.Game.userData.goldData=r,n.setBonusState(!0),n.setBtnsState(!0)}},n=this,r=0,s=e;r<s.length;r++)i(s[r])},t.prototype.getRandomIndex=function(){for(var e=0,t=d.TableHelper.GetCount(h.eTable.eTabSuperRotary),o=[],i=0;i<t;i++){var a=d.TableHelper.GetFieldByIndex(h.eTable.eTabSuperRotary,i);o.push(a.weight)}for(var n=0,r=0;r<o.length;r++)n+=o[r];for(var s=f.default.randomRange(1,n+1),l=0;l<o.length;l++)if((s-=o[l])<=0){e=l;break}return e},__decorate([T(cc.Node)],t.prototype,"bonusNode",void 0),__decorate([T(cc.Button)],t.prototype,"btnBack",void 0),__decorate([T(cc.Button)],t.prototype,"btnSpin",void 0),__decorate([T(cc.Label)],t.prototype,"labelPay",void 0),__decorate([b],t)}(i.default);o.default=C,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/util/MathUtil":"MathUtil","../../data/ShopHelper":"ShopHelper","../../game/BoxOpenSystem":"BoxOpenSystem","../../game/type/Enum":"Enum","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../sdk/LogEvent":"LogEvent","../../sdk/MibData":"MibData","../../sdk/SDKConst":"SDKConst","../UICenter":"UICenter","./StrengthWindow":"StrengthWindow"}],SuspendWindow:[function(e,t,o){"use strict";cc._RF.push(t,"288c4UuphxOsJXa/QXAD6Rp","SuspendWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/I18N"),a=e("../../core/rili/DaliyHelper"),n=e("../../core/Table/Table"),r=e("../../core/Table/TableHelper"),s=e("../../core/UI/WWindow"),l=e("../../core/util/StrUtil"),c=e("../../Game"),p=e("../../game/manager/TileManager"),u=e("../../global/GameConfig"),d=e("../UICenter"),h=cc._decorator,f=h.ccclass,g=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTitle=null,t.labelLevel=null,t.labelContinue=null,t.labelReplay=null,t.labelHome=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage()},t.prototype.show=function(){if(e.prototype.show.call(this),u.default.isChallenge)this.labelLevel.string=a.default.getChangeDate();else{var t=c.Game.gameMgr.arcadelevel,o=r.TableHelper.GetField(n.eTable.eTabMap,t);if(o){var s=" "+o.chapter+" - "+o.Checkpoint;this.labelLevel.string=l.default.stringFormat(i.default.get("L10025"),s)}}},t.prototype.initLanguage=function(){this.labelTitle.string=i.default.get("L40031"),this.labelContinue.string=i.default.get("L40032"),this.labelReplay.string=i.default.get("L40033"),this.labelHome.string=i.default.get("L40034")},t.prototype.onRestartClick=function(){c.Game.gameMgr.restoreGrid(),this.hide();var e=c.Game.gameMgr.arcadelevel,t=u.default.isChallenge,o="";t&&(o=a.default.getChangeDate()),d.UICenter.openEnterGameWindow(e,function(e){e||(u.default.isChallenge?c.Game.gameMgr.backToMainOpenRili(!0,0):c.Game.gameMgr.backToMain(!0,0),p.default.getInstance().eliminateData())},t,o)},t.prototype.onQuitClick=function(){this.hide(),c.Game.gameMgr.restoreGrid(),u.default.isChallenge?c.Game.gameMgr.backToMainOpenRili(!0,0):c.Game.gameMgr.onBackClick()},t.prototype.toBack=function(){e.prototype.toBack.call(this)},__decorate([g(cc.Label)],t.prototype,"labelTitle",void 0),__decorate([g(cc.Label)],t.prototype,"labelLevel",void 0),__decorate([g(cc.Label)],t.prototype,"labelContinue",void 0),__decorate([g(cc.Label)],t.prototype,"labelReplay",void 0),__decorate([g(cc.Label)],t.prototype,"labelHome",void 0),__decorate([f],t)}(s.default);o.default=y,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../core/rili/DaliyHelper":"DaliyHelper","../../core/util/StrUtil":"StrUtil","../../game/manager/TileManager":"TileManager","../../global/GameConfig":"GameConfig","../UICenter":"UICenter"}],SwitchButton:[function(e,t,o){"use strict";cc._RF.push(t,"29b4b8C5sBEaJ9z3S3gCW7z","SwitchButton"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=i.property,r=e("../global/Emitter"),s=e("../../global/Const"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.markframes=[],t.bgOn=null,t.bgOff=null,t.iconOn=null,t.iconOff=null,t.markSp=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.target&&(this.target.anchorX=0,this.target.width=this.node.width),this.checkMark.node.anchorX=0,r.Emitter.register(s.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){},t.prototype.start=function(){this._updateCheckMark()},t.prototype._updateCheckMark=function(){this.checkMark&&(this.isChecked?this.checkMark.node.x=0:this.checkMark.node.x=this.target.width-this.checkMark.node.width,this.showBtnBg(),this.showIcon(),this.updateMarkSp())},t.prototype.updateMarkSp=function(){this.isChecked?this.markSp.spriteFrame=this.markframes[0]:this.markSp.spriteFrame=this.markframes[1]},t.prototype.showBtnBg=function(){this.bgOn.active=this.isChecked,this.bgOff.active=!this.isChecked},t.prototype.showIcon=function(){this.iconOn.active=this.isChecked,this.iconOff.active=!this.isChecked},__decorate([n(cc.SpriteFrame)],t.prototype,"markframes",void 0),__decorate([n(cc.Node)],t.prototype,"bgOn",void 0),__decorate([n(cc.Node)],t.prototype,"bgOff",void 0),__decorate([n(cc.Node)],t.prototype,"iconOn",void 0),__decorate([n(cc.Node)],t.prototype,"iconOff",void 0),__decorate([n(cc.Sprite)],t.prototype,"markSp",void 0),__decorate([a],t)}(cc.Toggle);o.default=l,cc._RF.pop()},{"../../global/Const":"Const","../global/Emitter":"Emitter"}],TabManager:[function(e,t,o){"use strict";cc._RF.push(t,"0b665PWy7tCP6yNacxx8Wdk","TabManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.TabManager=void 0;var i=e("./Table"),a=e("./TableBase"),n=e("./TableHelper"),r=function(){function e(){}return e.asyncLoad=function(){var e=this;return new Promise(function(t){e.loadTable(t)})},e.loadTable=function(e){this.mLoadEndCall=e,console.log(">>> start load table..."),this.mLoadOkCount=0,this.loadTableByClass(i.eTable.eTabMap,"table/Map",new a.Table(i.FieldMap)),this.loadTableByClass(i.eTable.eTabLevelInfo,"table/LevelInfo",new a.Table(i.FieldLevelInfo)),this.loadTableByClass(i.eTable.eTabBox,"table/Box",new a.Table(i.FieldBox)),this.loadTableByClass(i.eTable.eTabDifficulty,"table/Difficulty",new a.Table(i.FieldDifficulty)),this.loadTableByClass(i.eTable.eTabLoginReward,"table/LoginReward",new a.Table(i.FieldLoginReward)),this.loadTableByClass(i.eTable.eTabRotaryTable,"table/RotaryTable",new a.Table(i.FieldRotaryTable)),this.loadTableByClass(i.eTable.eTabShop,"table/Shop",new a.Table(i.FieldShop)),this.loadTableByClass(i.eTable.eTabRaceMap,"table/Racemap",new a.Table(i.RaceMapInfo)),this.loadTableByClass(i.eTable.eTabSuperRotary,"table/SuperRotary",new a.Table(i.FieldSuperRotary)),this.loadTableByClass(i.eTable.eTabProgressReward,"table/ProgressReward",new a.Table(i.FieldProgressReward))},e.loadTableByClass=function(e,t,o){var i=this;n.TableHelper.loadTable(e,t,o,function(){i.checkTabLoad()}),++this.mLoadCount},e.checkTabLoad=function(){++this.mLoadOkCount,this.mLoadCount<=this.mLoadOkCount&&(console.log(">>> load table ok, count="+this.mLoadCount),null!=this.mLoadEndCall&&this.mLoadEndCall())},e.mLoadCount=0,e.mLoadOkCount=0,e.mLoadEndCall=null,e}();o.TabManager=r,cc._RF.pop()},{"./Table":"Table","./TableBase":"TableBase","./TableHelper":"TableHelper"}],TableBase:[function(e,t,o){"use strict";cc._RF.push(t,"bce3bDMtshEMZzy25RiFpK6","TableBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.Table=o.FieldBase=void 0;o.FieldBase=function(){};var i=function(){function e(e){this.makeType=e,this.mFilename="",this.mFields={},this.mIndexList={},this.mCount=0}return e.prototype.New=function(){return new this.makeType},e.prototype.AddElement=function(e){null!=this.mFields[e.GetKey()]&&console.error("\u8bfb\u53d6\u8868\u683c\u53ef\u80fd\u9519\u8bef\uff0c\u76f8\u540c\u7684ID="+e.GetKey()+" path="+this.mFilename),this.mIndexList[this.mCount]=e,this.mFields[e.GetKey()]=e,++this.mCount},e.prototype.Clear=function(){this.mFields={},this.mCount=0,this.mFilename=""},e.prototype.GetCount=function(){return this.mCount},e.prototype.GetField=function(e){return null==this.mFields[e]?(console.error("Get Table Field Error, TableName="+this.mFilename+" Id="+e),null):this.mFields[e]},e.prototype.GetFieldByIndex=function(e){return null==this.mIndexList[e]?(console.error("Get Table Field Error, TableName="+this.mFilename+" index="+e),null):this.mIndexList[e]},e.prototype.loadFile=function(e,t,o){var i=this;this.Clear(),this.mFilename=t,cc.resources.load(t,function(t,a){i.onResLoad(e,t,a,o)})},e.prototype.onResLoad=function(e,t,o,i){return t?(console.error(t),!1):(this.ParseTxt(o.text),null!=i&&i(e),!0)},e.prototype.ParseLine=function(e,t){var o=this.New();return!!o.Parse(e,t)&&(this.AddElement(o),!0)},e.prototype.ParseTxt=function(e){for(var t=e.split(/[\n]/g),o=1,i=0;i<t.length;i++){var a=t[i];if(!(i<3)){var n=a.trim();0!=n.length&&"#"!=n[0]&&(this.ParseLine(n.split(/[\t]/),o++)||console.error("Table.ParseTxt Error, line="+i))}}},e}();o.Table=i,cc._RF.pop()},{}],TableHelper:[function(e,t,o){"use strict";cc._RF.push(t,"b22decM8mZOqbGAAVokA5gD","TableHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.TableHelper=void 0;var i=function(){function e(){}return e.loadTable=function(e,t,o,i){var a=this;o.loadFile(e,t,function(){a.mTableMap[e]=o,console.log("read table Ok :"+e+"=>"+t),null!=i&&i(e,t)})},e.GetField=function(e,t){var o=this.mTableMap[e].GetField(t);return null==o&&console.error("<<< read field error, tabid="+e.toString()+" id="+t),o},e.GetFieldByKey=function(e,t,o){var i=this.mTableMap[e].GetFieldByKey(t,o);return null==i&&console.error("<<< read field error, tabid="+e.toString()+" id="+t+" group="+o),i},e.GetCount=function(e){return this.mTableMap[e].GetCount(e)},e.GetFieldByIndex=function(e,t){var o=this.mTableMap[e].GetFieldByIndex(t);return null==o&&console.error("<<< read field error, tabid="+e.toString()+" index="+t),o},e.FindAll=function(e,t){if(e<0||!t)return[];for(var o=this.GetCount(e),i=[],a=0;a<o;++a){var n=this.GetFieldByIndex(e,a);t(n)&&i.push(n)}return i},e.Find=function(e,t){if(e<0||!t)return null;for(var o=this.GetCount(e),i=0;i<o;++i){var a=this.GetFieldByIndex(e,i);if(t(a))return a}return null},e.FindLast=function(e,t){if(e<0||!t)return null;for(var o=this.GetCount(e)-1;o>=0;--o){var i=this.GetFieldByIndex(e,o);if(t(i))return i}return null},e.FindIndex=function(e,t){if(e<0||!t)return-1;for(var o=this.GetCount(e),i=0;i<o;++i)if(t(this.GetFieldByIndex(e,i)))return i;return-1},e.mTableMap={},e}();o.TableHelper=i,cc._RF.pop()},{}],Table:[function(e,t,o){"use strict";cc._RF.push(t,"3765eq5hotNnqjzCZB3/YyP","Table"),Object.defineProperty(o,"__esModule",{value:!0}),o.FieldProgressReward=o.FieldSuperRotary=o.RaceMapInfo=o.FieldShop=o.FieldRotaryTable=o.FieldLoginReward=o.FieldDifficulty=o.FieldBox=o.FieldLevelInfo=o.FieldMap=o.eTable=void 0;var i=e("../../core/Table/TableBase");(function(e){e[e.eTabMap=0]="eTabMap",e[e.eTabLevelInfo=1]="eTabLevelInfo",e[e.eTabBox=2]="eTabBox",e[e.eTabDifficulty=3]="eTabDifficulty",e[e.eTabLoginReward=4]="eTabLoginReward",e[e.eTabRotaryTable=5]="eTabRotaryTable",e[e.eTabShop=6]="eTabShop",e[e.eTabRaceMap=7]="eTabRaceMap",e[e.eTabSuperRotary=8]="eTabSuperRotary",e[e.eTabProgressReward=9]="eTabProgressReward"})(o.eTable||(o.eTable={}));var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.chapter=parseInt(e[t++]),this.Checkpoint=parseInt(e[t++]),this.infoId=parseInt(e[t++]),this.mapLv=parseInt(e[t++]),this.brickNum=parseInt(e[t++]),this.typeNumMin=parseInt(e[t++]),this.typeNumMax=parseInt(e[t++]),this.typeMaxNum=parseInt(e[t++]),!0},t}(i.FieldBase);o.FieldMap=a;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;this.id=parseInt(e[t++]),this.width=parseInt(e[t++]),this.height=parseInt(e[t++]),this.floorInfo=e[t++];var o=new RegExp("1","g"),i=this.floorInfo.match(o);return this.brickNum=i?i.length:0,!0},t}(i.FieldBase);o.FieldLevelInfo=n;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.type=parseInt(e[t++]),this.num=parseInt(e[t++]),this.weight=parseInt(e[t++]),this.desc=e[t++],!0},t}(i.FieldBase);o.FieldBox=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.defeatedNum=parseInt(e[t++]),this.typeReduce=parseInt(e[t++]),!0},t}(i.FieldBase);o.FieldDifficulty=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.day=parseInt(e[t++]),this.gold=parseInt(e[t++]),this.type=parseInt(e[t++]),this.num=parseInt(e[t++]),!0},t}(i.FieldBase);o.FieldLoginReward=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.type=parseInt(e[t++]),this.number=parseInt(e[t++]),this.weight=parseInt(e[t++]),this.desc=e[t++],!0},t}(i.FieldBase);o.FieldRotaryTable=c;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.type=parseInt(e[t++]),this.payid=parseFloat(e[t++]),this.repeatable=parseInt(e[t++]),this.show=parseInt(e[t++]),this.type1=parseInt(e[t++]),this.num1=parseInt(e[t++]),this.type2=parseInt(e[t++]),this.num2=parseInt(e[t++]),this.type3=parseInt(e[t++]),this.num3=parseInt(e[t++]),this.type4=parseInt(e[t++]),this.num4=parseInt(e[t++]),this.type5=parseInt(e[t++]),this.num5=parseInt(e[t++]),this.item=e[t++],this.androidPayId=e[t++],this.iosPayId=e[t++],!0},t}(i.FieldBase);o.FieldShop=p;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.mapid=parseInt(e[t++]),!0},t}(i.FieldBase);o.RaceMapInfo=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.type=parseInt(e[t++]),this.number=parseInt(e[t++]),this.weight=parseInt(e[t++]),this.desc=e[t++],!0},t}(i.FieldBase);o.FieldSuperRotary=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.progress=parseInt(e[t++]),this.type=parseInt(e[t++]),this.num=parseInt(e[t++]),!0},t}(i.FieldBase);o.FieldProgressReward=h,cc._RF.pop()},{"../../core/Table/TableBase":"TableBase"}],TestTypeMap:[function(e,t,o){"use strict";cc._RF.push(t,"ce2d6+tfYhP9pZgM5NmnMF8","TestTypeMap"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.normal="123456787878123456123456",e.cross="123456123456123456",e}();o.default=i,cc._RF.pop()},{}],Textfield:[function(e,t,o){"use strict";cc._RF.push(t,"b1e0dUNfUpPUKx87EA6jB3k","Textfield"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=i.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bold=!1,t._italic=!1,t._underline=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"refresh",{get:function(){return this.rander(),!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bold",{get:function(){return this._bold},set:function(e){this._bold=e,this.label._isBold=e,this.rander()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"italic",{get:function(){return this._italic},set:function(e){this._italic=e,this.label._isItalic=e,this.rander()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underline",{get:function(){return this._underline},set:function(e){this._underline=e,this.label._isUnderline=e,this.rander()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label||(this._label=this.node.getComponent(cc.Label)),this._label},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.rander()},t.prototype.rander=function(){this.label._isBold=this._bold,this.label._isItalic=this._italic,this.label._isUnderline=this._underline,this.label._updateRenderData(!0)},t.prototype.start=function(){},__decorate([n({visible:!1})],t.prototype,"refresh",null),__decorate([n({visible:!1})],t.prototype,"_bold",void 0),__decorate([n({tooltip:"\u52a0\u7c97"})],t.prototype,"bold",null),__decorate([n({visible:!1})],t.prototype,"_italic",void 0),__decorate([n({tooltip:"\u659c\u4f53"})],t.prototype,"italic",null),__decorate([n({visible:!1})],t.prototype,"_underline",void 0),__decorate([n({tooltip:"\u4e0b\u5212\u7ebf"})],t.prototype,"underline",null),__decorate([a],t)}(cc.Component);o.default=r,cc._RF.pop()},{}],TileDateTools:[function(e,t,o){"use strict";cc._RF.push(t,"946cftZNxBD2orpwdutuolv","TileDateTools"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../global/GameConfig"),a=function(){function e(){}return e.RemoveZeroRows=function(e){for(var t=i.default.layersTotalNo,o=0,a=i.default.row,n=i.default.col,r=0;r<a;r++){o=0;for(var s=0;s<t;s++){var l=new RegExp("0","g");(c=(p=e[s][r].match(l))?p.length:0)==n&&(o+=1)}if(o!=t)break;r-=1;for(var c=0;c<t;c++)e[c]=e[c].slice(1);a-=1}for(r=a-1;r>=0;r--){for(o=0,s=0;s<t;s++){var p;l=new RegExp("0","g"),(c=(p=e[s][r].match(l))?p.length:0)==n&&(o+=1)}if(o!=t)break;for(c=0;c<t;c++)e[c]=e[c].slice(0,a-1);a-=1}return i.default.row=a,e},e.RemvoZeroCol=function(e){for(var t=i.default.layersTotalNo,o=i.default.row,a=i.default.col,n=0,r=0,s=0;s<a;s++){n=0;for(var l=0;l<t;l++){r=0;for(var c=0;c<o;c++)r+=Number(e[l][c][s]);console.log(l+""+s+" "+r),0==r&&(n+=1)}if(n!=t)break;s-=1;for(var p=0;p<t;p++)for(var u=0;u<o;u++)e[p][u]=e[p][u].slice(1);a-=1}for(s=a-1;s>=0;s--){for(n=0,l=0;l<t;l++){for(r=0,c=0;c<o;c++)r+=Number(e[l][c][s]);0==r&&(n+=1)}if(n!=t)break;for(p=0;p<t;p++)for(u=0;u<o;u++)e[p][u]=e[p][u].slice(0,a-1);a-=1}return i.default.col=a,cc.log("\u66ff\u6362\u540e \u5217\uff1a "+i.default.col+"\u884c\uff1a "+i.default.row),console.log(e),e},e}();o.default=a,cc._RF.pop()},{"../../global/GameConfig":"GameConfig"}],TileFailWindow:[function(e,t,o){"use strict";cc._RF.push(t,"aad2dw6MCZJ7L14WoRKWDO6","TileFailWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/global/I18N"),n=e("../../core/Table/Table"),r=e("../../core/Table/TableHelper"),s=e("../../core/UI/Toast"),l=e("../../core/UI/WWindow"),c=e("../../Game"),p=e("../../game/manager/TileManager"),u=e("../../global/AudioMgr"),d=e("../../global/GameConfig"),h=e("../../sdk/LogEvent"),f=e("../../sdk/SDKConst"),g=e("../UICenter"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.replayLabel=null,t.labelDesc=null,t.labelReviveCost=null,t.btnReviveCoin=null,t.btnReviveAd=null,t.labelLevel=null,t.labelReveviAd=null,t}return __extends(t,e),t.prototype.onLoad=function(){i.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(){e.prototype.show.call(this),this.initLanguage(),this.ShowReviveBtn(),this.ShowChapterInfo(),this.labelReviveCost.string=""+d.default.ReviveCost,u.AudioMgr.playEffect("result_fail");var t=d.default.SDK.rewardAvailability();this.refreshAdBtn(t),h.default.dotAdPv(f.default.AD_PAY_POS_RESURRECTION)},t.prototype.onShow=function(){e.prototype.onShow.call(this),g.UICenter.openStrengthWindow()},t.prototype.initLanguage=function(){this.replayLabel.string=a.default.get("L40033"),this.labelReveviAd.string=a.default.get("L40141"),this.labelDesc.string=a.default.get("L40142")},t.prototype.onCloseClick=function(){c.Game.gameMgr.restoreGrid(),this.hide(),c.Game.gameMgr.backToMain(!0,0)},t.prototype.onRestartClick=function(){cc.log("onRestartClick"),c.Game.gameMgr.restoreGrid(),this.hide();var e=c.Game.gameMgr.arcadelevel;g.UICenter.openEnterGameWindow(e,function(e){e||c.Game.gameMgr.backToMain(!0,0)},!1)},t.prototype.hide=function(){e.prototype.hide.call(this),g.UICenter.closeStrengthWindow()},t.prototype.onRevive=function(){for(var e=0;e<3;e++)p.default.getInstance().undoOperation();setTimeout(function(){p.default.getInstance().refreshTile()},300)},t.prototype.onReviveCoinClick=function(){var e=c.Game.userData.goldData;if(e.gold<d.default.ReviveCost)return s.default.showWith(a.default.get("L858")),void g.UICenter.openShopWindow();e.gold-=d.default.ReviveCost,c.Game.userData.goldData=e;var t=c.Game.userData.dotData.currentLevel;h.default.dotVirtualGainUse(1,d.default.ReviveCost,1,t,d.default.ReviveCost,0,2,e.gold,1),this.hide(),this.onRevive()},t.prototype.onReviveAdClick=function(){var e=this;c.Game.sdkPipeline.showReward(function(t){t&&(e.hide(),e.onRevive())},this,f.default.AD_PAY_POS_RESURRECTION)},t.prototype.ShowReviveBtn=function(){this.btnReviveCoin.active=!1,this.btnReviveAd.active=!0},t.prototype.ShowChapterInfo=function(){var e=c.Game.gameMgr.arcadelevel,t=r.TableHelper.GetFieldByIndex(n.eTable.eTabMap,e-1);t&&(this.labelLevel.string=t.chapter+" - "+t.Checkpoint)},t.prototype.refreshAdBtn=function(e){if(this.btnReviveAd.active){var t=this.btnReviveAd.getComponent(cc.Button);t&&(t.interactable=e)}},__decorate([v(cc.Label)],t.prototype,"replayLabel",void 0),__decorate([v(cc.Label)],t.prototype,"labelDesc",void 0),__decorate([v(cc.Label)],t.prototype,"labelReviveCost",void 0),__decorate([v(cc.Node)],t.prototype,"btnReviveCoin",void 0),__decorate([v(cc.Node)],t.prototype,"btnReviveAd",void 0),__decorate([v(cc.Label)],t.prototype,"labelLevel",void 0),__decorate([v(cc.Label)],t.prototype,"labelReveviAd",void 0),__decorate([m],t)}(l.default);o.default=_,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/Toast":"Toast","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../game/manager/TileManager":"TileManager","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst","../UICenter":"UICenter"}],TileManager:[function(e,t,o){"use strict";cc._RF.push(t,"ddb52J+Zr5AvYuxO+DzPQb2","TileManager"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./../type/DataStructure"),a=e("../component/Tile"),n=e("../type/Enum"),r=e("../../global/GameConfig"),s=e("../util/GameUtil"),l=e("./TilePool"),c=e("./MapManager"),p=e("../../core/Table/TableHelper"),u=e("../../core/Table/Table"),d=e("./BottomManager"),h=e("../../Game"),f=e("./TileDateTools"),g=e("../../global/AudioMgr"),y=e("../../view/UICenter"),m=e("../../core/global/Emitter"),v=e("../../sdk/LogEvent"),_=e("../../sdk/MibData"),b=cc._decorator,T=b.ccclass,C=b.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.bottomArea=null,t.addGridBtn=null,t.mapManager=null,t.bottomMapManager=null,t.gameUtil=null,t.typeMap=null,t.tileMap=null,t.layerTileMap=null,t.layerMap=null,t.downTileMap=null,t.removeno=0,t.StartNo=0,t.StartTime=0,t.actualTime=0,t.removeBlockNo=0,t._leaveno=0,t._cntStep=0,t._isStartGame=!1,t.maxx=0,t.minx=0,t.maxy=0,t.miny=0,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.containerx=this.container.x,this.containery=this.container.y,o.instance=this,this.mapManager=c.default.getInstance(),this.bottomMapManager=d.default.getInstance(),this.gameUtil=s.default.getInstance(),m.Emitter.register(n.TileEvent.TouchEnd,this.onTileTouchEnd,this),m.Emitter.register(n.TileEvent.TouchStart,this.onTileTouchStart,this),m.Emitter.register(n.TileEvent.TouchCancel,this.onTouchCancel,this),v.default.log(v.default.ACTION_GAME_START)},t.prototype.onDestroy=function(){m.Emitter.remove(n.TileEvent.TouchEnd,this.onTileTouchEnd,this),m.Emitter.remove(n.TileEvent.TouchEnd,this.onTileTouchStart,this),m.Emitter.remove(n.TileEvent.TouchCancel,this.onTouchCancel,this)},t.getInstance=function(){return o.instance},t.prototype.updateGridCount=function(){this.addGridBtn.active=r.default.defaultBottomNo===r.default.bottomNo},t.prototype.onAddGridClick=function(){var e=this;cc.log("\u82b1\u91d1\u5e01\u8d2d\u4e70"),y.UICenter.openAddGridWindow(function(t){cc.log("ssss"),t&&(r.default.bottomNo=r.default.defaultBottomNo+1,e.updateGridCount())})},t.prototype.oddNumberGenerateMask=function(e,t){if(t%2==0){var o=this.getOwnTileCoord(e.x,e.y,e.z);return null!=o&&0==o.isDestroy}var i=this.getOwnTileCoord(e.x,e.y,e.z);return null!=i&&0==i.isDestroy||e.y-1>=0&&null!=(i=this.getOwnTileCoord(e.x,e.y-1,e.z))&&0==i.isDestroy||e.x-1>=0&&e.y-1>=0&&null!=(i=this.getOwnTileCoord(e.x-1,e.y-1,e.z))&&0==i.isDestroy||e.x-1>=0&&null!=(i=this.getOwnTileCoord(e.x-1,e.y,e.z))&&0==i.isDestroy},t.prototype.evenNumberGenerateMask=function(e,t){if(t%2!=0){var o=this.getOwnTileCoord(e.x,e.y,e.z);return null!=o&&0==o.isDestroy}var i=this.getOwnTileCoord(e.x,e.y,e.z);return null!=i&&0==i.isDestroy||e.y+1<r.default.row&&null!=(i=this.getOwnTileCoord(e.x,e.y+1,e.z))&&0==i.isDestroy||e.x+1<r.default.col&&e.y+1<r.default.row&&null!=(i=this.getOwnTileCoord(e.x+1,e.y+1,e.z))&&0==i.isDestroy||e.x+1<r.default.col&&null!=(i=this.getOwnTileCoord(e.x+1,e.y,e.z))&&0==i.isDestroy},t.prototype.ExistMask=function(e){var t=e.z;if(t%2==0)for(t+=1;t<r.default.layersTotalNo;t++){var o=new i.Coordinate(e.x,e.y,t);if(1==this.oddNumberGenerateMask(o,t))return!0}else for(t+=1;t<r.default.layersTotalNo;t++)if(o=new i.Coordinate(e.x,e.y,t),1==this.evenNumberGenerateMask(o,t))return!0;return!1},t.prototype.removeMask=function(e,t){for(var o=t;o>=0;o--){var a=new i.Coordinate(e.x,e.y,o),n=this.ExistMask(a),r=this.getOwnTileCoord(a.x,a.y,a.z);0==n&&null!=r&&0==r.isDestroy&&(r.activeMask=!1)}return!0},t.prototype.delBottomTile=function(){var e=this,t=this.bottomMapManager.getDelRecord(),o=this.bottomMapManager.getDelRecord().length;if(o>2){for(var i=0;i<t.length;i++){var n="t"+(s=t[i])[1].x+"|"+s[1].y+"|"+s[1].z;if(null==(l=this.bottomArea.getChildByName(n)))break;if(1==l.getComponent(a.default).arriveBottom&&i==o-1)break;if(0==l.getComponent(a.default).arriveBottom)return!1}for(i=0;i<t.length;i++){var s,l;if(n="t"+(s=t[i])[1].x+"|"+s[1].y+"|"+s[1].z,null==(l=this.bottomArea.getChildByName(n))||l.getComponent(a.default).delayeDisappear(),i==o-1)break}if(this.bottomMapManager.setDelRecord(),this.bottomMapManager.againGenerateRecord(),this.displayBottomTile(),o>3?(g.AudioMgr.playEffect("tile_destory"),this.refreshStars(!1),this.refreshStars(!1),this.removeBlockNo+=2,this.removeBlockNo>=r.default.blockCoinNo&&(this.removeBlockNo-=3,h.Game.gameMgr.addPigCoin())):(g.AudioMgr.playEffect("tile_destory"),this.refreshStars(!1),this.removeBlockNo+=1,this.removeBlockNo>=r.default.blockCoinNo&&(this.removeBlockNo-=3,h.Game.gameMgr.addPigCoin())),0==this.gameUtil.getremainingNo()){(u=h.Game.userData.failInfoData).failinfo[0]==this._leaveno&&(u.failinfo=[],h.Game.userData.failInfoData=u);var c=new _.LevelActivityEnd;c.missionId=this._leaveno.toString(),c.missionName=this._leaveno.toString(),c.missiongScore=this.StartNo.toString(),c.star=this.StartNo.toString(),c.time=this.actualTime.toString(),c.cntStep=this._cntStep.toString();var p=h.Game.userData.starData;this._leaveno>=p.levels.length&&((new _.NoviceGuide).eventTargetId="3",v.default.log(v.default.ACTION_TUTORIAL_END)),setTimeout(function(){h.Game.gameMgr.onGameSucc(e.StartNo);var t=h.Game.userData.starData;null!=t&&null!=t.alltotal?c.starTotal=t.alltotal.toString():c.starTotal="0",v.default.log(v.default.ACTION_LEVEL_REWARD,c),v.default.log(v.default.ACTION_LEVEL_END,c.missionId,1)},200)}}if(this.bottomMapManager.getIndex()>=r.default.bottomNo){var u;(u=h.Game.userData.failInfoData).failinfo[0]==this._leaveno?u.failinfo[1]=h.Game.userData.failInfoData.failinfo[1]+1:(u.failinfo[0]=this._leaveno,u.failinfo[1]=0),h.Game.userData.failInfoData=u;var d=new _.LevelActivityEnd;d.missionId=this._leaveno.toString(),d.missionName=this._leaveno.toString(),d.missiongScore=this.StartNo.toString(),d.missionFlag="fail",d.star=this.StartNo.toString(),d.time=this.actualTime.toString(),d.cntStep=this._cntStep.toString();var f=h.Game.userData.starData;return d.starTotal=f.alltotal.toString(),v.default.log(v.default.ACTION_LEVEL_END,d.missionId,0),p=h.Game.userData.starData,this._leaveno>=p.levels.length&&((new _.NoviceGuide).eventTargetId="3",v.default.log(v.default.ACTION_TUTORIAL_END)),setTimeout(function(){h.Game.gameMgr.onGameFail()},200),!1}},t.prototype.displayBottomTile=function(){for(var e=this.bottomMapManager.getPosRecord(),t=0;t<e.length;t++){var o=e[t],i=this.getOwnTileCoord(o[1].x,o[1].y,o[1].z),a="t"+o[1].x+"|"+o[1].y+"|"+o[1].z;if(0==i.isDestroy){var n=this.container.getChildByName(a),r=this.bottomArea.convertToNodeSpaceAR(i.worldPos),s=this.bottomMapManager.getnewPos(t);n.parent=this.bottomArea,n.zIndex=t,n.setPosition(r),i.disappear(),i.activeMask=!1,i.bmove(s)}else null!=(n=this.bottomArea.getChildByName(a))&&(r=this.bottomArea.convertToNodeSpaceAR(i.worldPos),s=this.bottomMapManager.getnewPos(t),n.zIndex=t,n.setPosition(r),i.activeMask=!1,i.move(s))}},t.prototype.onTileTouchStart=function(e){var t=this.getOwnTileCoord(e.x,e.y,e.z);t.SibIndex=t.node.getSiblingIndex(),t.node.setSiblingIndex(100),t.Startappear()},t.prototype.onTouchCancel=function(e){var t=this.getOwnTileCoord(e.x,e.y,e.z);t.node.setSiblingIndex(t.sibIndex),t.CancelAppear()},t.prototype.onTileTouchEnd=function(e,t){if(this.bottomMapManager.getIndex()==r.default.bottomNo)return this.onTouchCancel(e,t),!1;var o=new i.Coordinate(e.x,e.y,e.z),a=this.bottomMapManager.getPos();if(null==a)return this.onTouchCancel(e,t),!1;g.AudioMgr.playEffect("tile_click"),this._cntStep++;var n=new i.Coordinate(a.x,a.y,this.getType(e));if(this.bottomMapManager.generateRecord(o,n),this.displayBottomTile(),0==e.z)return!0;if(e.z%2!=0){var s=new i.Coordinate(e.x,e.y);if(this.removeMask(s,e.z-1),e.x+1<r.default.col){var l=new i.Coordinate(e.x+1,e.y);this.removeMask(l,e.z-1)}if(e.y+1<=r.default.row){var c=new i.Coordinate(e.x,e.y+1);this.removeMask(c,e.z-1)}if(e.x+1<r.default.col&&e.y+1<r.default.row){var p=new i.Coordinate(e.x+1,e.y+1);this.removeMask(p,e.z-1)}return!0}if(e.z%2==0){if(s=new i.Coordinate(e.x,e.y),this.removeMask(s,e.z-1),e.x-1>=0){var u=new i.Coordinate(e.x-1,e.y);this.removeMask(u,e.z-1)}if(e.y-1>=0){var d=new i.Coordinate(e.x,e.y-1);this.removeMask(d,e.z-1)}if(e.x-1>=0&&e.y-1>=0){var h=new i.Coordinate(e.x-1,e.y-1);this.removeMask(h,e.z-1)}return!0}return!0},t.prototype.onMaskTouchStart=function(){},t.prototype.getType=function(e,t,o){return"number"==typeof e?this.typeMap[o][e][t]:this.typeMap[e.z][e.x][e.y]},t.prototype.getOwnTileCoord=function(e,t,o){return"number"==typeof e?this.layerTileMap[o][e][t]:this.layerTileMap[e.z][e.x][e.y]},t.prototype.initanimation=function(e){var t=this;if(this.container.children.length>5){var o=100*(r.default.layersTotalNo+1)+150;this.clearBottomArea(),this.animationClean(),setTimeout(function(){t.initNewGame(e)},o)}else this.initNewGame(e)},t.prototype.eliminateData=function(){this._isStartGame=!1,this.clearContainer(),this.clearBottomArea()},t.prototype.initNewGame=function(e){this._leaveno=e,this.maxy=0,this.maxx=0,this.minx=0,this.miny=0,this.clearContainer(),this.clearBottomArea(),this.updateGridCount(),this.generateConfig(e),this.layerMap=f.default.RemoveZeroRows(this.layerMap),this.layerMap=f.default.RemvoZeroCol(this.layerMap),this.generateType(e),this.mapManager.init(),this.bottomMapManager.init(),this.generateInitTypeMap(),this.generateTiles(),this.generateMasks(),this.StartNo=r.default.MaxStarNumber,this.StartTime=0,h.Game.gameMgr.refreshStars(r.default.MaxStarNumber,0),this.devpos(),this.generateContainer(),this.displayTiles(),cc.log("\u6b77\u53f2\u95dc\u5361\uff1a"+h.Game.userData.lvRwd.This+" | "+this._leaveno)},t.prototype.init=function(e){this._isStartGame=!0,this._leaveno==e?this.initanimation(e):this.initNewGame(e),this._cntStep=0,this.actualTime=0},t.prototype.onUpdate=function(e){this._isStartGame&&(this.StartTime=this.StartTime+e,this.actualTime=this.actualTime+e,this.StartTime>r.default.MaxStarTime?this.StartNo=0:r.default.MinStarTime>=this.StartTime?this.StartNo=3:r.default.MaxStarTime>=this.StartTime&&this.StartTime>r.default.BetweenStarTime?this.StartNo=1:r.default.BetweenStarTime>=this.StartTime&&this.StartTime>r.default.MinStarTime&&(this.StartNo=2),this.StartTime>=r.default.LastTime&&(this.StartTime=r.default.LastTime),h.Game.gameMgr.refreshStars(this.StartNo,this.StartTime))},t.prototype.refreshStars=function(e){0==e&&(this.StartTime=this.StartTime-5,this.StartTime<0&&(this.StartTime=0))},t.prototype.generateContainer=function(){var e=this.container.getContentSize(),t=e.height,o=e.width,i=r.default.col*r.default.size,a=r.default.row*r.default.size,n=Number((o/i).toFixed(2)),s=Number((t/a).toFixed(2)),l=-(this.maxx+this.minx)/2+this.containerx,c=-(this.maxy+this.miny)/2+this.containery;this.container.setPosition(l,c),n>=1&&s>=1?this.container.setScale(1,1):n>s?this.container.setScale(s,s):this.container.setScale(n,n)},t.prototype.animationClean=function(){for(var e=0;e<r.default.layersTotalNo;e++)for(var t=0;t<this.layerTileMap[e].length;t++)for(var o=this.layerTileMap[e][t],i=function(t){var i=o[t];if(null!=i&&0==i.isDestroy){var a=i.postion;e%4==0?a=a.sub(cc.v2(0,-2*r.default.chalfHeight)):e%4==1?a=a.sub(cc.v2(0,2*r.default.chalfHeight)):e%4==2?a=a.sub(cc.v2(2*r.default.chalfWidth,0)):e%4==3&&(a=a.sub(cc.v2(-2*r.default.chalfWidth,0))),i.recycle(!1),setTimeout(function(){i.replayappear(a)},100*(r.default.layersTotalNo-e))}},a=0;a<o.length;a++)i(a)},t.prototype.clearContainer=function(){for(this.container.setPosition(this.containerx,this.containery);this.container.children.length>0;)this.container.children[this.container.children.length-1].getComponent(a.default).recycle()},t.prototype.clearBottomArea=function(){for(;this.bottomArea.children.length>1;)"selectedBg"!=this.bottomArea.children[this.bottomArea.children.length-1].name&&this.bottomArea.children[this.bottomArea.children.length-1].getComponent(a.default).recycle()},t.prototype.generateInitTypeMap=function(){this.typeMap=this.gameUtil.getInitTypeMap()},t.prototype.generateType=function(e){this.gameUtil.genInitType(e)},t.prototype.generateConfig=function(e){var t=p.TableHelper.GetFieldByIndex(u.eTable.eTabMap,e),o=p.TableHelper.GetFieldByIndex(u.eTable.eTabLevelInfo,t.infoId-1);this.gameUtil.brickNum=o.brickNum,this.removeno=o.brickNum%3;var i=o.floorInfo.split("#");this.layerMap=[];for(var a=0;a<i.length;a++){for(var n=o.width,s=i[a].length,l=[],c=0;c<s;c+=n){var d=i[a].substr(c,n);if(c>0&&this.removeno>0){var h=d.indexOf("1");h>-1&&(d=d.replace("1","0"),this.removeno=this.removeno-1,(h=d.indexOf("1"))>-1&&this.removeno>0&&(d=d.replace("1","0"),this.removeno=this.removeno-1))}l.push(d)}this.layerMap.push(l)}r.default.col=o.width,r.default.row=o.height,r.default.layersTotalNo=this.layerMap.length},t.prototype.displayTiles=function(){for(var e=[],t=function(t){e.push(!0);for(var i=0;i<o.layerTileMap[t].length;i++)for(var a=o.layerTileMap[t][i],n=function(o){var i=a[o];if(null!=i){var n=i.node.getPosition();cc.log("aim1:"+n.toString()),t%4==0?i.node.setPosition(n.sub(cc.v2(0,-r.default.chalfHeight))):t%4==1?i.node.setPosition(n.sub(cc.v2(0,r.default.chalfHeight))):t%4==2?i.node.setPosition(n.sub(cc.v2(r.default.chalfWidth,0))):t%4==3&&i.node.setPosition(n.sub(cc.v2(-r.default.chalfWidth,0))),cc.log("aim2:"+n.toString()),setTimeout(function(){i.appear()},200*(t+1)),setTimeout(function(){i.move(n),1==e[t]&&(g.AudioMgr.playEffect("tile_obtain"),e[t]=!1,cc.log("ms:"+t))},200*(t+1))}},s=0;s<a.length;s++)n(s)},o=this,i=0;i<r.default.layersTotalNo;i++)t(i)},t.prototype.devpos=function(){for(var e=0;e<r.default.layersTotalNo;e++)for(var t=0;t<this.layerTileMap[e].length;t++)for(var o=this.layerTileMap[e][t],i=0;i<o.length;i++){var a=o[i];if(null!=a){var n=a.node.getPosition();this.maxx=Math.max(this.maxx,n.x),this.minx=Math.min(this.minx,n.x),this.maxy=Math.max(this.maxy,n.y),this.miny=Math.min(this.miny,n.y)}}},t.prototype.generateTiles=function(){this.layerTileMap=[],r.default.layersTotalNo=this.layerMap.length;for(var e=0;e<r.default.layersTotalNo;e++){this.tileMap=[];for(var t=0;t<r.default.col;t++){var o=[];if(e%2==0){for(var i=0;i<r.default.row;i++)if(null!=this.layerMap[e]&&null!=this.layerMap[e][i]&&null!=this.layerMap[e][i][t]){var a=this.layerMap[e][i][t];1==Number(a)?o.push(this.getNewTile(t,i,e,1)):o.push(this.getFillNewTile())}this.tileMap.push(o)}else{for(i=0;i<r.default.row;i++)null!=this.layerMap[e]&&null!=this.layerMap[e][i]&&null!=this.layerMap[e][i][t]&&(a=this.layerMap[e][i][t],1==Number(a)?o.push(this.getDisNewTile(t,i,e,1)):o.push(this.getFillNewTile()));this.tileMap.push(o)}}this.layerTileMap.push(this.tileMap)}},t.prototype.generateMasks=function(){for(var e=0;e<r.default.layersTotalNo;e++)for(var t=0;t<this.layerTileMap[e].length;t++)for(var o=this.layerTileMap[e][t],i=0;i<o.length;i++){var a=o[i];null!=a&&0==a.isDestroy&&1==this.ExistMask(a.coord)&&null!=a&&0==a.isDestroy&&(a.activeMask=!0)}},t.prototype.getNewTile=function(e,t,o){var i=l.default.get(),n=2*o,r="t"+e+"|"+t+"|"+o;i.setPosition(this.mapManager.getPos(e,t)),this.container.addChild(i,n,r);var s=i.getComponent(a.default);s.init(),s.setCoord(e,t,o),s.sPostion(i.getPosition());var c=this.gameUtil.getKnownType();return s.setType(c),this.typeMap[o][e][t]=c,s},t.prototype.getDisNewTile=function(e,t,o){var i=l.default.get(),n=2*o,r="t"+e+"|"+t+"|"+o;i.setPosition(this.mapManager.getDisPos(e,t)),this.container.addChild(i,n,r);var s=i.getComponent(a.default);s.init(),s.setCoord(e,t,o),s.sPostion(i.getPosition());var c=this.gameUtil.getKnownType();return s.setType(c),this.typeMap[o][e][t]=c,s},t.prototype.getFillNewTile=function(){return null},t.prototype.refreshDisplayTile=function(){for(var e=0;e<r.default.layersTotalNo;e++)for(var t=0;t<this.layerTileMap[e].length;t++)for(var o=this.layerTileMap[e][t],i=function(t){var i=o[t];if(null!=i&&0==i.isDestroy){var a=i.node.getPosition();e%4==0?setTimeout(function(){i.refreshdisappear(a.sub(cc.v2(0,-r.default.chalfHeight)))},100*(r.default.layersTotalNo-e)):e%4==1?setTimeout(function(){i.refreshdisappear(a.sub(cc.v2(0,r.default.chalfHeight)))},100*(r.default.layersTotalNo-e)):e%4==2?setTimeout(function(){i.refreshdisappear(a.sub(cc.v2(r.default.chalfWidth,0)))},100*(r.default.layersTotalNo-e)):e%4==3&&setTimeout(function(){i.refreshdisappear(a.sub(cc.v2(-r.default.chalfWidth,0)))},100*(r.default.layersTotalNo-e))}},a=0;a<o.length;a++)i(a)},t.prototype.refreshApperTile=function(){this.gameUtil.initRefreshRecord();var e=this.bottomMapManager.getMaxTypeNo();this.gameUtil.setRefreshNo(e);for(var t=[],o=function(e){t.push(!0);for(var o=0;o<i.layerTileMap[e].length;o++)for(var a=i.layerTileMap[e][o],n=function(n){var s=a[n];if(null!=s&&0==s.isDestroy){if(s.isMask()){var l=i.gameUtil.getRefreshType(0);i.typeMap[e][o][n]=l,s.setType(l)}else l=i.gameUtil.getRefreshType(1),i.typeMap[e][o][n]=l,s.setType(l);s.node.setPosition(s.coord.x,s.coord.y);var c=s.postion;e%4==0?s.node.setPosition(c.sub(cc.v2(0,-r.default.chalfHeight))):e%4==1?s.node.setPosition(c.sub(cc.v2(0,r.default.chalfHeight))):e%4==2?s.node.setPosition(c.sub(cc.v2(r.default.chalfWidth,0))):e%4==3&&s.node.setPosition(c.sub(cc.v2(-r.default.chalfWidth,0))),setTimeout(function(){s.appear()},200*(e+1)),setTimeout(function(){s.move(c),1==t[e]&&(g.AudioMgr.playEffect("tile_obtain"),t[e]=!1)},200*(e+1))}},s=0;s<a.length;s++)n(s)},i=this,a=0;a<r.default.layersTotalNo;a++)o(a)},t.prototype.refreshTile=function(){var e=this;g.AudioMgr.playEffect("item_refresh"),this.refreshDisplayTile(),setTimeout(function(){e.refreshApperTile()},100*r.default.layersTotalNo)},t.prototype.judgeRecoverMask=function(e,t){for(var o=t;o>=0;o--){var a=new i.Coordinate(e.x,e.y,o),n=this.ExistMask(a),r=this.getOwnTileCoord(a.x,a.y,a.z);1==n&&null!=r&&0==r.isDestroy&&(r.activeMask=!0)}return!0},t.prototype.recoverMask=function(e){if(0==e.z)return!0;if(e.z%2!=0){var t=new i.Coordinate(e.x,e.y);if(this.judgeRecoverMask(t,e.z-1),e.x+1<r.default.col){var o=new i.Coordinate(e.x+1,e.y);this.judgeRecoverMask(o,e.z-1)}if(e.y+1<=r.default.row){var a=new i.Coordinate(e.x,e.y+1);this.judgeRecoverMask(a,e.z-1)}if(e.x+1<r.default.col&&e.y+1<r.default.row){var n=new i.Coordinate(e.x+1,e.y+1);this.judgeRecoverMask(n,e.z-1)}return!0}if(e.z%2==0){if(t=new i.Coordinate(e.x,e.y),this.judgeRecoverMask(t,e.z-1),e.x-1>=0){var s=new i.Coordinate(e.x-1,e.y);this.judgeRecoverMask(s,e.z-1)}if(e.y-1>=0){var l=new i.Coordinate(e.x,e.y-1);this.judgeRecoverMask(l,e.z-1)}if(e.x-1>=0&&e.y-1>=0){var c=new i.Coordinate(e.x-1,e.y-1);this.judgeRecoverMask(c,e.z-1)}return!0}return!0},t.prototype.undoOperation=function(){var e=this,t=this.bottomMapManager.undoOperation();if(null!=t){var o,i="t"+t.x+"|"+t.y+"|"+t.z,a=this.bottomArea.getChildByName(i),n=this.container.convertToNodeSpaceAR(a.convertToWorldSpaceAR(cc.Vec2.ZERO));o=t.z%2==0?this.mapManager.getPos(t.x,t.y):this.mapManager.getDisPos(t.x,t.y);var r=this.getOwnTileCoord(t.x,t.y,t.z);1==r.isDestroy&&(1==this.ExistMask(r.coord)&&(r.activeMask=!0),a.parent=this.container,a.zIndex=2*t.z,r.recover(),a.setPosition(n),r.move(o)),this.recoverMask(t),this.displayBottomTile(),setTimeout(function(){e.againDisplay(t.z)},200),g.AudioMgr.playEffect("item_back")}},t.prototype.againDisplay=function(e){for(var t=e,o=1,i=0;i<this.layerTileMap[t].length;i++)for(var a=this.layerTileMap[t][i],n=0;n<a.length;n++){var r=a[n];null!=r&&0==r.isDestroy&&(r.node.setSiblingIndex(o),r.appearNoAnimation(),o++)}},t.prototype.whetherEnd=function(){return 0==this.gameUtil.getremainingNo()},t.prototype.autoEliminate=function(){if(this.bottomMapManager.getDelRecord().length==r.default.bottomNo-1)return!1;g.AudioMgr.playEffect("item_random");var e=this.bottomMapManager.getMaxTypeNo(),t=this.bottomMapManager.getIndex(),o=null;if(2==e[1]&&t==r.default.bottomNo-1)return!1;if(0==e[0])for(var a=this.gameUtil.reAutoRandEliminateTile(this.layerTileMap),n=0;n<3;n++)null!=(o=this.gameUtil.reAutoEliminateTile(this.layerTileMap,a))&&((l=new i.Coordinate).set(o.coord),this.onTileTouchEnd(l,null));else for(var s=0;s<e[1];s++){var l;null!=(o=this.gameUtil.reAutoEliminateTile(this.layerTileMap,e[0]))&&((l=new i.Coordinate).set(o.coord),this.onTileTouchEnd(l,null))}return!0},t.prototype.obtainBottomTileNo=function(){return this.bottomMapManager.posOriginalRecord.length},t.prototype.judgeAutoComplete=function(){var e=this.bottomMapManager.getMaxTypeNo(),t=this.bottomMapManager.getIndex();return 2!=e[1]||t!=r.default.bottomNo-1},t.instance=null,__decorate([C(cc.Node)],t.prototype,"container",void 0),__decorate([C(cc.Node)],t.prototype,"bottomArea",void 0),__decorate([C(cc.Node)],t.prototype,"addGridBtn",void 0),o=__decorate([T],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/global/Emitter":"Emitter","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/MibData":"MibData","../../view/UICenter":"UICenter","../component/Tile":"Tile","../type/Enum":"Enum","../util/GameUtil":"GameUtil","./../type/DataStructure":"DataStructure","./BottomManager":"BottomManager","./MapManager":"MapManager","./TileDateTools":"TileDateTools","./TilePool":"TilePool"}],TilePool:[function(e,t,o){"use strict";cc._RF.push(t,"8c3741iUMNCs7R75hYpaVBr","TilePool"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/util/ResUtil"),a=function(){function e(){this.tilePrefab=null,this.tilePool=new cc.NodePool("Tile")}return e.loadPrefab=function(e){var t=this;i.ResUtil.loadRes("tile",i.eResType.UIPrefab,function(o){t.instance.tilePrefab=o,null!=e&&e()})},e.get=function(){var e=this.instance.tilePool.get();return null==e&&(e=cc.instantiate(this.instance.tilePrefab)),e},e.put=function(e){cc.Tween.stopAllByTarget(e),e.removeFromParent(!1),this.instance.tilePool.put(e)},e.instance=new e,e}();o.default=a,cc._RF.pop()},{"../../core/util/ResUtil":"ResUtil"}],TileWinWindow:[function(e,t,o){"use strict";cc._RF.push(t,"0a2eccBIe1Ff7gQSH2lCfyT","TileWinWindow"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../core/global/Emitter"),a=e("../../core/global/I18N"),n=e("../../core/Table/Table"),r=e("../../core/Table/TableHelper"),s=e("../../core/UI/WWindow"),l=e("../../Game"),c=e("../../game/BoxOpenSystem"),p=e("../../game/type/Enum"),u=e("../../global/AudioMgr"),d=e("../../global/GameConfig"),h=e("../../sdk/LogEvent"),f=e("../../sdk/SDKConst"),g=e("../UICenter"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.starNodes=[],t.starlights=[],t.starParticles=[],t.labelAddCoins=null,t.labelBonus=null,t.labelRewardCoins=null,t.labelBonus2=null,t.labelHome=null,t.labelNext=null,t.btnAdCoin=null,t.mHasWatch=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.initLanguage(),i.Emitter.register("rewardedAdLoadState",this.refreshAdBtn,this)},t.prototype.show=function(t){e.prototype.show.call(this),this.result={gold:0,usd:0,star:0,level:0};var o=l.Game.gameMgr.arcadelevel,i=r.TableHelper.GetField(n.eTable.eTabMap,o);i&&(this.label.string=i.chapter+" - "+i.Checkpoint),this.refreshStarNodes(t),this.result.star=this.saveStarData(o,t),this.result.gold=this.showRewardGold(t),u.AudioMgr.playEffect("result_win"),this.updateServerUser();for(var a=0;a<this.starParticles.length;a++)this.starParticles[a].active=!1;this.mHasWatch=!1,this.btnAdCoin.interactable=d.default.SDK.rewardAvailability(),h.default.dotAdPv(f.default.AD_PLAY_POS_SHOP)},t.prototype.initLanguage=function(){this.labelHome.string=a.default.get("L40034"),this.labelNext.string=a.default.get("L10004"),this.labelBonus2.string=a.default.get("L40151"),this.labelBonus.string=a.default.get("L10009")},t.prototype.onCloseClick=function(){this.toBack()},t.prototype.updateServerUser=function(){var e=l.Game.userData.lvRwd,t=l.Game.userData.tempRewardRes;t&&(e.Id=t.Id,e.This=t.This,e.Type=t.Type,e.Amount=t.Amount,e.Multiple=t.Multiple,e.Next=t.Next,e.Need=t.Need,l.Game.userData.lvRwd=e),l.Game.userData.tempRewardRes=null},t.prototype.onNextlevelClick=function(){this.hide();var e=l.Game.gameMgr.arcadelevel+1,t=r.TableHelper.GetCount(n.eTable.eTabMap);this.result.level=e<=t?e:t,l.Game.gameMgr.restoreGrid(),!this.result.star&&this.result.level>0?g.UICenter.openEnterGameWindow(this.result.level,function(e){e||l.Game.gameMgr.backToMain(!0,0)},!1):l.Game.gameMgr.backToMain(!0,this.result)},t.prototype.refreshStarNodes=function(e){e>this.starNodes.length&&(e=this.starNodes.length);for(var t=0;t<this.starNodes.length;t++)this.starNodes[t].active=t<e,this.starlights[t].active=t<e},t.prototype.getRewardGold=function(e){var t=100;return 1==e?t=100:2==e?t=100:3==e&&(t=100),t},t.prototype.getExchangeMoney=function(e){return(e*a.default.getExchangeRate()).toFixed(a.default.getToFixedLength())},t.prototype.playStarsSoundEffect=function(e){if(1==e&&this.starNodes[0].active)u.AudioMgr.playEffect("result_success_star_1"),this.starParticles[0].active=!0,(t=this.starParticles[0].getComponent(cc.ParticleSystem))&&t.resetSystem();else if(2==e&&this.starNodes[1].active)u.AudioMgr.playEffect("result_success_star_2"),this.starParticles[1].active=!0,(t=this.starParticles[1].getComponent(cc.ParticleSystem))&&t.resetSystem();else if(3==e&&this.starNodes[2].active){var t;u.AudioMgr.playEffect("result_success_star_3"),this.starParticles[2].active=!0,(t=this.starParticles[2].getComponent(cc.ParticleSystem))&&t.resetSystem()}},t.prototype.saveStarData=function(e,t){var o=0,i=l.Game.userData.starData;if(e>i.levels.length)i.levels.push(t),o=t;else{var a=e-1,n=i.levels[a];t>n&&(i.levels[a]=t,o=t-n)}return i.total+=o,i.alltotal+=o,cc.log("\u7e3d\u661f\u661f\u6578\uff1a"+i.alltotal),l.Game.userData.starData=i,o},t.prototype.onTrySkinClick=function(){},t.prototype.watchComplete=function(){var e=this,t=d.default.ShopWatchReward,o=new c.Prop(p.PropType.PropGold,t),i=[o];g.UICenter.openGainItemWindow(i,function(){e.gainProp(i),h.default.dotVirtualGain(l.Game.userData.dotData.currentLevel,o.propNum,2,l.Game.userData.goldData.gold,1)},!1,p.ItemFromType.FromBonus)},t.prototype.onAddCoinClick=function(){var e=this;l.Game.sdkPipeline.showReward(function(t){t&&(e.watchComplete(),e.btnAdCoin.interactable=!1,e.mHasWatch=!0)},this,f.default.AD_PLAY_POS_SHOP)},t.prototype.onBonusClick=function(){g.UICenter.openBonusWindow()},t.prototype.onQuitClick=function(){l.Game.gameMgr.restoreGrid(),this.hide(),l.Game.gameMgr.backToMain(!0,this.result)},t.prototype.showRewardGold=function(e){var t=this.getRewardGold(e);this.labelRewardCoins.string=""+t;var o=l.Game.userData.goldData;return o.gold+=t,l.Game.userData.goldData=o,t},t.prototype.gainProp=function(e){for(var t=l.Game.userData.goldData,o=0,i=e;o<i.length;o++){var a=i[o];switch(a.propType){case p.PropType.PropGold:t.gold+=a.propNum;break;case p.PropType.PropUndo:t.propUndo+=a.propNum;break;case p.PropType.PropAuto:t.propAuto+=a.propNum;break;case p.PropType.PropRefresh:t.propRefresh+=a.propNum;break;default:console.log("[],propType error",a.propType)}}l.Game.userData.goldData=t},t.prototype.refreshAdBtn=function(e){this.mHasWatch||(this.btnAdCoin.interactable=e)},__decorate([v(cc.Label)],t.prototype,"label",void 0),__decorate([v(cc.Node)],t.prototype,"starNodes",void 0),__decorate([v(cc.Node)],t.prototype,"starlights",void 0),__decorate([v(cc.Node)],t.prototype,"starParticles",void 0),__decorate([v(cc.Label)],t.prototype,"labelAddCoins",void 0),__decorate([v(cc.Label)],t.prototype,"labelBonus",void 0),__decorate([v(cc.Label)],t.prototype,"labelRewardCoins",void 0),__decorate([v(cc.Label)],t.prototype,"labelBonus2",void 0),__decorate([v(cc.Label)],t.prototype,"labelHome",void 0),__decorate([v(cc.Label)],t.prototype,"labelNext",void 0),__decorate([v(cc.Button)],t.prototype,"btnAdCoin",void 0),__decorate([m],t)}(s.default);o.default=_,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../game/BoxOpenSystem":"BoxOpenSystem","../../game/type/Enum":"Enum","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst","../UICenter":"UICenter"}],Tile:[function(e,t,o){"use strict";cc._RF.push(t,"043638X4KFHTIYGO063Egg7","Tile"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../type/Enum"),a=e("../type/DataStructure"),n=e("../manager/GameRes"),r=e("../manager/TilePool"),s=e("../manager/TileManager"),l=e("../../view/window/Guide01Window"),c=e("../../core/global/Emitter"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileFloor=null,t.sprite=null,t.mask=null,t._type=null,t._isDestroy=!1,t._needRecycle=!1,t._arriveBottom=!1,t._sibIndex=0,t._coord=null,t._postion=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"activeMask",{set:function(e){this.mask.active=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldPos",{get:function(){return this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SibIndex",{set:function(e){this._sibIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sibIndex",{get:function(){return this._sibIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needRecycle",{get:function(){return this._needRecycle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arriveBottom",{get:function(){return this._arriveBottom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coord",{get:function(){return this._coord},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDestroy",{get:function(){return this._isDestroy},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"postion",{get:function(){return this._postion},enumerable:!1,configurable:!0}),t.prototype.sPostion=function(e){this._postion=e},t.prototype.onLoad=function(){this.bindTouchEvents()},t.prototype.onDestroy=function(){this.unbindTouchEvents()},t.prototype.isMask=function(){return this.mask.activeInHierarchy},t.prototype.reuse=function(){this.bindTouchEvents(),this._needRecycle=!1,this._isDestroy=!1,this.mask.opacity=255,this.activeMask=!1,this._postion=null,this._arriveBottom=!1},t.prototype.unuse=function(){this.unbindTouchEvents()},t.prototype.onTouchEnd=function(e){e.stopPropagation(),this.isMask()||c.Emitter.fire(i.TileEvent.TouchEnd,this._coord.copy(),e.getLocation())},t.prototype.onTouchStart=function(e){e.stopPropagation(),this.isMask()||c.Emitter.fire(i.TileEvent.TouchStart,this._coord.copy(),e.getLocation())},t.prototype.onTouchCancel=function(e){e.stopPropagation(),this.isMask()||c.Emitter.fire(i.TileEvent.TouchCancel,this._coord.copy(),e.getLocation())},t.prototype.bindTouchEvents=function(){this.tileFloor.on("touchstart",this.onTouchStart,this),this.tileFloor.on("touchcancel",this.onTouchCancel,this),this.tileFloor.on("touchend",this.onTouchEnd,this)},t.prototype.unbindTouchEvents=function(){this.tileFloor.off("touchstart",this.onTouchStart,this),this.tileFloor.off("touchcancel",this.onTouchCancel,this),this.tileFloor.off("touchend",this.onTouchEnd,this)},t.prototype.init=function(){this._type=null,this.sprite.spriteFrame=null,this._coord||(this._coord=a.Coord()),this.node.setScale(0),this._postion=null,this._arriveBottom=!1},t.prototype.setType=function(e){this._type=e,this.updateDisplay()},t.prototype.updateDisplay=function(){this.sprite.spriteFrame=n.default.getTileSpriteFrame(this._type)},t.prototype.setCoord=function(e,t,o){this._coord||(this._coord=a.Coord()),this._coord.set(e,t,o)},t.prototype.appear=function(){var e=this;cc.tween(this.node).to(.025,{scale:1}).call(function(){e._needRecycle&&e.recycle(!0)}).start()},t.prototype.replayappear=function(e){var t=this;cc.tween(this.node).to(.15,{position:e}).call(function(){t._needRecycle&&t.recycle(!0)}).start()},t.prototype.Startappear=function(){cc.tween(this.node).to(.1,{scale:1.1}).start()},t.prototype.CancelAppear=function(){cc.tween(this.node).to(.1,{scale:1}).start()},t.prototype.appearNoAnimation=function(){cc.tween(this.node).to(.025,{scale:1}).start()},t.prototype.dhappearNoAnimation=function(){cc.tween(this.node).to(.025,{scale:.7}).start()},t.prototype.dhappear=function(){var e=this;cc.tween(this.node).to(.025,{scale:.7}).call(function(){e._needRecycle&&e.recycle(!0)}).start()},t.prototype.move=function(e){var t=this;cc.tween(this.node).to(.5,{position:e},{easing:"cubicOut"}).call(function(){return t.appear()}).start(),this.isMask&&cc.tween(this.mask).call(function(){t.isMask&&(t.mask.opacity=0)}).to(.5,{opacity:255},{easing:"cubicOut"}).start()},t.prototype.dhmove=function(e){var t=this;cc.tween(this.node).to(.5,{position:e},{easing:"cubicOut"}).call(function(){return t.dhappear()}).start()},t.prototype.bmove=function(e){var t=this;cc.tween(this.node).to(.5,{position:e,scale:1},{easing:"cubicOut"}).call(function(){return t._arriveBottom=!0}).call(function(){return t.appear()}).call(function(){return s.default.getInstance().delBottomTile()}).start()},t.prototype.guidbmove=function(e){var t=this;cc.tween(this.node).to(.5,{position:e,scale:1},{easing:"cubicOut"}).call(function(){return t._arriveBottom=!0}).call(function(){return t.dhappear()}).call(function(){return l.default.getInstance().delBottomTile()}).start()},t.prototype.delayeDisappear=function(){var e=this;cc.tween(this.node).to(.15,{scale:0}).call(function(){e.recycle(!0)}).start()},t.prototype.disappear=function(){cc.log("Tile disapear"),this.unbindTouchEvents(),this._isDestroy=!0},t.prototype.removeTouch=function(){this.unbindTouchEvents()},t.prototype.recover=function(){this.bindTouchEvents(),this._isDestroy=!1,this._arriveBottom=!1},t.prototype.recycle=function(e){void 0===e&&(e=!0),e?r.default.put(this.node):this._needRecycle=!0},t.prototype.refreshdisappear=function(e){cc.tween(this.node).to(.05,{position:e}).to(.05,{scale:0}).start()},__decorate([d(cc.Node)],t.prototype,"tileFloor",void 0),__decorate([d(cc.Sprite)],t.prototype,"sprite",void 0),__decorate([d(cc.Node)],t.prototype,"mask",void 0),__decorate([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../core/global/Emitter":"Emitter","../../view/window/Guide01Window":"Guide01Window","../manager/GameRes":"GameRes","../manager/TileManager":"TileManager","../manager/TilePool":"TilePool","../type/DataStructure":"DataStructure","../type/Enum":"Enum"}],Toast:[function(e,t,o){"use strict";cc._RF.push(t,"843b7T3hWZKLoeZu31pdXyT","Toast"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Game"),a=e("./WWindow"),n=e("../../core/util/ResUtil"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.label=null,t.labelColor=null,t}var o;return __extends(t,e),o=t,t.instance=function(e){var t=this;null==this._Instance?n.ResUtil.loadRes("Toast",n.eResType.UIPrefab,function(a){var n=cc.instantiate(a);n.parent=i.Game.uiMgr.topUI,t._Instance=n.getComponent(o),e(t._Instance)}):e(this._Instance)},t.showWith=function(e){this.instance(function(t){t.node.setSiblingIndex(9999),t.show(e)})},t.hideWith=function(){this._Instance&&this._Instance.toBack()},t.prototype.show=function(t){e.prototype.show.call(this),this.label.string=t,this.label.node.color=this.labelColor,this.delayHide(),this.bg.height=this.label.node.height+30},t.prototype.delayHide=function(){var e=this;this.timeout&&clearTimeout(Number(this.timeout)),this.timeout=setTimeout(function(){e.timeout=null,e.toBack()},2e3)},t._Instance=null,__decorate([l(cc.Node)],t.prototype,"bg",void 0),__decorate([l(cc.RichText)],t.prototype,"label",void 0),__decorate([l(cc.Color)],t.prototype,"labelColor",void 0),o=__decorate([s],t)}(a.default);o.default=c,cc._RF.pop()},{"../../Game":"Game","../../core/util/ResUtil":"ResUtil","./WWindow":"WWindow"}],UICenter:[function(e,t,o){"use strict";cc._RF.push(t,"1f2c8lwb/VFnojf5dWECLdg","UICenter"),Object.defineProperty(o,"__esModule",{value:!0}),o.UICenter=o.UIDefine=void 0;var i=e("../Game"),a=e("../game/type/Enum"),n=function(){function e(){}return e.prototype.openSettingWin=function(){i.Game.uiMgr.showWindow("prefab/SettingWindow")},e.prototype.openGameBGWin=function(){i.Game.uiMgr.showWindow("prefab/GameBGWindow")},e.prototype.openGameLanguageWin=function(){i.Game.uiMgr.showWindow("prefab/LanguageWindow")},e.prototype.openWinnerWin=function(){i.Game.uiMgr.showWindow("prefab/WinnerWindow")},e.prototype.openGuideWindow=function(e,t){i.Game.uiMgr.showWindow("prefab/GuideWindow",e,t)},e.prototype.openGoldWindow=function(e){i.Game.uiMgr.showWindow("prefab/GoldWindow",e)},e.prototype.closeGoldWindow=function(){i.Game.uiMgr.hideWindow("prefab/GoldWindow")},e.prototype.openFailWindow=function(e){i.Game.uiMgr.showWindow("prefab/FailWindow",e)},e.prototype.closeFailWindow=function(){i.Game.uiMgr.hideWindow("prefab/FailWindow")},e.prototype.openStrengthWindow=function(e,t,o){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===o&&(o=!0),i.Game.uiMgr.showWindow("prefab/StrengthWindow",e,t,o)},e.prototype.openEnterGameWindow=function(e,t,o,a,n,r){void 0===n&&(n=0),void 0===r&&(r=!0),i.Game.uiMgr.showWindow("prefab/EnterGameWindow",e,t,o,a,n,r)},e.prototype.closeStrengthWindow=function(){i.Game.uiMgr.hideWindow("prefab/StrengthWindow")},e.prototype.openMainWindow=function(e,t,o){void 0===e&&(e=!1),i.Game.uiMgr.showWindow("prefab/MainWindow",e,t,o)},e.prototype.openLevel3000Window=function(e,t,o,a){i.Game.uiMgr.showWindow("prefab/Level3000Window",e,t,o,a)},e.prototype.openBonusWindow=function(e,t){i.Game.uiMgr.showWindow("prefab/BonusWindow",e,t)},e.prototype.openSuspendWindow=function(){i.Game.uiMgr.showWindow("prefab/SuspendWindow")},e.prototype.openShopWindow=function(e,t){void 0===e&&(e=a.ShopType.CoinsShop),void 0===t&&(t=0),i.Game.uiMgr.showWindow("prefab/ShopWindow",e,t)},e.prototype.isOpenShopWindow=function(){return i.Game.uiMgr.getWindowActive("prefab/ShopWindow")},e.prototype.openGainItemWindow=function(e,t,o,n,r){void 0===o&&(o=!1),void 0===n&&(n=a.ItemFromType.FromChest),i.Game.uiMgr.showWindow("prefab/GainItemWindow",e,t,o,n,r)},e.prototype.openGuideKingWindow=function(e){i.Game.uiMgr.showWindow("prefab/GuideKingWindow",e)},e.prototype.openDayOpenGiftWindow=function(e){i.Game.uiMgr.showWindow("prefab/DayOpenGiftWindow",e)},e.prototype.openReviveWindow=function(){i.Game.uiMgr.showWindow("prefab/ReviveWindow")},e.prototype.openStarGiftWindow=function(e){i.Game.uiMgr.showWindow("prefab/StarGiftWindow",e)},e.prototype.openClaimKingReward=function(){i.Game.uiMgr.showWindow("prefab/ClaimKingGiftWindow")},e.prototype.openDayGiftWindow=function(){i.Game.uiMgr.showWindow("prefab/DayGiftWindow")},e.prototype.openTileWinWindow=function(e){i.Game.uiMgr.showWindow("prefab/TileWinWindow",e)},e.prototype.openRaceWinWindow=function(e){i.Game.uiMgr.showWindow("prefab/RaceWinWindow",e)},e.prototype.openTileFailWindow=function(){i.Game.uiMgr.showWindow("prefab/TileFailWindow")},e.prototype.openRaceFailWindow=function(){i.Game.uiMgr.showWindow("prefab/RaceFailWindow")},e.prototype.openPlaneWindow=function(e){i.Game.uiMgr.showWindow("prefab/PlaneWindow",e)},e.prototype.openBeginnerGiftWindow=function(){i.Game.uiMgr.showWindow("prefab/BeginnerGiftWindow")},e.prototype.openPigBankWindow=function(e){i.Game.uiMgr.showWindow("prefab/PigBankWindow",e)},e.prototype.openVipWindow=function(){i.Game.uiMgr.showWindow("prefab/VipWindow")},e.prototype.openMapWindow=function(e){e||(e=i.Game.uiMgr.getWindow("prefab/LobbyWindow")),i.Game.uiMgr.showWindow("prefab/MapWindow",e)},e.prototype.openFreePropWindow=function(e){i.Game.uiMgr.showWindow("prefab/FreePropWindow",e)},e.prototype.openAddGridWindow=function(e){i.Game.uiMgr.showWindow("prefab/AddGridWindow",e)},e.prototype.openDailyWin=function(e){i.Game.uiMgr.showWindow("prefab/DailyWindowN",e)},e.prototype.openRemoveAdWindow=function(){i.Game.uiMgr.showWindow("prefab/RemoveAdWindow")},e.prototype.openDailyHelpWindow=function(){i.Game.uiMgr.showWindow("prefab/DailyHelpWindow")},e.prototype.openSuperBonusWindow=function(e){i.Game.uiMgr.showWindow("prefab/SuperBonusWindow",e)},e.prototype.openMainShopWindow=function(){i.Game.uiMgr.showWindow("prefab/MainShopWindow")},e.instance=new e,e}();o.UIDefine=n,o.UICenter=n.instance,cc._RF.pop()},{"../Game":"Game","../game/type/Enum":"Enum"}],UIManager:[function(e,t,o){"use strict";cc._RF.push(t,"ec7127YPWVIDZqYcpU+zgTi","UIManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIManager=o.SiblingIndexType=void 0;var i,a=e("../global/PEDictionary"),n=e("./WWindow"),r=e("../global/Emitter"),s=e("../../global/Const"),l=e("../../global/AudioMgr"),c=e("../global/I18N");(function(e){e[e.Normal=1]="Normal",e[e.High=2]="High"})(i=o.SiblingIndexType||(o.SiblingIndexType={}));var p=function(){function e(){var e=this;this.mCurrentDialog=[],this._normalUI=null,this._topUI=null,this._uiRoot=null,this.mIgnoreDefaultAudio="ignoreDefaultAudio",this.mIgnoreDefaultfont="ignoreDefaultFont",this.mAllWindows=new a.PEDictionary(!0),this.mPreLoadRes=new a.PEDictionary(!0),r.Emitter.register(s.default.eOnHideUI,function(){e.activeDialogCount<=0&&(e.mCurrentDialog=null)},this)}return Object.defineProperty(e.prototype,"preLoadRes",{get:function(){return this.mPreLoadRes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uiRoot",{get:function(){return null==this._uiRoot&&(this._uiRoot=cc.find(e.DefalutUIRoot)),this._uiRoot},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normlaUI",{get:function(){return null==this._normalUI&&(this._normalUI=cc.find(e.DefalutUINormal)),this._normalUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topUI",{get:function(){return null==this._topUI&&(this._topUI=cc.find(e.DefaultUITop)),this._topUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeCount",{get:function(){if(0==this.mAllWindows.values.length)return 0;for(var e=0,t=0,o=this.mAllWindows.values;t<o.length;t++)o[t].activeInHierarchy&&e++;return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeDialogCount",{get:function(){if(0==this.mAllWindows.values.length)return 0;for(var e=0,t=0,o=this.mAllWindows.values;t<o.length;t++){var i=o[t];i.activeInHierarchy&&i.isDialog&&e++}return e},enumerable:!1,configurable:!0}),e.prototype.showWindow=function(e){for(var t=this,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];if(e){var a=e instanceof cc.Prefab?e.name:e,n=e instanceof cc.Prefab?e:null;this.mAllWindows.containsKey(a)||e instanceof cc.Prefab?this.showWindowImmite.apply(this,__spreadArrays([a,n],o)):this.preLoadRes.containsKey(a)?this.showWindowImmite.apply(this,__spreadArrays([a,this.preLoadRes[a]],o)):cc.resources.load(a,cc.Prefab,function(e,i){null==e?t.showWindowImmite.apply(t,__spreadArrays([a,i],o)):console.log("prefab load error! "+e)})}},e.prototype.showWindowImmite=function(e,t){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];if(this.mAllWindows.containsKey(e))(a=this.getWindow(e)).node.setSiblingIndex(9999),a.show.apply(a,o);else{var a,r=cc.instantiate(t);if(null==r)return void console.log("prefab is not found! path="+e);if(null==(a=r.getComponent(n.default)))return void console.log("WWindow is not found! path="+e);this.setWindowParent(a),this.setWidgetAlignModel(a.node),r.setPosition(cc.Vec2.ZERO),this.initUIFont(r),this.initUIClickAudio(r),this.mAllWindows.add(e,a),a.path=e,a.show.apply(a,o)}},e.prototype.setWindowParent=function(e){e.siblingIndexType==i.High?this.setParent(e.node,this.topUI):this.setParent(e.node,this.normlaUI)},e.prototype.setWidgetAlignModel=function(e){for(var t=0,o=e.getComponentsInChildren(cc.Widget);t<o.length;t++)o[t].alignMode=cc.Widget.AlignMode.ALWAYS},e.prototype.setParent=function(t,o){o||(o=cc.find(e.DefaultCanvas)),t.parent=o},e.prototype.hideWindow=function(e){var t=this.getWindow(e);null!=t&&t.activeInHierarchy&&t.hide()},e.prototype.hideWindows=function(e){for(var t=0,o=this.mAllWindows.values;t<o.length;t++){var i=o[t];e&&e==i.path||i.hide()}},e.prototype.cleanCurSceneWindow=function(){for(var e=0,t=this.mAllWindows.values;e<t.length;e++){var o=t[e];o.node&&o.node.destroy()}this.mAllWindows.clear()},e.prototype.getWindow=function(e){return this.mAllWindows.tryGetValue(e)},e.prototype.getWindowActive=function(e){var t=this.getWindow(e);return null!=t&&t.activeInHierarchy},e.prototype.setIgnoreDefaultAudio=function(e){e&&(e[this.mIgnoreDefaultAudio]=!0)},e.prototype.initUIClickAudio=function(e){if(e){var t=e.getComponentsInChildren(cc.Button);if(t)for(var o=0,i=t;o<i.length;o++){var a=i[o];a[this.mIgnoreDefaultAudio]||a.node.on(cc.Node.EventType.TOUCH_END,this.commonClick,this)}if(t=e.getComponentsInChildren(cc.Toggle))for(var n=0,r=t;n<r.length;n++){var s=r[n];s[this.mIgnoreDefaultAudio]||s.node.on(cc.Node.EventType.TOUCH_END,this.commonClick,this)}}},e.prototype.commonClick=function(){l.AudioMgr.playEffect("btn_click")},e.prototype.setIgnoreDefaultFont=function(e){e&&(e[this.mIgnoreDefaultAudio]=!0)},e.prototype.initUIFont=function(e){if(e){var t=e.getComponentsInChildren(cc.Label);if(t)for(var o=0,i=t;o<i.length;o++){var a=i[o];a[this.mIgnoreDefaultAudio]||(a.font=c.default.getFont())}var n=e.getComponentsInChildren(cc.RichText);if(n)for(var r=0,s=n;r<s.length;r++){var l=s[r];l[this.mIgnoreDefaultAudio]||(l.font=c.default.getFont())}}},e.DefaultCanvas="Canvas",e.DefalutUIRoot="Canvas/UIRoot",e.DefalutUINormal="Canvas/UIRoot/UINormal",e.DefaultUITop="Canvas/UIRoot/UITop",e}();o.UIManager=p,cc._RF.pop()},{"../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../global/Emitter":"Emitter","../global/I18N":"I18N","../global/PEDictionary":"PEDictionary","./WWindow":"WWindow"}],UIRootFit:[function(e,t,o){"use strict";cc._RF.push(t,"e98c3bpkPpIjK4IPTIe1ZvS","UIRootFit"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../component/Orientation"),a=e("../global/Emitter"),n=e("../../global/Const"),r=e("../../Game"),s=cc._decorator,l=s.ccclass,c=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fitRoot=!0,t.scaleRoot=!1,t.portraitScale=!0,t.maskNode=null,t.scaleFactor=1,t}var o;return __extends(t,e),o=t,t.prototype.getRootFit=function(){return r.Game.uiMgr.uiRoot.getComponent(o)},t.prototype.onLoad=function(){this.fit(i.default.current.isPortrait),a.Emitter.register(n.default.ePreOrientationChanged,this.fit,this)},t.prototype.onDestroy=function(){a.Emitter.remove(n.default.ePreOrientationChanged,this.fit,this)},t.prototype.fit=function(e){if(this.fitRoot&&this.fitSize(e),this.scaleRoot&&this.fitScale(),this.maskNode){var t=this.getRootFit();t&&(this.maskNode.scale=1/t.scaleFactor)}},t.prototype.fitSize=function(e){if(cc.sys.os===cc.sys.OS_IOS){var t=cc.sys.getSafeAreaRect(),o=this.getComponent(cc.Widget);if(e){var i=.4*(cc.winSize.height-t.height);o.top=i,o.left=0,o.right=0}else i=.4*(cc.winSize.width-t.width),o.left=i,o.right=i,o.top=0,o.bottom=0;o.updateAlignment(),this.maskNode&&(this.maskNode.y=o.top/2)}if(cc.sys.os===cc.sys.OS_ANDROID){t=cc.sys.getSafeAreaRect();var a=cc.winSize;o=this.getComponent(cc.Widget),t.height!=a.height||t.width!=a.width?e?(o.top=104,o.bottom=0,o.left=0,o.right=0):(o.top=0,o.bottom=0,o.left=104,o.right=104):(o.top=0,o.bottom=0,o.left=0,o.right=0),o.updateAlignment(),this.maskNode&&(this.maskNode.y=o.top/2)}},t.prototype.fitScale=function(){var e=cc.view.getDesignResolutionSize(),t=cc.view.getFrameSize(),o=e.height/e.width,a=t.height/t.width;i.default.current.isPortrait?this.portraitScale&&a<o?(this.scaleFactor=a/o,this.node.scale=this.scaleFactor):(this.scaleFactor=1,this.node.scale=1):a>o?(this.scaleFactor=o/a,this.node.scale=this.scaleFactor):(this.scaleFactor=1,this.node.scale=1)},__decorate([c],t.prototype,"fitRoot",void 0),__decorate([c],t.prototype,"scaleRoot",void 0),__decorate([c],t.prototype,"portraitScale",void 0),__decorate([c(cc.Node)],t.prototype,"maskNode",void 0),o=__decorate([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../global/Const":"Const","../component/Orientation":"Orientation","../global/Emitter":"Emitter"}],UISuperItem:[function(e,t,o){"use strict";cc._RF.push(t,"97275MJG3VLmZjRy7s89wuN","UISuperItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./UISuperLayout"),a=cc._decorator,n=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this.layout.vertical?(this.layout.accommodWidth-this.layout.spacingWidth)/this.layout.column:this.node.width*this.layout.getUsedScaleValue(this.node.scaleX)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.layout.horizontal?(this.layout.accommodHeight-this.layout.spacingWidth)/this.layout.column:this.node.height*this.layout.getUsedScaleValue(this.node.scaleY)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.node.watchSelf=this.watchSelf.bind(this),this.node.saveOriginSize=this.saveOriginSize.bind(this);var e=this.node.getComponent(cc.Widget);e&&(cc.warn("UISuperItem: item\u4e0d\u5141\u8bb8\u6302cc.Widget\u7ec4\u4ef6 \u8bf7\u624b\u52a8\u79fb\u9664"),this.node.removeComponent(e))},t.prototype.saveOriginSize=function(){this.originSize=cc.size(this.width,this.height),this.node.setContentSize(this.originSize),this.originScale=cc.v2(this.node.scaleX,this.node.scaleY)},t.prototype.init=function(e){this.layout=e,this.layout.node.on(i.UIChangeBrotherEvnet,this.onChangeBrother,this),this.saveOriginSize(),this.node.on(cc.Node.EventType.SIZE_CHANGED,this.watchSize,this),this.node.on(cc.Node.EventType.SCALE_CHANGED,this.watchSize,this),this.onChangeBrother()},t.prototype.onDestroy=function(){this.layout.node.off(i.UIChangeBrotherEvnet,this.onChangeBrother,this),this.node.off(cc.Node.EventType.SIZE_CHANGED,this.watchSize,this),this.node.off(cc.Node.EventType.SCALE_CHANGED,this.watchSize,this),this.unlisten()},t.prototype.onChangeBrother=function(){var e,t=this.layout.getBrotherNode(this.node);(null==t?void 0:t.uuid)!=(null===(e=this.brother)||void 0===e?void 0:e.uuid)&&(this.unlisten(),this.brother=t,this.listen(),this.watchBrother())},t.prototype.listen=function(){var e,t;null===(e=this.brother)||void 0===e||e.on("leave",this.unlisten,this),null===(t=this.brother)||void 0===t||t.on(cc.Node.EventType.POSITION_CHANGED,this.watchBrother,this)},t.prototype.unlisten=function(){var e,t;null===(e=this.brother)||void 0===e||e.off("leave",this.unlisten,this),null===(t=this.brother)||void 0===t||t.off(cc.Node.EventType.POSITION_CHANGED,this.watchBrother,this),this.brother=null},t.prototype.watchSize=function(){this.layout.column>1?(this.node.setContentSize(this.originSize),this.node.setScale(this.originScale)):(!this.layout.vertical||this.node.getContentSize().width==this.originSize.width&&this.node.scaleX==this.originScale.x?!this.layout.horizontal||this.node.getContentSize().height==this.originSize.height&&this.node.scaleY==this.originScale.y||(cc.warn("\u6c34\u5e73\u6392\u5217\u4e0d\u5141\u8bb8\u4fee\u6539\u3010\u9ad8\u5ea6\u3011"),this.node.height=this.originSize.height,this.node.scaleY=this.originScale.y):(cc.warn("\u5782\u76f4\u6392\u5217\u4e0d\u5141\u8bb8\u4fee\u6539\u3010\u5bbd\u5ea6\u3011"),this.node.width=this.originSize.width,this.node.scaleX=this.originScale.x),this.brother&&this.watchBrother(),this.layout.resetScrollView(),this.node.emit(cc.Node.EventType.POSITION_CHANGED)),0==this.node.index&&this.layout.isNormalSize&&this.node.setPosition(this.layout.getGroupHeader(this.node))},t.prototype.watchBrother=function(){this.brother&&(this.layout.headerToFooter?this.headerToFooterRelativeToFooter(this.brother):this.footerToHeaderRelativeToFooter(this.brother))},t.prototype.isOutOfBoundary=function(e){return!(!this.layout.vertical||0!=e.y)||!(!this.layout.horizontal||0!=e.x)},t.prototype.footerToHeaderWatchHeader=function(){if(!(this.layout.getSiblingIndex(this.node)>=this.layout.column)){var e=this.layout.footer.index+1;if(e>=this.layout.maxItemTotal){if(!this.layout.footerLoop||this.layout.scrollToHeaderOrFooter)return;e=0}var t=this.layout.isOutOfBoundaryFooter(this.node);this.isOutOfBoundary(t)&&(this.node.index=e,this.layout.notifyRefreshItem(this.node),this.node.emit("leave"),this.layout.setSiblingIndex(this.node,this.layout.children.length-1))}},t.prototype.footerToHeaderWatchFooter=function(){if(!(this.layout.getSiblingIndex(this.node)<this.layout.children.length-this.layout.column)){var e=this.layout.header.index-1;if(e<0){if(!this.layout.headerLoop||this.layout.scrollToHeaderOrFooter)return;e=this.node.index}var t=this.layout.isOutOfBoundaryHeader(this.node);this.isOutOfBoundary(t)&&(this.node.index=e,this.layout.notifyRefreshItem(this.node),this.node.emit("leave"),this.unlisten(),this.footerToHeaderRelativeToHeader(this.layout.header),this.layout.setSiblingIndex(this.node,0))}},t.prototype.headerToFooterWatchHeader=function(){if(!(this.layout.getSiblingIndex(this.node)>=this.layout.column)){var e=this.layout.footer.index+1;if(e>this.layout.maxItemTotal-1){if(!this.layout.footerLoop||this.layout.scrollToHeaderOrFooter)return;e=0}var t=this.layout.isOutOfBoundaryHeader(this.node);this.isOutOfBoundary(t)&&(this.node.index=e,this.layout.notifyRefreshItem(this.node),this.node.emit("leave"),this.layout.setSiblingIndex(this.node,this.layout.children.length-1))}},t.prototype.headerToFooterWatchFooter=function(){if(!(this.layout.getSiblingIndex(this.node)<this.layout.children.length-this.layout.column)){var e=this.layout.header.index-1;if(e<0){if(!this.layout.headerLoop||this.layout.scrollToHeaderOrFooter)return;e=this.node.index}var t=this.layout.isOutOfBoundaryFooter(this.node);this.isOutOfBoundary(t)&&(this.node.index=e,this.layout.notifyRefreshItem(this.node),this.node.emit("leave"),this.unlisten(),this.headerToFooterRelativeToHeader(this.layout.header),this.layout.setSiblingIndex(this.node,0))}},t.prototype.watchSelf=function(e){e?this.layout.headerToFooter?this.headerToFooterWatchFooter():this.footerToHeaderWatchHeader():this.layout.headerToFooter?this.headerToFooterWatchHeader():this.footerToHeaderWatchFooter()},t.prototype.footerToHeaderRelativeToHeader=function(e){var t=this.node.getPosition();this.layout.vertical?(this.layout.isGroupHeader(e)?(t.x=this.layout.getGroupFooter(this.node).x,t.y=this.layout.getGroupBottomY(this.node,e)):(t.x=this.layout.getGroupLeftX(this.node,e),t.y=e.y),0==this.node.index&&(t.x=this.layout.getGroupHeader(this.node).x)):(this.layout.isGroupHeader(e)?(t.x=this.layout.getGroupRightX(this.node,e),t.y=this.layout.getGroupFooter(this.node).y):(t.x=e.x,t.y=this.layout.getGroupTopY(this.node,e)),0==this.node.index&&(t.y=this.layout.getGroupHeader(this.node).y)),this.node.setPosition(t)},t.prototype.footerToHeaderRelativeToFooter=function(e){var t=this.node.getPosition();this.layout.vertical?this.layout.isGroupFooter(e)?(t.x=this.layout.getGroupHeader(this.node).x,t.y=this.layout.getGroupTopY(this.node,e)):(t.x=this.layout.getGroupRightX(this.node,e),t.y=e.y):this.layout.isGroupFooter(e)?(t.x=this.layout.getGroupLeftX(this.node,e),t.y=this.layout.getGroupHeader(this.node).y):(t.x=e.x,t.y=this.layout.getGroupBottomY(this.node,e)),this.node.setPosition(t)},t.prototype.headerToFooterRelativeToHeader=function(e){var t=this.node.getPosition();this.layout.vertical?(this.layout.isGroupHeader(e)?(t.x=this.layout.getGroupFooter(this.node).x,t.y=this.layout.getGroupTopY(this.node,e)):(t.x=this.layout.getGroupLeftX(this.node,e),t.y=e.y),0==this.node.index&&(t.x=this.layout.getGroupHeader(this.node).x)):(this.layout.isGroupHeader(e)?(t.x=this.layout.getGroupLeftX(this.node,e),t.y=this.layout.getGroupFooter(this.node).y):(t.x=e.x,t.y=this.layout.getGroupTopY(this.node,e)),0==this.node.index&&(t.y=this.layout.getGroupHeader(this.node).y)),this.node.setPosition(t)},t.prototype.headerToFooterRelativeToFooter=function(e){var t=this.node.getPosition();this.layout.vertical?this.layout.isGroupFooter(e)?(t.x=this.layout.getGroupHeader(this.node).x,t.y=this.layout.getGroupBottomY(this.node,e)):(t.x=this.layout.getGroupRightX(this.node,e),t.y=e.y):this.layout.isGroupFooter(e)?(t.x=this.layout.getGroupRightX(this.node,e),t.y=this.layout.getGroupHeader(this.node).y):(t.x=e.x,t.y=this.layout.getGroupBottomY(this.node,e)),this.node.setPosition(t)},__decorate([n],t)}(cc.Component));o.default=r,cc._RF.pop()},{"./UISuperLayout":"UISuperLayout"}],UISuperLayout:[function(e,t,o){"use strict";cc._RF.push(t,"e15d6wkZhtBxpM7T0+r87ZL","UISuperLayout"),Object.defineProperty(o,"__esModule",{value:!0}),o.UISuperDirection=o.UISuperAxis=o.UIChangeBrotherEvnet=void 0;var i,a,n=e("./UISuperScrollView"),r=e("./UISuperItem"),s=cc._decorator,l=s.ccclass,c=s.property,p=s.menu;o.UIChangeBrotherEvnet="UIChangeBrotherEvnet",function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(i=o.UISuperAxis||(o.UISuperAxis={})),function(e){e[e.HEADER_TO_FOOTER=0]="HEADER_TO_FOOTER",e[e.FOOTER_TO_HEADER=1]="FOOTER_TO_HEADER"}(a=o.UISuperDirection||(o.UISuperDirection={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startAxis=i.VERTICAL,t.direction=a.HEADER_TO_FOOTER,t.paddingTop=0,t.paddingBottom=0,t.paddingLeft=0,t.paddingRight=0,t.spacing=cc.Vec2.ZERO,t.column=2,t.multiple=2,t.prefab=null,t.headerLoop=!1,t.footerLoop=!1,t.affectedByScale=!0,t.refreshItemEvents=[],t._isinited=!1,t._maxPrefabTotal=0,t._children=[],t._scrollView=null,t._maxItemTotal=0,t._prevLayoutPosition=cc.Vec2.ZERO,t.scrollToHeaderOrFooter=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"layoutDirection",{get:function(){var e=cc.Vec2.ZERO;return this.vertical?e.y=this.node.y-this._prevLayoutPosition.y:e.x=this.node.x-this._prevLayoutPosition.x,this._prevLayoutPosition=this.node.getPosition(),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isScrollToFooter",{get:function(){return this.vertical?this.layoutDirection.y<0:this.layoutDirection.x>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxItemTotal",{get:function(){return this._maxItemTotal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxPrefabTotal",{get:function(){return this._maxPrefabTotal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewSize",{get:function(){return this.scrollView.view.getContentSize()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return this.startAxis==i.VERTICAL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.startAxis==i.HORIZONTAL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerToFooter",{get:function(){return this.direction==a.HEADER_TO_FOOTER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerToHeader",{get:function(){return this.direction==a.FOOTER_TO_HEADER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacingWidth",{get:function(){return this.spacing.x*(this.column-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacingHeight",{get:function(){return this.spacing.y*(this.column-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accommodWidth",{get:function(){return this.viewSize.width-this.paddingLeft-this.paddingRight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accommodHeight",{get:function(){return this.viewSize.height-this.paddingTop-this.paddingBottom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollView",{get:function(){return this._scrollView||(this._scrollView=this.node.parent.parent.getComponent(n.default)),this._scrollView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._children[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footer",{get:function(){return this._children[this._children.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topBoundary",{get:function(){return this.headerToFooter?this.headerBoundaryY+this.paddingTop:this.footerBoundaryY+this.paddingTop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomBoundary",{get:function(){return this.headerToFooter?this.footerBoundaryY-this.paddingBottom:this.headerBoundaryY-this.paddingBottom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftBoundary",{get:function(){return this.headerToFooter?this.headerBoundaryX-this.paddingLeft:this.footerBoundaryX-this.paddingLeft},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightBoundary",{get:function(){return this.headerToFooter?this.footerBoundaryX+this.paddingRight:this.headerBoundaryX+this.paddingRight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerBoundaryX",{get:function(){return this.headerToFooter?this.node.x+this.header.x-this.header.anchorX*this.getScaleWidth(this.header):this.node.x+this.header.x+(1-this.header.anchorX)*this.getScaleWidth(this.header)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerBoundaryY",{get:function(){return this.headerToFooter?this.node.y+this.header.y+(1-this.header.anchorY)*this.getScaleHeight(this.header):this.node.y+this.header.y-this.header.anchorY*this.getScaleHeight(this.header)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerBoundaryX",{get:function(){return this.headerToFooter?this.node.x+this.footer.x+(1-this.footer.anchorX)*this.getScaleWidth(this.footer):this.node.x+this.footer.x-this.footer.anchorX*this.getScaleWidth(this.footer)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerBoundaryY",{get:function(){return this.headerToFooter?this.node.y+this.footer.y-this.footer.anchorY*this.getScaleHeight(this.footer):this.node.y+this.footer.y+(1-this.footer.anchorY)*this.getScaleHeight(this.footer)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNormalSize",{get:function(){return this.node.getContentSize().equals(this.viewSize)},enumerable:!1,configurable:!0}),t.prototype.getContentSize=function(){var e=this.getReallySize(),t=this.scrollView.view.getContentSize();return e.height<t.height&&(e.height=t.height),e.width<t.width&&(e.width=t.width),e},t.prototype.getReallySize=function(){if(0==this.node.childrenCount)return this.viewSize;var e=cc.Size.ZERO;return this.headerToFooter?(e.width=this.footerBoundaryX+-this.headerBoundaryX+this.paddingLeft+this.paddingRight,e.height=this.headerBoundaryY+-this.footerBoundaryY+this.paddingTop+this.paddingBottom):(e.width=this.headerBoundaryX+-this.footerBoundaryX+this.paddingLeft+this.paddingRight,e.height=this.footerBoundaryY+-this.headerBoundaryY+this.paddingTop+this.paddingBottom),e},t.prototype.resetScrollView=function(){this.scrollView.reset()},t.prototype.getUsedScaleValue=function(e){return this.affectedByScale?Math.abs(e):1},t.prototype.total=function(e){return __awaiter(this,void 0,void 0,function(){var t,o;return __generator(this,function(i){switch(i.label){case 0:return this.scrollView.stopAutoScroll(),this.scrollView.release(),this.initlized(),[4,this.asyncCreateItem(e)];case 1:return i.sent(),t=this.getDataOffset(e),o=this.getReallyOffset(t),this.refreshItems(e,o),this._maxItemTotal=e,[2]}})})},t.prototype.getBrotherNode=function(e){var t=this.getSiblingIndex(e)-1;return this._children[t]},t.prototype.isGroupHeader=function(e){var t=this.getGroupHeader(e),o=this.vertical?cc.v2(t.x,0):cc.v2(0,t.y);return(this.vertical?cc.v2(e.x,0):cc.v2(0,e.y)).fuzzyEquals(o,1e-4)},t.prototype.isGroupFooter=function(e){var t=this.getGroupFooter(e),o=this.vertical?cc.v2(t.x,0):cc.v2(0,t.y);return(this.vertical?cc.v2(e.x,0):cc.v2(0,e.y)).fuzzyEquals(o,1e-4)},t.prototype.getGroupHeader=function(e){var t=cc.Vec2.ZERO;return e?(this.vertical?this.headerToFooter?(t.x=e.anchorX*this.getScaleWidth(e)+this.paddingLeft*e.scaleX-this.node.anchorX*this.viewSize.width*e.scaleX,t.y=(1-e.anchorY)*-this.getScaleHeight(e)-this.paddingTop+(1-this.node.anchorY)*this.viewSize.height):(t.x=e.anchorX*this.getScaleWidth(e)+this.paddingLeft-this.node.anchorX*this.viewSize.width,t.y=e.anchorY*this.getScaleHeight(e)+this.paddingBottom-this.node.anchorY*this.viewSize.height):this.headerToFooter?(t.x=e.anchorX*this.getScaleWidth(e)+this.paddingLeft-this.node.anchorX*this.viewSize.width,t.y=(1-e.anchorY)*-e.height-this.paddingTop+(1-this.node.anchorY)*this.viewSize.height):(t.x=this.accommodWidth*this.node.anchorX-this.getScaleWidth(e)*(1-e.anchorX),t.y=(1-e.anchorY)*-e.height-this.paddingTop+(1-this.node.anchorY)*this.viewSize.height),t):t},t.prototype.getGroupFooter=function(e){var t=cc.Vec2.ZERO;return e?(this.vertical?(t.x=(this.accommodWidth+this.paddingLeft)*this.node.anchorX-(this.getScaleWidth(e)*(1-e.anchorX)+this.node.anchorX*this.paddingRight),t.y=e.y):(t.x=e.x,t.y=-((this.accommodHeight+this.paddingTop)*this.node.anchorY-this.getScaleHeight(e)*e.anchorY)+(1-e.anchorY)*this.paddingBottom),t):t},t.prototype.getGroupRightX=function(e,t){return e&&t?t.x+this.getScaleWidth(t)*(1-t.anchorX)+this.getScaleWidth(e)*e.anchorX+this.spacing.x:this.getGroupHeader(e).x},t.prototype.getGroupLeftX=function(e,t){return e&&t?t.x-this.getScaleWidth(t)*t.anchorX-this.getScaleWidth(e)*(1-e.anchorX)-this.spacing.x:this.getGroupFooter(e).x},t.prototype.getGroupBottomY=function(e,t){return t.y-this.getScaleHeight(t)*t.anchorY-this.getScaleHeight(e)*(1-e.anchorY)-this.spacing.y},t.prototype.getGroupTopY=function(e,t){return t.y+this.getScaleHeight(t)*(1-t.anchorY)+this.getScaleHeight(e)*e.anchorY+this.spacing.y},t.prototype.isOutOfBoundaryHeader=function(e,t){void 0===t&&(t=1.5);var o=e.width*this.getUsedScaleValue(e.scaleX)*t,i=-e.height*this.getUsedScaleValue(e.scaleY)*t;return this.scrollView.getHowMuchOutOfBoundary(cc.v2(o,i))},t.prototype.isOutOfBoundaryFooter=function(e,t){void 0===t&&(t=1.5);var o=-e.width*this.getUsedScaleValue(e.scaleX)*t,i=e.height*this.getUsedScaleValue(e.scaleY)*t;return this.scrollView.getHowMuchOutOfBoundary(cc.v2(o,i))},t.prototype.scrollToHeader=function(e,t){this.scrollToHeaderOrFooter=e>0,this.scrollView.stopAutoScroll(),this.resetToHeader(),this.headerToFooter?this.vertical?this.scrollView.scrollToTop(e,t):this.scrollView.scrollToLeft(e,t):this.vertical?this.scrollView.scrollToBottom(e,t):this.scrollView.scrollToRight(e,t)},t.prototype.scrollToFooter=function(e,t){this.scrollToHeaderOrFooter=e>0,this.scrollView.stopAutoScroll(),this.resetToFooter(),this.headerToFooter?this.vertical?this.scrollView.scrollToBottom(e,t):this.scrollView.scrollToRight(e,t):this.vertical?this.scrollView.scrollToTop(e,t):this.scrollView.scrollToLeft(e,t)},t.prototype.notifyRefreshItem=function(e){cc.Component.EventHandler.emitEvents(this.refreshItemEvents,e,e.index)},t.prototype.getSiblingIndex=function(e){return this._children.indexOf(e)},t.prototype.setSiblingIndex=function(e,t){t=-1!==t?t:this._children.length-1;var i=this._children.indexOf(e);t!==i&&(this._children.splice(i,1),t<this._children.length?this._children.splice(t,0,e):this._children.push(e),this.node.emit(o.UIChangeBrotherEvnet))},t.prototype.onLoad=function(){this.initlized()},t.prototype.initlized=function(){this._isinited||(this.node.anchorX=.5,this.node.anchorY=.5,this.node.setContentSize(this.viewSize),this.node.getContentSize=this.getContentSize.bind(this),this.node.setPosition(cc.Vec2.ZERO),this.column=this.column<1?1:this.column,this.node.on(cc.Node.EventType.POSITION_CHANGED,this.onChangePosition,this),this.scrollView.view.on(cc.Node.EventType.SIZE_CHANGED,this.resetItemSize,this),this._isinited=!0)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.POSITION_CHANGED,this.onChangePosition,this),this.scrollView.view.off(cc.Node.EventType.SIZE_CHANGED,this.resetItemSize,this)},t.prototype.onChangePosition=function(){var e=this.isScrollToFooter;this.headerToFooter?e?this.footerToHeaderWatchChilds(e):this.headerToFooterWatchChilds(e):e?this.headerToFooterWatchChilds(e):this.footerToHeaderWatchChilds(e),(this.vertical&&0==this.node.y||this.horizontal&&0==this.node.x)&&this.header.setPosition(this.getGroupHeader(this.header))},t.prototype.resetItemSize=function(){for(var e=0;e<this.children.length;e++)this.children[e].saveOriginSize();var t=this.getGroupHeader(this.header);for(this.vertical?this.header.x=t.x:this.header.y=t.y,e=0;e<this.children.length;e++)this.children[e].emit(cc.Node.EventType.POSITION_CHANGED)},t.prototype.getScaleWidth=function(e){return e.width*this.getUsedScaleValue(e.scaleX)},t.prototype.getScaleHeight=function(e){return e.height*this.getUsedScaleValue(e.scaleY)},t.prototype.getTempChildren=function(){for(var e=[],t=0;t<this._children.length;t++){var o=this._children[t];e.push(o)}return e},t.prototype.headerToFooterWatchChilds=function(e){for(var t=this.getTempChildren(),o=0;o<t.length;o++)t[o].watchSelf(e)},t.prototype.footerToHeaderWatchChilds=function(e){for(var t=this.getTempChildren(),o=t.length-1;o>=0;o--)t[o].watchSelf(e)},t.prototype.getDataOffset=function(e){if(this.footer&&this.footer.index+1>=e){var t=this.footer.index+1-e;return 0==t?0:-t}return 0==this._maxItemTotal||e<this._maxItemTotal||this._maxItemTotal<this._maxPrefabTotal?0:this.isGroupFooter(this.footer)?0:e-this._maxItemTotal},t.prototype.getReallyOffset=function(e){if(!this.header)return 0;if(e>0){for(var t=0;t<e;t++){if(this.isGroupFooter(this.footer))return t;var o=this.header.getPosition();this.vertical?this.isGroupFooter(this.header)?(this.headerToFooter?o.y=this.getGroupBottomY(this.header,this.header):o.y=this.getGroupTopY(this.header,this.header),o.x=this.getGroupHeader(this.header).x):o.x=this.getGroupRightX(this.header,this.header):this.isGroupFooter(this.header)?(this.headerToFooter?o.x=this.getGroupRightX(this.header,this.header):o.x=this.getGroupLeftX(this.header,this.header),o.y=this.getGroupHeader(this.header).y):o.y=this.getGroupBottomY(this.header,this.header),this.header.setPosition(o)}return e}for(t=0;t<Math.abs(e);t++)o=cc.Vec2.ZERO,this.vertical?this.isGroupHeader(this.header)?(o.x=this.getGroupFooter(this.header).x,this.headerToFooter?o.y=this.getGroupTopY(this.header,this.header):o.y=this.getGroupBottomY(this.header,this.header)):(o.x=this.getGroupLeftX(this.header,this.header),o.y=this.header.y):this.isGroupHeader(this.header)?(o.y=this.getGroupFooter(this.header).y,this.headerToFooter?o.x=this.getGroupLeftX(this.header,this.header):o.x=this.getGroupRightX(this.header,this.header)):(o.y=this.getGroupTopY(this.header,this.header),o.x=this.header.x),this.header.setPosition(o);return this.scrollView.calculateBoundary(),e},t.prototype.refreshItems=function(e,t){if(void 0===t&&(t=0),this.header)for(var o=this.header.index-1+t,i=0;i<this._children.length;i++){var a=this._children[i];++o>e-1?o=0:o<0&&(o=e-1),a.index=o,this.notifyRefreshItem(a)}},t.prototype.resetToHeader=function(){for(var e,t,o=0;o<this._children.length;o++){var i=this._children[o];i.index=o,this.notifyRefreshItem(i)}this.headerLoop||this.footerLoop?this.scrollToHeaderOrFooter||null===(t=this.header)||void 0===t||t.setPosition(this.getGroupHeader(this.header)):null===(e=this.header)||void 0===e||e.setPosition(this.getGroupHeader(this.header))},t.prototype.resetToFooter=function(){for(var e=this._maxItemTotal,t=this._children.length-1;t>=0;t--){var o=this._children[t];o.index=--e,this.notifyRefreshItem(o)}},t.prototype.removeChilds=function(e){for(var t=this.node.childrenCount-e,o=0;o<t;o++){var i=this.footer;this.remChild(i),i.destroy(),this.node.removeChild(i)}if(this.header){var a=this.getGroupHeader(this.header);this.vertical?this.header.x=a.x:this.header.y=a.y}},t.prototype.asyncCreateItem=function(e){var t;return __awaiter(this,void 0,void 0,function(){var o,i=this;return __generator(this,function(a){switch(a.label){case 0:return null===(t=this._gener)||void 0===t||t.return(""),this.node.childrenCount>e?[2,this.removeChilds(e)]:this._maxPrefabTotal>0&&this._maxPrefabTotal==this.node.childrenCount?[2]:(o=e-this.node.childrenCount,this._gener=this.getGeneratorLength(o,function(){var e=cc.instantiate(i.prefab);e.index=i.node.childrenCount,i.addChild(e);var t,o,a=e.getComponent(r.default)||e.addComponent(r.default);if(i.node.addChild(e),a.init(i),i.notifyRefreshItem(e),1==i.node.childrenCount){var n=i.getGroupHeader(i.header);i.header.setPosition(n),i.scrollView.calculateBoundary()}return i.vertical?(t=i.getReallySize().height,o=i.viewSize.height):(t=i.getReallySize().width,o=i.viewSize.width),!(t>=o*i.multiple&&i.isGroupFooter(i.footer)&&(i._maxPrefabTotal=i.node.childrenCount,1))}),[4,this.exeGenerator(this._gener,10)]);case 1:return a.sent(),[2]}})})},t.prototype.addChild=function(e){this._children.push(e),this.node.emit(o.UIChangeBrotherEvnet)},t.prototype.remChild=function(e){var t=this._children.indexOf(e);-1!=t&&(this._children.splice(t,1),this.node.emit(o.UIChangeBrotherEvnet))},t.prototype.getGeneratorLength=function(e,t){var o,i,a=[];for(o=2;o<arguments.length;o++)a[o-2]=arguments[o];return __generator(this,function(o){switch(o.label){case 0:i=0,o.label=1;case 1:return i<e?t.apply(void 0,__spreadArrays([i],a))?[4]:[3,3]:[3,5];case 2:return o.sent(),[3,4];case 3:return[2];case 4:return i++,[3,1];case 5:return[2]}})},t.prototype.exeGenerator=function(e,t){return new Promise(function(o){var i=e,a=function(){for(var e=(new Date).getTime(),n=i.next();;n=i.next()){if(null==n||n.done)return void o(null);if((new Date).getTime()-e>t)return void setTimeout(function(){return a()},1e3*cc.director.getDeltaTime())}};a()})},__decorate([c({type:cc.Enum(i),displayName:"\u6392\u5217\u65b9\u5411"})],t.prototype,"startAxis",void 0),__decorate([c({type:cc.Enum(a),displayName:"\u6392\u5217\u5b50\u8282\u70b9\u7684\u65b9\u5411"})],t.prototype,"direction",void 0),__decorate([c({displayName:"\u4e0a\u8fb9\u8ddd"})],t.prototype,"paddingTop",void 0),__decorate([c({displayName:"\u4e0b\u8fb9\u8ddd"})],t.prototype,"paddingBottom",void 0),__decorate([c({displayName:"\u5de6\u8fb9\u8ddd"})],t.prototype,"paddingLeft",void 0),__decorate([c({displayName:"\u53f3\u8fb9\u8ddd"})],t.prototype,"paddingRight",void 0),__decorate([c({displayName:"\u95f4\u9694"})],t.prototype,"spacing",void 0),__decorate([c({displayName:"\u6bcf\u7ec4item\u4e2a\u6570",tooltip:"\u5355\u884c\u7684\u5217\u6570 \u6216 \u5355\u5217\u7684\u884c\u6570"})],t.prototype,"column",void 0),__decorate([c({displayName:"item\u521b\u5efa\u500d\u7387",tooltip:"\u76f8\u5bf9\u4e8eview\u7684\u5c3a\u5bf8 \u9ed8\u8ba42\u500d"})],t.prototype,"multiple",void 0),__decorate([c({type:cc.Prefab,displayName:"item Prefab"})],t.prototype,"prefab",void 0),__decorate([c({displayName:"\u5934\u90e8\u6ed1\u52a8\u5faa\u73af"})],t.prototype,"headerLoop",void 0),__decorate([c({displayName:"\u5c3e\u90e8\u6ed1\u52a8\u5faa\u73af"})],t.prototype,"footerLoop",void 0),__decorate([c],t.prototype,"affectedByScale",void 0),__decorate([c(cc.Component.EventHandler)],t.prototype,"refreshItemEvents",void 0),__decorate([l,p("UISuperLayout")],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./UISuperItem":"UISuperItem","./UISuperScrollView":"UISuperScrollView"}],UISuperScrollView:[function(e,t,o){"use strict";cc._RF.push(t,"e074cW93tVIPI3lUp9IkOs6","UISuperScrollView"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./UISuperLayout"),a=cc._decorator,n=a.ccclass,r=a.property,s=a.menu,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.headerOutOffset=200,t.headerMultiple=2,t.footerOutOffset=200,t.footerMultiple=2,t.pullDownEvents=[],t.pullUpEvents=[],t.isMoveHeader=!1,t.isMoveFooter=!1,t.isLockHeader=!1,t.isLockFooter=!1,t.headerProgress=0,t.footerProgress=0,t._layout=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoScrolling",{get:function(){return this._autoScrolling},set:function(e){this._autoScrolling=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return null==this._layout&&(this._layout=this.content.getComponent(i.default)),this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHeader",{get:function(){var e,t,o,i;if(this.layout.headerToFooter){if(null===(e=this.layout)||void 0===e?void 0:e.header)return 0==(null===(t=this.layout)||void 0===t?void 0:t.header.index)}else if(null===(o=this.layout)||void 0===o?void 0:o.footer)return(null===(i=this.layout)||void 0===i?void 0:i.footer.index)==this.layout.maxItemTotal-1;return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFooter",{get:function(){var e,t,o;if(this.layout.headerToFooter){if(null===(e=this.layout)||void 0===e?void 0:e.footer)return this.layout.footer.index==this.layout.maxItemTotal-1}else if(null===(t=this.layout)||void 0===t?void 0:t.header)return 0==(null===(o=this.layout)||void 0===o?void 0:o.header.index);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCalculPull",{get:function(){return this.pullDownEvents.length>0||this.pullUpEvents.length>0},enumerable:!1,configurable:!0}),t.prototype.calculateBoundary=function(){this._calculateBoundary()},t.prototype.getHowMuchOutOfBoundary=function(e){return this._getHowMuchOutOfBoundary(e)},t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.SIZE_CHANGED,this.onChangeSize,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this.onChangeSize,this)},t.prototype.onChangeSize=function(){var e=this.view.getComponent(cc.Widget);e&&e.updateAlignment()},t.prototype.release=function(){if(this.isMoveHeader=!1,this.isMoveFooter=!1,this.isLockHeader||this.isLockFooter){var e=this.getHowMuchOutOfBoundary(),t=this.vertical?e.y:-e.x,o=!0;(0==t||this.isLockHeader&&t<0||this.isLockFooter&&t>0)&&(this.clearProgress(),o=!1),this.isLockHeader=!1,this.isLockFooter=!1,o&&(this._outOfBoundaryAmountDirty=!0,this._processInertiaScroll())}else this.clearProgress()},t.prototype.reset=function(){this._outOfBoundaryAmountDirty=!0,this.getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4)||this._processInertiaScroll()},t.prototype._onTouchMoved=function(t,o){if(e.prototype._onTouchMoved.call(this,t,o),this.isCalculPull){var i=this.getHowMuchOutOfBoundary(),a=this.vertical?i.y:-i.x;a>0&&this.isHeader&&!this.isLockHeader&&!this.isLockFooter?(this.headerProgress=a<1e-4?0:a/this.headerOutOffset,this.isMoveHeader=this.headerProgress>=this.headerMultiple,this.emitPullDownEvent({action:!1,progress:this.headerProgress,progressStage:this.isMoveHeader?"wait":"touch"}),this.emitPullUpEvent({action:!1,progress:0,progressStage:"release"})):a<0&&this.isFooter&&!this.isLockFooter&&!this.isLockHeader&&(this.footerProgress=-a<1e-4?0:-a/this.footerOutOffset,this.isMoveFooter=this.footerProgress>=this.footerMultiple,this.emitPullUpEvent({action:!1,progress:this.footerProgress,progressStage:this.isMoveFooter?"wait":"touch"}),this.emitPullDownEvent({action:!1,progress:0,progressStage:"release"}))}},t.prototype._dispatchEvent=function(t){e.prototype._dispatchEvent.call(this,t),"scroll-ended"==t&&(this.layout.scrollToHeaderOrFooter=!1)},t.prototype._getContentTopBoundary=function(){var e,t=this.view.getContentSize(),o=0;return o=(null===(e=this.layout)||void 0===e?void 0:e.header)&&this.layout.getReallySize().height>t.height?this.layout.topBoundary:this._getContentBottomBoundary()+t.height,this.isHeader&&this.isLockHeader&&(o+=this.headerOutOffset),o},t.prototype._getContentBottomBoundary=function(){var e,t=this.view.getContentSize(),o=0;return o=(null===(e=this.layout)||void 0===e?void 0:e.footer)&&this.layout.getReallySize().height>t.height?this.layout.bottomBoundary:this.layout.node.y-this.layout.node.getAnchorPoint().y*t.height,this.isFooter&&this.isLockFooter&&(o-=this.footerOutOffset),o},t.prototype._getContentLeftBoundary=function(){var e,t=this.view.getContentSize(),o=0;return o=(null===(e=this.layout)||void 0===e?void 0:e.header)&&this.layout.getReallySize().width>t.width?this.layout.leftBoundary:this.layout.node.x-this.layout.node.getAnchorPoint().x*t.width,this.isHeader&&this.isLockHeader&&(o-=this.headerOutOffset),o},t.prototype._getContentRightBoundary=function(){var e,t=this.view.getContentSize(),o=0;return o=(null===(e=this.layout)||void 0===e?void 0:e.footer)&&this.layout.getReallySize().width>t.width?this.layout.rightBoundary:this._getContentLeftBoundary()+t.width,this.isFooter&&this.isLockFooter&&(o+=this.footerOutOffset),o},t.prototype._startAutoScroll=function(t,o,i){this.isCalculPull&&(this.isMoveHeader&&!this.isLockHeader?(this.isLockHeader=!0,this.vertical&&(t.y-=this.headerOutOffset),this.horizontal&&(t.x+=this.headerOutOffset),this.emitPullDownEvent({action:!0,progress:this.headerProgress,progressStage:"lock"})):this.isMoveFooter&&!this.isLockFooter&&(this.isLockFooter=!0,this.vertical&&(t.y+=this.footerOutOffset),this.horizontal&&(t.x-=this.footerOutOffset),this.emitPullUpEvent({action:!0,progress:this.footerProgress,progressStage:"lock"}))),e.prototype._startAutoScroll.call(this,t,o,i)},t.prototype._updateScrollBar=function(t){if(e.prototype._updateScrollBar.call(this,t),this.isCalculPull&&!this._autoScrollBraking&&this.autoScrolling){var o=this.vertical?t.y:-t.x;if(o>0){var i=o<1e-4?0:o/this.headerOutOffset,a=void 0;this.isLockHeader?(this.headerProgress=1==this.headerProgress?this.headerProgress:Math.max(i,1),a="lock"):(this.headerProgress=i<this.headerProgress?i:this.headerProgress,a="release"),this.emitPullDownEvent({action:!1,progress:this.headerProgress,progressStage:a})}else o<0?(i=-o<1e-4?0:-o/this.footerOutOffset,a=void 0,this.isLockFooter?(this.footerProgress=1==this.footerProgress?this.footerProgress:Math.max(i,1),a="lock"):(this.footerProgress=i<this.footerProgress?i:this.footerProgress,a="release"),this.emitPullUpEvent({action:!1,progress:this.footerProgress,progressStage:a})):0==o&&(this.isLockHeader||this.isLockFooter||this.clearProgress())}},t.prototype.clearProgress=function(){this.headerProgress=0,this.footerProgress=0,this.emitPullDownEvent({action:!1,progress:0,progressStage:"release"}),this.emitPullUpEvent({action:!1,progress:0,progressStage:"release"})},t.prototype.emitPullDownEvent=function(e){cc.Component.EventHandler.emitEvents(this.pullDownEvents,this,e)},t.prototype.emitPullUpEvent=function(e){cc.Component.EventHandler.emitEvents(this.pullUpEvents,this,e)},__decorate([r({displayName:"\u9876\u90e8\u504f\u79fb\u91cf",tooltip:"\u4e0b\u62c9\u65f6\u8d85\u8fc7\u6b64\u504f\u79fb\u4f1a\u53d1\u9001\u4e0b\u62c9\u4e8b\u4ef6"})],t.prototype,"headerOutOffset",void 0),__decorate([r({displayName:"\u6ee1\u8db3\u89e6\u53d1Header\u7684\u500d\u6570"})],t.prototype,"headerMultiple",void 0),__decorate([r({displayName:"\u5e95\u90e8\u504f\u79fb\u91cf",tooltip:"\u4e0a\u62c9\u65f6\u8d85\u8fc7\u6b64\u504f\u79fb\u4f1a\u53d1\u9001\u4e0a\u62c9\u4e8b\u4ef6"})],t.prototype,"footerOutOffset",void 0),__decorate([r({displayName:"\u6ee1\u8db3\u89e6\u53d1Footer\u7684\u500d\u6570"})],t.prototype,"footerMultiple",void 0),__decorate([r({type:cc.Component.EventHandler,displayName:"\u4e0b\u62c9\u4e8b\u4ef6"})],t.prototype,"pullDownEvents",void 0),__decorate([r({type:cc.Component.EventHandler,displayName:"\u4e0a\u62c9\u4e8b\u4ef6"})],t.prototype,"pullUpEvents",void 0),__decorate([n,s("UISpuerScrollView")],t)}(cc.ScrollView);o.default=l,cc._RF.pop()},{"./UISuperLayout":"UISuperLayout"}],UserData:[function(e,t,o){"use strict";cc._RF.push(t,"627edIKcddBMJ2exxDIs+Be","UserData"),Object.defineProperty(o,"__esModule",{value:!0}),o.User=o.ShopData=o.LoginData=o.BonusData=o.SignInData=o.PlusChequerData=o.LvRwd=o.PigData=o.FailInfo=o.StarData=o.DotData=o.GoldData=void 0;var i=e("../global/GameConfig"),a=e("../core/util/DateUtils"),n=e("../global/AudioMgr"),r=e("../sdk/LogEvent"),s=e("../core/global/Emitter"),l=e("../global/Const"),c=e("../core/util/StrUtil"),p=e("../Game"),u=e("../sdk/MibData"),d=function(){this.gold=0,this.buyBg=[],this.propUndo=0,this.propAuto=0,this.propRefresh=0};o.GoldData=d;var h=function(){this.currentLevel=1};o.DotData=h;var f=function(){this.total=0,this.alltotal=0,this.levels=[]};o.StarData=f;var g=function(){this.failinfo=[]};o.FailInfo=g;var y=function(){this.pigCoin=0,this.adNo=0};o.PigData=y;var m=function(){this.Id=0,this.This=1,this.Amount=0,this.Type=0,this.Multiple=1,this.Need=!1,this.Next=2};o.LvRwd=m;var v=function(){this.IsPlus=!1,this.WatchTimes=0,this.Timestamp=0};o.PlusChequerData=v;var _=function(){this.SignInDays=0,this.Timestamp=0,this.Isloadered=!1,this.UUID=""};o.SignInData=_;var b=function(){this.SpinTimes=0,this.Multiple=1,this.Timestamp=0};o.BonusData=b;var T=function(){function e(){this.firstZero=0,this.first=0,this.last=0,this.days=0,this.last30=0}return e.init=function(e){var t=new Date,o=t.getTime();e.firstZero=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),e.first=o,e.last=o,e.days=1,e.last30=1<<29},e.formatInfo=function(e){return[a.default.dateFormat(new Date(e.first),!0),a.default.timeFormat(e.first-e.firstZero,!0,1),e.days,e.last30]},e}();o.LoginData=T;var C=function(){this.removeAds=0,this.buyIds=[]};o.ShopData=C;var S=function(){this.l="en_US",this.k=[!0,!0],this.loginData=new T,this.goldData=new d,this.shopWatchTimes=0,this.shopLastTimestamp=0,this.starData=new f,this.failInfo=new g,this.pigData=new y,this.plusChequer=new v,this.signInData=new _,this.bonusData=new b,this.lvRwd=new m,this.shopData=new C,this.dotData=new h,this.raceData=[],this.currentDay=new Date,this.raceRecord=[0,0]};o.User=S;var I=function(){function e(){this.defaultFBData=new S,this._language="en_US",this.userType="unknown",this.userLoginInfo=["",0,0],this.tempRewardRes=null,this.cacheSaveObj={},this._gameBG="default"}return e.prototype.initData=function(e){this.mainCallBack=e;var t=[];for(var o in this.defaultFBData)t.push(o);i.default.SDK.getData(t,this.initGameData,this)},e.prototype.initGameData=function(e){var t=new Date,o=t.getTime();if(null==e.loginData)e=JSON.parse(JSON.stringify(this.defaultFBData)),T.init(e.loginData),e.login=[new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o,o,1,1<<29],this.userLoginInfo=T.formatInfo(e.loginData),i.default.SDK.setData(e),this.FBData=e,this.userType="new",r.default.login(),e[l.default.kGoldData].propUndo=5,e[l.default.kGoldData].propAuto=5,e[l.default.kGoldData].propRefresh=5,i.default.SDK.setData(e);else{if(this.userType="old",e.pigData||(e.pigData=new y),e.shopData||(e.shopData=new C),e.raceData||(e.raceData=[]),e.raceRecord||(e.raceRecord=[0,0]),e.currentDay||(e.currentDay=new Date),e.k||(e.k=[!0,!0],i.default.SDK.setData({k:e.k})),e.loginData){var s=e.loginData,c=new Date(s.last);if(a.default.dateFormat(t)!=a.default.dateFormat(c)){var p=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();p=29-(p=(p-s.firstZero)/864e5),s.last=o,s.days++,p>=0&&p<29&&(s.last30=s.last30|1<<p),i.default.SDK.setData({loginData:s}),r.default.login()}}else e.loginData=new T,T.init(e.loginData),i.default.SDK.setData({loginData:e.loginData}),r.default.login();this.userLoginInfo=T.formatInfo(e.loginData),this.FBData=e}n.AudioMgr.init(e.k[0],e.k[1]),this._language=i.default.SDK.getLocal(),this.updateData("l",this._language),this._gameBG=e.gameBG,console.log(this.FBData),i.default.TEST&&(e[l.default.kGoldData].gold=3e3,e[l.default.kGoldData].propUndo=1,e[l.default.kGoldData].propAuto=3e3,e[l.default.kGoldData].propRefresh=3e3,e[l.default.kPigData].pigCoin=980),this.FBData[l.default.kTrophyYear]!=t.getFullYear()&&(this.updateData(l.default.kTrophyYear,t.getFullYear()),this.FBData[l.default.kTrophy]=[0,0,0,0,0,0,0,0,0,0,0,0],this.FBData[l.default.kLastMonth]=[],this.FBData[l.default.kCurrentMonth]=[]),this.saveData(),this.mainCallBack(),this.mainCallBack=null,this.UUIDSet()},Object.defineProperty(e.prototype,"gameBG",{get:function(){return this._gameBG},set:function(e){this._gameBG!=e&&(this._gameBG=e,this.updateData("gameBG",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this._language},set:function(e){this._language!=e&&(this._language=e,this.updateData("l",e))},enumerable:!1,configurable:!0}),e.prototype.updateData=function(e,t){this.FBData[e]=t,this.cacheSaveObj[e]=t},e.prototype.updateObjData=function(e){for(var t in e)this.FBData[t]=e[t],this.cacheSaveObj[t]=e[t]},e.prototype.saveData=function(){i.default.SDK.setData(this.cacheSaveObj);var e="";for(var t in this.cacheSaveObj)e+=t+",";console.log("saveData",e,this.cacheSaveObj),this.cacheSaveObj={}},e.prototype.clearUserData=function(){i.default.SDK.setData(this.defaultFBData)},Object.defineProperty(e.prototype,"guideData",{get:function(){return this.FBData[l.default.kGuide]},set:function(e){this.updateData(l.default.kGuide,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"goldData",{get:function(){return this.FBData[l.default.kGoldData]},set:function(e){this.updateData(l.default.kGoldData,e),s.Emitter.fire(l.default.eGoldDataChanged,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shopWatchTimes",{get:function(){return this.FBData[l.default.kShopWatchTimes]},set:function(e){this.updateData(l.default.kShopWatchTimes,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shopLastTimestamp",{get:function(){return this.FBData[l.default.kShopLastTimestamp]},set:function(e){this.updateData(l.default.kShopLastTimestamp,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"starData",{get:function(){return this.FBData[l.default.kStarData]},set:function(e){this.updateData(l.default.kStarData,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failInfoData",{get:function(){return this.FBData[l.default.kFailInfo]},set:function(e){this.updateData(l.default.kFailInfo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pigData",{get:function(){return this.FBData[l.default.kPigData]},set:function(e){this.updateData(l.default.kPigData,e),s.Emitter.fire(l.default.ePigDataChanged,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"raceRecord",{get:function(){return this.FBData[l.default.kraceRecord]},set:function(e){this.updateData(l.default.kraceRecord,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"plusChequerData",{get:function(){return this.FBData[l.default.kPlusChequer]},set:function(e){this.updateData(l.default.kPlusChequer,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signInData",{get:function(){return this.FBData[l.default.kSignInData]},set:function(e){this.updateData(l.default.kSignInData,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bonusData",{get:function(){return this.FBData[l.default.kBonusData]},set:function(e){this.updateData(l.default.kBonusData,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lvRwd",{get:function(){return this.FBData[l.default.kLvRwd]},set:function(e){this.updateData(l.default.kLvRwd,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shopData",{get:function(){return this.FBData[l.default.kShopData]},set:function(e){this.updateData(l.default.kShopData,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currtyDay",{get:function(){return this.FBData[l.default.kcurentDay]},set:function(e){this.updateData(l.default.kcurentDay,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dotData",{get:function(){return this.FBData[l.default.kDotData]},set:function(e){this.updateData(l.default.kDotData,e)},enumerable:!1,configurable:!0}),e.prototype.UUIDSet=function(){var e=this.signInData;(!e||!e.UUID||e.UUID.length<10)&&(e.UUID=c.default.getUuid(),this.signInData=e),console.log("*****king  \u8bbe\u7f6eUUID"+e.UUID),p.Game.sdkPipeline.smbiUuid(e.UUID);var t=new u.ForeEvent;t.eventTargetId="1",t.time="0",r.default.log(r.default.ACTION_LOGIN_RESULT,1,e.UUID)},Object.defineProperty(e.prototype,"raceData",{get:function(){return this.FBData[l.default.kRaceData]},set:function(e){this.updateData(l.default.kRaceData,e)},enumerable:!1,configurable:!0}),e.prototype.isFirstDay=function(){return 1==this.userLoginInfo[2]},e}();o.default=I,cc._RF.pop()},{"../Game":"Game","../core/global/Emitter":"Emitter","../core/util/DateUtils":"DateUtils","../core/util/StrUtil":"StrUtil","../global/AudioMgr":"AudioMgr","../global/Const":"Const","../global/GameConfig":"GameConfig","../sdk/LogEvent":"LogEvent","../sdk/MibData":"MibData"}],VecUtil:[function(e,t,o){"use strict";cc._RF.push(t,"841cfJYynBGwa2WnmHERrhz","VecUtil"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.center=function(e,t){return e&&t?new cc.Vec2((e.x+t.x)/2,(e.y+t.y)/2):(console.error("center p1 or p2 undefined! p1="+e+", p2="+t),cc.Vec2.ZERO)},e.distance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.getMaxDistanceToCorner=function(e){for(var t=new cc.Size(cc.winSize.width/2,cc.winSize.height/2),o=0,i=0;i<4;i++){var a=i<2?1:-1,n=1==i||2==i?1:-1,r=new cc.Vec2(t.width*a,t.height*n),s=e.sub(r).mag();s>o&&(o=s)}return o},e}();o.default=i,cc._RF.pop()},{}],WNode:[function(e,t,o){"use strict";cc._RF.push(t,"b4c6c33AFRNUI0BJ3I02X4h","WNode"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,n=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._start=!1,t._position=cc.Vec3.ZERO,t}return __extends(t,e),Object.defineProperty(t.prototype,"activeInHierarchy",{get:function(){return this.node.active&&this.node.activeInHierarchy},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._start=!0,this._position=this.node.position},Object.defineProperty(t.prototype,"isStart",{get:function(){return this._start},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.setActive(!0)},t.prototype.hide=function(){this.setActive(!1)},t.prototype.setActive=function(e){this.isStart||this.init(),this.node.active!=e&&(this.node.active=e)},t.prototype.setActiveForPosition=function(e){this.isStart||this.init(),e?this.node.setPosition(this._position):this.node.setPosition(Number.MAX_VALUE,Number.MAX_VALUE)},__decorate([a],t)}(cc.Component));o.default=n,cc._RF.pop()},{}],WWindow:[function(e,t,o){"use strict";cc._RF.push(t,"16e9byYMmpHWoFlV6/xzFOb","WWindow"),Object.defineProperty(o,"__esModule",{value:!0}),o.SiblingIndexType=void 0;var i,a=e("./WNode"),n=e("../global/Emitter"),r=e("../../global/Const"),s=e("../component/Orientation"),l=cc._decorator,c=l.ccclass,p=l.property;(function(e){e[e.Normal=1]="Normal",e[e.High=2]="High"})(i=o.SiblingIndexType||(o.SiblingIndexType={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t.showClip=null,t.hideClip=null,t.stopEventing=!0,t.siblingIndexType=i.Normal,t.clickToback=!1,t.isDialog=!0,t.showAudio="open_common",t.hideAudio="cancel_common",t.aniScript=null,t.path=null,t.showing=!1,t.hideing=!1,t._ToForceWindow=null,t._NoAnimation=!1,t.mEventMask=null,t.maskWidget=null,t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"toForceWindow",{set:function(e){this._ToForceWindow=e},enumerable:!1,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),this.aniScript=this.getAniScript(),this.aniScript&&this.aniScript.init(this.node),this.clickToback&&this.node.on(cc.Node.EventType.TOUCH_END,this.toBack,this),this.stopEventing&&(this.mEventMask=this.createEventMask())},t.prototype.createEventMask=function(){var e=this,t=new cc.Node("EventMask");return t.setParent(this.node),t.width=this.node.width,t.height=this.node.height,t.setSiblingIndex(9999),t.addComponent(cc.BlockInputEvents),t.active=!1,setTimeout(function(){t.width=e.node.width,t.height=e.node.height,cc.log("[WWindow],createEventMask in timeout,",e.node.name,t.width,t.height)},1),t},t.prototype.getAniScript=function(){return null},t.prototype.getPlaying=function(){return this.showing},t.prototype.initMaskWidget=function(){var e=this.node.getChildByName("mask");if(!e){var t=this.node.getChildByName("bg");t&&(e=t.getChildByName("mask"))}e?this.maskWidget=e.getComponent(cc.Widget):console.log("not find mask for node ",this.node.name),n.Emitter.register(r.default.eOrientationChanged,this.fitMask,this)},t.prototype.fitMask=function(){s.default.current.isPortrait?this.maskWidget&&(this.maskWidget.top=-75,this.maskWidget.bottom=-75,this.maskWidget.left=0,this.maskWidget.right=0):this.maskWidget&&(this.maskWidget.top=0,this.maskWidget.bottom=0,this.maskWidget.left=-75,this.maskWidget.right=-75)},t.prototype.show=function(){for(var t=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];this.showing||(this.hideing=!1,e.prototype.show.call(this),this.stopEventing&&this.stopEventOn(),i&&i.length>1&&i[1]?this._NoAnimation=i[1]:this._NoAnimation=!1,i&&i[0]instanceof o&&(this._ToForceWindow=i[0],this._ToForceWindow.hide()),this._NoAnimation?(this.aniScript&&this.aniScript.reset(),this.onShow()):(this.showing=!0,this.showAnimation(function(){t.onShow(),t.showing=!1})),this.dispatchShowEvent())},t.prototype.showAnimation=function(e){var t=this;if(this.aniScript)this.aniScript.show(e);else if(null==this.animation&&(this.animation=this.node.getComponent(cc.Animation)),null!=this.animation&&null!=this.showClip){this.animation.play(this.showClip.name);var o=this.showClip.duration;setTimeout(function(){t.schedule(e,0,0)},1e3*o)}else e()},t.prototype.onShow=function(){this.stopEventing&&this.stopEventOff()},t.prototype.dispatchShowEvent=function(){n.Emitter.fire(r.default.eOnShowUI,this)},t.prototype.dispatchHideEvent=function(){n.Emitter.fire(r.default.eOnHideUI,this)},t.prototype.toBack=function(){this.hide(),this._ToForceWindow&&(this._ToForceWindow.toForce(),this._ToForceWindow=null)},t.prototype.toForce=function(){this.show()},t.prototype.hide=function(){var e=this;this.activeInHierarchy&&!this.hideing&&(this.stopEventing&&this.stopEventOn(),this.showing=!1,this.hideing=!0,this.hideAnimation(function(){e.hideing=!1,e.onHide()}))},t.prototype.hideAnimation=function(e){if(this.aniScript)this.aniScript.hide(e);else if(null==this.animation&&(this.animation=this.node.getComponent(cc.Animation)),null!=this.animation&&null!=this.hideClip){this.animation.play(this.hideClip.name);var t=this.hideClip.duration;setTimeout(function(){e()},1e3*t)}else e()},t.prototype.onHide=function(){e.prototype.hide.call(this),this.hideing=!1,this.stopEventing&&this.stopEventOff(),this.dispatchHideEvent()},t.prototype.stopEventOn=function(){this.mEventMask&&(this.mEventMask.active=!0)},t.prototype.stopEventOff=function(){this.mEventMask&&(this.mEventMask.active=!1)},__decorate([p(cc.Animation)],t.prototype,"animation",void 0),__decorate([p(cc.AnimationClip)],t.prototype,"showClip",void 0),__decorate([p(cc.AnimationClip)],t.prototype,"hideClip",void 0),__decorate([p],t.prototype,"stopEventing",void 0),__decorate([p({type:cc.Enum(i)})],t.prototype,"siblingIndexType",void 0),__decorate([p],t.prototype,"clickToback",void 0),__decorate([p],t.prototype,"isDialog",void 0),__decorate([p],t.prototype,"showAudio",void 0),__decorate([p],t.prototype,"hideAudio",void 0),o=__decorate([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../global/Const":"Const","../component/Orientation":"Orientation","../global/Emitter":"Emitter","./WNode":"WNode"}]},{},["App","Game","TabManager","Table","TableBase","TableHelper","DialogBox","DialogWarnBox","IWAnimation","Toast","UIManager","UIRootFit","WNode","WWindow","FitOrientaionLayout","FitOrientaionScale","FitOrientationActive","FitOrientationSize","FitOrientationWidget","Orientation","PolygonMask","RotateForever","SwitchButton","Textfield","Emitter","I18N","PEDictionary","DaliyHelper","DaliyWindow","DayItem","RaceFailWindow","RaceWinWindow","ColorUtil","DateUtils","MathUtil","ResUtil","StrUtil","VecUtil","DataTools","MapHelper","ShopHelper","UserData","BoxOpenSystem","GameMgr","GameSucc","Stage","StageView","Tile","BottomManager","GameRes","GuideMapManager","MapManager","TileDateTools","TileManager","TilePool","DataStructure","Debug","Enum","GameUtil","GuideGameUtil","TestTypeMap","AudioMgr","Const","DataManager","GameConfig","AndroidPaySDK","DefaultPaySDK","ISPAYSDK","UISuperItem","UISuperLayout","UISuperScrollView","AndroidSDK","DefaultSDK","IOSSDK","ISDK","LogEvent","MibData","SDKConst","SdkPipeline","FBAdManager","FacebookSDK","AnimationUtil","AniBase","AniBottomToShow","AniLeftToRightShow","AniRightToLeftShow","LoaderWindow","UICenter","AddGridWindow","BeginnerGiftWindow","BonusWindow","DailyHelpWindow","DayGiftWindow","DayOpenGiftWindow","EnterGameWindow","FreePropWindow","GainItemWindow","GoldWindow","Guide01Window","GuideWindow","Level3000Window","LoadingWindow","MainShopWindow","MapWindow","PigBankWindow","PlaneWindow","RateWindow","RemoveAdWindow","SettingWindow","ShopWindow","StageWindow","StarGiftWindow","StrengthWindow","SuperBonusWindow","SuspendWindow","TileFailWindow","TileWinWindow","BonusItemContent","ItemContent","ItemGoldContent","KingGiftItemContent","LevelContent","MapContent","SignInContent","MainHomePage","MainPage","MainShopPage","MainToggleItem","MainToggles","MainWindow","ShoItemMore","ShopComp","ShopItem","ShopItemAdCoins","ShopItemAds","ShopItemComp","ShopItemIcon","ShopItemPig","ShopItemSuit","ShopItemTitle"]);